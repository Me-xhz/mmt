(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageA/team-list/team-list"],{1751:function(t,e,a){"use strict";var n=a("e2e9"),i=a.n(n);i.a},"48bb":function(t,e,a){"use strict";a.r(e);var n=a("f2db"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"58b0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"5b5e":function(t,e,a){"use strict";a.r(e);var n=a("58b0"),i=a("48bb");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("1751");var u=a("2877"),s=Object(u["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},e2e9:function(t,e,a){},f2db:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=getApp().globalData,i=a("28c1"),o=(a("b6a1"),function(){return a.e("components/teamList/teamList").then(a.bind(null,"264e"))}),u=function(){return a.e("components/countDown/countDown").then(a.bind(null,"513f"))},s={data:function(){return{goods_id:0,isShowGoHome:!1,teamList:[],teamFound:{},team_id:0,entryData:""}},components:{teamList:o,countdown:u},props:{},onLoad:function(t){var e=this;t.goods_id&&(this.goods_id=t.goods_id),t&&t.entryType&&"external"==t.entryType?this.setData({isShowGoHome:!1}):this.setData({isShowGoHome:!0}),this.setData({entryData:t});t=e.entryData;var a=i.getStorageSync("getpickup");t&&(t.atitude||t.pickup_id)&&!a&&e.getExternal(t.pickup_id).then(function(){n.firstlaunchApp=!1,e.entryData={},i.setStorageSync("authSetting",{"scope.userLocation":!0})})},onShow:function(){this.getTeamList()},methods:{getExternal:function(t){var e=n.getPath.getpickup,a={pickup_id:t};return new Promise(function(t,n){i.ApiGateWayTest(e,a,!0,function(e){if(e&&e.data&&1==e.data.success){e=e.data.result.cities.pick_up;i.setStorage({key:"getpickup",data:{pickup_id:e.pickup_id,cityName:e.pickup_name,pickup_address:e.pickup_address,pickup_contact:e.pickup_contact,pickup_phone:e.pickup_phone,pickup_type:e.pickup_type}},function(e){t("获取id成功")}),i.setStorage({key:"city",data:{pickup_id:e.pickup_id,warehouse_id:e.warehouse_id,cityName:e.city_name,is_pick_up:1}})}})})},getTeamList:function(){var t=this,e=n.getPath.teamList,a={goods_id:this.goods_id};i.ApiGateWayTest(e,a,!0,function(e){e=e.data;1==e.success&&t.setData({teamList:e.result.data})})},gotoHome:function(t){i.formIdUpdate(t),wx.switchTab({url:"/pages/index/index"})},countDown:function(t){var e=this,a=(new Date).getTime()/1e3;e.teamList.forEach(function(t,n){var i=t.found_end_time-parseInt(a),o=[];o[n]=setInterval(function(){if(i--,i>0){var t=parseInt(i/60/60/24),a=parseInt(i/60/60%24)+24*t,u=parseInt(i/60%60),s=parseInt(i%60);t<10&&(t="0"+t),a<10&&(a="0"+a),u<10&&(u="0"+u),s<10&&(s="0"+s);e.teamList[n]["timeData"]={d:t,h:a,m:u,s:s},n+1==e.teamList.length&&e.setData({teamList:e.teamList})}else{t="00",a="00",u="00",s="00";e.teamList[n]["timeData"]={d:t,h:a,m:u,s:s},n+1==e.teamList.length&&e.setData({teamList:e.teamList}),clearInterval(o[n])}},1e3)})},toAddTeam:function(t){var e=this,a=t.currentTarget.dataset.found_id;this.team_id=t.currentTarget.dataset.team_id,i.formIdUpdate(t),wx.navigateTo({url:"/packageA/groupbuy/groupbuy?pickup_id="+e.teamFound.pickup_id+"&found_id="+a})},getGroupInfo:function(t){var e=n.getPath.teamFound,a={found_id:t};return new Promise(function(t,n){i.ApiGateWayTest(e,a,!0,function(e){e=e.data;var a={teamFound:e.result.teamFound,team_id:e.result.team_id};t(a)})})},toAdd:function(t){var e=this,a=(e.teamFound,i.getStorageSync("isOldUser"));if(!n.checkSessionKey||2==a)return i.goRegister(),!1;var o=n.getPath.preCheckOrder,u=[{goods_id:t.teamFound.goods_id,sku_key:t.teamFound.sku_key,num:1}];u=JSON.stringify(u);var s={order_product:u,team_order:2,team_id:t.team_id,found_id:t.teamFound.found_id,time_atitude:n.dataBase.userAtitude};i.ApiGateWayTest(o,s,!0,function(a){if(1==a.data.success){var n=[{goods_name:t.teamFound.goods_name,goods_id:t.teamFound.goods_id,sku_key:t.teamFound.sku_key,amount:1,shop_price:t.teamFound.price,market_price:t.teamFound.goods_price,sku_key_name:t.teamFound.sku_key_name,sku_img:t.teamFound.sku_img,team_order:2,team_id:t.team_id,found_id:t.teamFound.found_id}];i.setStorage({key:"nowPay",data:n}),wx.navigateTo({url:"/pages/confirm/confirm"})}else{i.toast(a.data.msg);var o={msg:1};e.$emit("getinfo",o)}})},setData:function(t){var e=this,a=[];Object.keys(t).forEach(function(n){a=n.split("."),t[n],e.$data,a.forEach(function(a,i){e[n]=t[n]})})}}};e.default=s}},[["8bb9","common/runtime","common/vendor"]]]);