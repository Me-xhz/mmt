(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageA/user/aftermarket-schedule"],{"181f":function(t,a,i){"use strict";var n=function(){var t=this,a=t.$createElement;t._self._c},e=[];i.d(a,"a",function(){return n}),i.d(a,"b",function(){return e})},"456b":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=getApp().globalData,e=i("28c1"),s={data:function(){return{iconURL:n.dataBase.iconURL,pickerData:["顺丰速运","圆通快递","申通快递","中国邮政","EMS","其他"],shipping_sn:"",shipping_name:"",uploadInfo:{},uploadImg:[],submitImg:[],LogisticsDs:!0,id:"",listinfo:"",imgLenth:"",imgNowLength:""}},components:{},props:{},onLoad:function(t){void 0!=t&&void 0!=t.id?(this.setData({id:t.id}),this.getInfo()):e.toast("请求参数错误")},methods:{getInfo:function(){var t=this;e.showLoad(this);var a=n.getPath.backHistory,i={back_id:t.id};e.ApiGateWayTest(a,i,!0,function(a){if(1==a.data.success){a=a.data.result;t.setData({listinfo:a.data})}else e.toast("网络错误");e.hideLoad(t),wx.hideLoading()})},showLogistics:function(){var t=this;t.LogisticsDs&&wx.showActionSheet({itemList:t.pickerData,success:function(a){t.setData({shipping_name:t.pickerData[a.tapIndex]}),5==a.tapIndex&&t.setData({LogisticsDs:!1})}})},LogisticsTxt:function(t){var a=t.detail.value;this.setData({shipping_name:a})},LogisticsSn:function(t){var a=t.detail.value;this.setData({shipping_sn:a})},updataimg:function(){var t=this;if(t.uploadImg.length<3){var a=parseInt(3)-parseInt(t.uploadImg.length);wx.chooseImage({count:a,success:function(a){t.uploadImg=t.uploadImg.concat(a.tempFilePaths),t.setData({uploadImg:t.uploadImg})}})}},delUploadImg:function(t){var a=t.currentTarget.dataset.index;this.uploadImg.splice(a,1),this.setData({uploadImg:this.uploadImg})},submitImg:function(t){var a=this,i=a.uploadImg,s={accept:"application/json","content-type":"multipart/form-data","x-application":"cilicili","x-platform":"wx","x-useragent":"host","x-ver":"v1.0"};if(s["X-Authorization"]=e.getStorageSync("token"),i.length>0)for(var o in i){var c=a.uploadImg[o],u={path:"order_back",img_type:1};wx.uploadFile({url:n.dataBase.uploadFile,filePath:c,name:"img",formData:u,header:s,success:t}),a.setData({imgLenth:i.length,imgNowLength:Number(o)+1}),wx.showLoading({title:a.imgNowLength+"/"+a.imgLenth,mask:!0})}else t(!1)},submitShipping:function(){var t=this;if(""!=t.shipping_name&&""!=t.shipping_sn){var a=n.getPath.submitShippingInfo,i={back_id:t.id,shipping_name:t.shipping_name,invoice_no:t.shipping_sn};t.submitImg(function(n){if(0!=n){n=JSON.parse(n.data);t.submitImg.push(n.result.url)}t.uploadImg.length==t.submitImg.length&&(i["pic_info"]=JSON.stringify(t.submitImg),e.ApiGateWayTest(a,i,!0,function(a){1==a.data.success&&(e.toast(a.data.msg),t.getInfo())}))})}else e.toast("物流信息不能为空")},showwithdrawDialog:function(){var t=this,a="确定取消售后申请吗",i="确定";e.showModal(a,i,function(a){var i=n.getPath.backCancel,s={back_id:t.id};a.confirm&&e.ApiGateWayTest(i,s,!0,function(t){1==t.data.success&&(e.toast(t.data.msg),wx.navigateBack())})})},go_order_return_detail:function(){var t=this;wx.redirectTo({url:"../user/order-return-detail?id="+t.id})},go_order_return_shipping:function(){var t=this;wx.navigateTo({url:"../user/order-express?back_id="+t.listinfo.back_cnt.back_id})},showConfirmDialog:function(){var t=this,a="请确定是否收到商品",i="确定";e.showModal(a,i,function(a){var i=n.getPath.changeConfirm,s={back_id:t.listinfo.back_cnt.back_id};a.confirm&&e.ApiGateWayTest(i,s,!0,function(a){1==a.data.success?(e.toast(a.data.msg),t.getInfo()):e.toast(a.data.msg)})})},setData:function(t){var a=this,i=[];Object.keys(t).forEach(function(n){i=n.split("."),t[n],a.$data,i.forEach(function(i,e){a[n]=t[n]})})}}};a.default=s},"524a":function(t,a,i){},"643b":function(t,a,i){"use strict";var n=i("524a"),e=i.n(n);e.a},"8d2a":function(t,a,i){"use strict";i.r(a);var n=i("181f"),e=i("bac9");for(var s in e)"default"!==s&&function(t){i.d(a,t,function(){return e[t]})}(s);i("643b");var o=i("2877"),c=Object(o["a"])(e["default"],n["a"],n["b"],!1,null,null,null);a["default"]=c.exports},bac9:function(t,a,i){"use strict";i.r(a);var n=i("456b"),e=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(a,t,function(){return n[t]})}(s);a["default"]=e.a}},[["1ef1","common/runtime","common/vendor"]]]);