<view><view class="container"><block wx:if="{{isShowGoHome}}"><view data-event-opts="{{[['tap',[['gotoHome',['$event']]]]]}}" class="goHomeFixed" catchtap="__e"><image class="icon-leftReturn" src="{{iconURL+'/product-icon-leftReturn.svg'}}"></image><text>返回首页</text></view></block><view class="search-bar"><view class="flexs"><input class="searchbar" placeholder="搜索商品" confirm-type="search" data-event-opts="{{[['input',[['searchValueInput',['$event']]]],['confirm',[['searchProductData',['$event']]]]]}}" value="{{searchValue}}" bindinput="__e" bindconfirm="__e"/><button class="search_icon"><view class="iconfont icon-img_sousuox"></view></button></view></view><view data-event-opts="{{[['tap',[['toShopCoupon',['$event']]]]]}}" class="{{['coupon-flex '+(ordernum.can_use_shop_coupon&&ordernum.can_use_shop_coupon>0&&showCouponFlex?'show':'')]}}" bindtap="__e">温馨提示：您有<view class="_i">{{ordernum.can_use_shop_coupon}}</view>个红包可使用 >></view><block wx:if="{{showNotice}}"><view data-event-opts="{{[['tap',[['noticeToast',['$event']]]]]}}" class="notice-wrap" bindtap="__e"><view class="notice"><view class="marquee_text" style="{{('left:'+noticeMarqueeDistance+'px;')}}">{{''+notice+''}}</view><view class="marquee_text" style="{{('left:'+(noticeMarqueeDistance+sizeLength)+'px;')}}">{{''+notice+''}}</view></view><view class="filter"></view><view class="iconfont icon-btn_gerenzhongxinyoujiantoux"></view></view></block><view class="header-msg"><view class="header-box" style="{{('background-image: url('+shopInfo.backgroud_img+')')}}"><view class="shop-logo"><image src="{{shopInfo.logo}}" lazy-load="true"></image></view><view class="shop-msg"><view class="shop-name">{{shopInfo.name}}</view><block wx:if="{{shopInfo.pickup_name}}"><view class="foctory-name"><view class="iconfont icon-btn_shouyedingweix _i"></view><view class="_i">{{shopInfo.pickup_name}}</view></view></block><view class="affiche">{{shopInfo.desc}}</view></view><button class="share" open-type="share"><view class="iconfont icon-fenxiang- _i"></view></button></view></view><view class="all-goods"><scroll-view class="left" style="{{('height: '+viewHeight+'px;')}}" scroll-y="true" scroll-top="{{leftScrollTop}}" scroll-with-animation="true"><block wx:for="{{categoryInfo}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['classify '+(seletTag==item.id?'active':'')]}}" data-id="{{item.id}}" data-index="{{index}}" data-event-opts="{{[['tap',[['seletedCategory',['$event']]]]]}}" bindtap="__e"><block wx:if="{{item.type==2||item.type==1}}"><image class="icon-goods" lazy-load="true" src="{{item.icon}}"></image></block><view class="{{[item.type==2||item.type==1?'right-font':'']}}">{{item.name}}</view><block wx:if="{{item.in_cart_num>0}}"><view class="categoryMsg">{{item.in_cart_num}}</view></block></view></block></scroll-view><scroll-view class="right" style="{{('height: '+viewHeight+'px;')}}" scroll-y="true" scroll-top="{{rightScrollTop}}" lower-threshold="150" data-event-opts="{{[['scrolltolower',[['onReachBottom',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{categoryList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="goods" data-id="{{item.id}}" data-event-opts="{{[['tap',[['showProduct',['$event']]]]]}}" bindtap="__e"><view class="goods-img"><image src="{{item.original_img}}" lazy-load="true"></image></view><block wx:if="{{item.is_enough==0}}"><view class="goods-disble-img"><image lazy-load="true" src="{{iconURL+'/inequacy02.png'}}"></image></view></block><view class="goods-msg"><view class="goods-name">{{''+item.name+''}}</view><view class="goods_desc">{{''+item.goods_desc+''}}</view><view class="goods-price"><view class="_i">¥</view><text class="price-num">{{item.shop_price}}</text><block wx:if="{{item.shop_price!=item.market_price}}"><text class="market-price">{{"¥"+item.market_price}}</text></block></view><view class="cart-number-box" data-item="{{item}}" data-type="add" data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" catchtap="__e"><view class="{{['addcart_icon reduce '+(item.in_cart_num>0?'reduceShow':'')]}}" data-item="{{item}}" data-type="reduce" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont lh-44 _i">-</view></view><text class="{{[item.in_cart_num>0?'show':'']}}">{{item.in_cart_num}}</text><view class="addcart_icon add" data-item="{{item}}" data-type="add" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont icon-add lh-44 _i"></view></view></view></view></view></block><block wx:if="{{showBottomLoading}}"><loading-bottom vue-id="1" bind:__l="__l"></loading-bottom></block></scroll-view></view><view class="bottom-box"><view data-event-opts="{{[['tap',[['showShop',['$event']]]]]}}" class="{{['shop-logo '+(animationActive?'active':'')]}}" bindtap="__e"><view class="iconfont icon-btn_shangxianggouwuchex _i"></view><block wx:if="{{cartNum>0}}"><view class="tag">{{cartNum}}</view></block></view><view class="all-price"><block wx:if="{{shopInfo.is_close_shop==0&&cartTotals.total_price}}"><text class="p">{{"¥"+cartTotals.total_price}}</text></block><block wx:if="{{shopInfo.is_close_shop==0&&cartTotals.shipping_price&&cartTotals.shipping_text==''}}"><text class="i">{{"配送费：¥"+cartTotals.shipping_price}}</text></block><block wx:if="{{shopInfo.is_close_shop==0&&cartTotals.shipping_price&&cartTotals.shipping_text!=''}}"><text class="i">{{cartTotals.shipping_text}}</text></block><block wx:if="{{shopInfo.is_close_shop==1}}"><text class="t">{{shopInfo.close_desc}}</text></block></view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['buy-btn '+(btnDisplay?'no-buy-btn':'')]}}" bindtap="__e">{{''+btnText+''}}</view></view><block wx:if="{{animationActive}}"><view class="{{['cart-animation '+(animationActive?'active':'')]}}"><image src="{{cartAnimationImg}}" lazy-load="true"></image></view></block><block wx:if="{{showCountIcon}}"><view class="conpun-postion-box"><view data-event-opts="{{[['tap',[['getAssistanceCoupon',['$event']]]]]}}" class="conpun-postion-img" bindtap="__e"><image class="imgbox" lazy-load="true" src="{{iconURL+'/tackout-conpun-ad-imgbox.png'}}"></image></view></view></block></view><block wx:if="{{showModalStatus}}"><view data-event-opts="{{[['tap',[['showShop',['$event']]]]]}}" class="drawer_screen" catchtap="__e"></view></block><block wx:if="{{showModalStatus}}"><view class="shop-box" animation="{{animationData}}"><view class="box-title"><text class="sku-title">已选商品</text><block wx:if="{{cartList.length>0}}"><view data-event-opts="{{[['tap',[['onShopCartClean',['$event']]]]]}}" class="sku-title" bindtap="__e"><view class="iconfont icon-lajitong mr-10 _i"></view><view class="_i">清空</view></view></block></view><view class="cart-list-box"><block wx:for="{{cartList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cart-list"><view class="cart-msg"><view class="cart-name">{{item.goods_name}}</view><view class="cart-price"><view class="_i">¥</view>{{item.shop_price}}</view><view class="cart-number-box"><block wx:if="{{item.in_cart_num>0}}"><view class="addcart_icon reduce" data-item="{{item}}" data-type="reduce" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont lh-44 _i">-</view></view></block><block wx:if="{{item.in_cart_num>0}}"><text>{{item.in_cart_num}}</text></block><view class="addcart_icon add" data-item="{{item}}" data-type="add" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont icon-add lh-44 _i"></view></view></view></view></view></block></view><block wx:if="{{cartList.length==0}}"><view class="cart-no-list"><image lazy-load="true" src="{{iconURL+'/icon_cart_empty02.png'}}"></image><text>您还没有添加商品~</text></view></block></view></block><block wx:if="{{showProductModal}}"><view data-event-opts="{{[['tap',[['showProduct',['$event']]]]]}}" class="drawer_screen" catchtap="__e"></view></block><block wx:if="{{showProductModal}}"><view class="product-sku" animation="{{animationDatas}}"><swiper class="goods-product-img" indicator-dots="true" indicator-active-color="#ffe150"><block wx:for="{{gallery}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item><image class="slide-image" lazy-load="true" data-current="{{item.image_url}}" src="{{item.image_url}}"></image></swiper-item></block></swiper><view class="goods-product-title"><view class="goods-product-msg"><view class="goods-product-name">{{''+goodInfo.name+''}}</view><view class="goods_desc">{{''+goodInfo.goods_desc+''}}</view><view class="goods-product-price"><view class="_i">¥</view><text class="price-num">{{goodInfo.shop_price}}</text><block wx:if="{{goodInfo.shop_price!=goodInfo.market_price}}"><text class="market-price">{{"¥"+goodInfo.market_price}}</text></block></view></view><view class="cart-number-box"><block wx:if="{{goodInfo.in_cart_num>0}}"><view class="addcart_icon reduce" data-item="{{goodInfo}}" data-type="reduce" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont lh-44 _i">-</view></view></block><block wx:if="{{goodInfo.in_cart_num>0}}"><text>{{goodInfo.in_cart_num}}</text></block><view class="addcart_icon add" data-item="{{goodInfo}}" data-type="add" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont icon-add lh-44 _i"></view></view></view></view><view class="store-msg"><view class="address row"><image class="address-img" lazy-load="true" src="{{shopInfo.logo}}"></image><text class="address-name">{{shopInfo.name}}</text><view class="contact"><view data-event-opts="{{[['tap',[['makePhoneCall',['$event']]]]]}}" class="to-link" bindtap="__e"><image lazy-load="true" src="{{iconURL+'/phone_blue.png'}}"></image><text>联系商家</text></view></view></view></view><view data-event-opts="{{[['tap',[['showProduct',['$event']]]]]}}" class="iconfont closs icon-btn_guanbianniux" catchtap="__e"></view></view></block><block wx:if="{{showSearchModal}}"><view data-event-opts="{{[['tap',[['showSearch',['$event']]]]]}}" class="drawer_screen" catchtap="__e"></view></block><block wx:if="{{showSearchModal}}"><view class="search-modal" animation="{{animationSearch}}"><view class="header-bar">搜索结果</view><scroll-view class="search-list-box" scroll-y="true" lower-threshold="100" data-event-opts="{{[['scrolltolower',[['searchReachBottom',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{searchList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="goods" data-id="{{item.id}}" data-event-opts="{{[['tap',[['showProduct',['$event']]]]]}}" bindtap="__e"><view class="goods-img"><image lazy-load="true" src="{{item.original_img}}"></image></view><view class="goods-disble-img"><block wx:if="{{item.is_enough==0}}"><image lazy-load="true" src="{{iconURL+'/inequacy02.png'}}"></image></block></view><view class="goods-msg"><view class="goods-name">{{''+item.name+''}}</view><view class="goods-price"><view class="_i">¥</view><text class="price-num">{{item.shop_price}}</text><block wx:if="{{item.shop_price!=item.market_price}}"><text class="market-price">{{"¥"+item.market_price}}</text></block></view><view class="cart-number-box"><block wx:if="{{item.in_cart_num>0}}"><view class="addcart_icon reduce" data-item="{{item}}" data-type="reduce" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont lh-44 _i">-</view></view></block><block wx:if="{{item.in_cart_num>0}}"><text>{{item.in_cart_num}}</text></block><view class="addcart_icon add" data-item="{{item}}" data-type="add" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" catchtap="__e"><view class="iconfont icon-add lh-44 _i"></view></view></view></view></view></block></scroll-view><view data-event-opts="{{[['tap',[['showSearch',['$event']]]]]}}" class="iconfont closs icon-btn_guanbianniux" catchtap="__e"></view></view></block><block wx:if="{{showCountModel}}"><view class="drawer_screen"></view></block><block wx:if="{{showCountModel}}"><view class="conut-modal"><view class="{{['conut-modal-box '+(showCountModel?'show':'')]}}"><image lazy-load="true" mode="widthFix" src="{{shopCouponImg}}" data-event-opts="{{[['tap',[['getSpecialCoupon',['$event']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['hideConut',['$event']]]]]}}" class="iconfont closs icon-btn_guanbianniux" catchtap="__e"></view></view></view></block><block wx:if="{{showCouponPopup}}"><view class="Advertisement"><view class="AdvertisementAbs"><view class="AdimageBox"><image class="AdvertisementImg" mode="widthFix" src="{{couponPopupInfo.bk_img}}"></image><form class="AdvertisementOut-view" report-submit="true" data-event-opts="{{[['submit',[['hideCouponPopup',['$event']]]]]}}" bindsubmit="__e"><button class="AdvertisementOut" style="{{('background-image:url('+iconURL+'/btn-index-closs.png)')}}" formType="submit"></button></form></view><view class="coupon-box"><scroll-view class="coupon-box-scroll" scroll-y="true"><block wx:for="{{couponPopupInfo.lists}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="coupon-wrap" style="{{('background-image:url('+iconURL+'/img_qdhbyhqkp@2x.png)')}}"><view class="left"><text class="price1">¥</text><text class="price2">{{item.value}}</text></view><view class="right"><view class="text1 ellipsis">{{item.name}}</view><view class="text2 ellipsis">{{item.description}}</view><view class="text2" style="white-space:nowrap;">{{item.use_end_date}}</view></view></view></block></scroll-view><view class="shadow"></view></view></view></view></block></view>