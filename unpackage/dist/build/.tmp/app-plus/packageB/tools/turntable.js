(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageB/tools/turntable"],{"00fc":function(t,e,a){"use strict";a.r(e);var s=a("5d2a"),n=a("66d8");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("2b40");var o=a("2877"),r=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"2b40":function(t,e,a){"use strict";var s=a("93ef"),n=a.n(s);n.a},"5d2a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},"66d8":function(t,e,a){"use strict";a.r(e);var s=a("aa44"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},"93ef":function(t,e,a){},aa44:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=getApp().globalData,n=a("28c1"),i={data:function(){return{iconURL:s.dataBase.iconURL,circleList:[],awardList:[],colorCircleFirst:"#FFDF2F",colorCircleSecond:"#FE4D32",colorAwardDefault:"#F5F0FC",colorAwardSelect:"red",indexSelect:0,isRunning:!1,free:0,showRuleModalStatus:!1,showBonusModal:!1,imageAward:[],marquee:0,windowHeight:0,maxScroll:0,textScroll:32,points:0,needPoints:0,rules:{},prize:[],myPrize:[],page:1,page_size:5,animationData:""}},components:{},props:{},onLoad:function(){},onShow:function(){this.getPointsGameInfo(),this.getPublicAwardLog(),this.circleList()},methods:{getPointsGameInfo:function(){var t=this,e=s.getPath.getPointsGameInfo;n.ApiGateWayTest(e,"",!0,function(e){var a=e.data;if(1==a.success){t.imageAward=a.result.awardInfo;for(var s=[],i=25,o=25,r=0;r<8;r++){0==r?(i=25,o=25):r<3?(i=i,o=o+166.6666+15):r<5?(o=o,i=i+150+15):r<7?(o=o-166.6666-15,i=i):r<8&&(o=o,i=i-150-15);var l=t.imageAward[r].list_img;s.push({topAward:i,leftAward:o,imageAward:l})}t.setData({awardList:s,prize:t.prize,rules:a.result.rules,points:a.result.points,free:a.result.free,needPoints:a.result.need})}else n.toast(a.msg)})},getPublicAwardLog:function(){var t=this,e=s.getPath.getPublicAwardLog;n.ApiGateWayTest(e,"",!0,function(e){var a=e.data;1==a.success?(t.prize=a.result.logInfo.concat(a.result.logInfo),t.maxScroll=Number(a.result.logInfo.length)*t.textScroll,t.scrolltxt(),t.setData({prize:t.prize})):n.toast(a.msg)})},getAwordLog:function(){var t=this,e=s.getPath.getAwordLog,a={page:t.page,page_size:t.page_size};n.ApiGateWayTest(e,a,!0,function(e){var a=e.data;1==a.success&&a.result.logInfo.length>0?t.setData({myPrize:a.result.logInfo}):(n.toast("没有更多中奖信息了"),t.page=t.page-1)})},myPrizeUp:function(){this.page>1?(this.page=this.page-1,this.getAwordLog()):n.toast("已经是第一页了哇")},myPrizeDown:function(){this.page>=1&&(this.page=this.page+1,this.getAwordLog())},circleList:function(){for(var t=this,e=7.5,a=7.5,s=[],n=0;n<24;n++){if(0==n)a=15,e=15;else if(n<6)a=7.5,e+=102.5;else if(6==n)a=15,e=620;else if(n<12)a+=94,e=620;else if(12==n)a=565,e=620;else if(n<18)a=570,e-=102.5;else if(18==n)a=565,e=15;else{if(!(n<24))return;a-=94,e=7.5}s.push({topCircle:a,leftCircle:e})}t.setData({circleList:s}),setInterval(function(){"#FFDF2F"==t.colorCircleFirst?t.setData({colorCircleFirst:"#FE4D32",colorCircleSecond:"#FFDF2F"}):t.setData({colorCircleFirst:"#FFDF2F",colorCircleSecond:"#FE4D32"})},500)},startGame:function(t){if(n.formIdUpdate(t),!this.isRunning)if(this.points<this.needPoints&&0==this.free)n.showRidoModal("每次积分游戏消耗8积分，您当前积分不足~快去签到和购物获得积分吧~","确定");else{this.setData({isRunning:!0});var e=this,a=s.getPath.turnplateGame;n.ApiGateWayTest(a,"",!0,function(t){var a=t.data;if(1==a.success)var s=0,i=0,o=setInterval(function(){s++,i+=100,i>2e3&&s==a.result.award.id&&(s--,clearInterval(o),wx.showModal({title:"抽奖结果",content:a.result.award.name,showCancel:!1,success:function(t){t.confirm&&(e.setData({isRunning:!1}),e.getPointsGameInfo())}})),i>8e3&&(clearInterval(o),wx.showModal({title:"抽奖结果",content:"网络异常，奖品中奖信息请稍后在我的优惠券或者积分里面查看~",showCancel:!1,success:function(t){t.confirm&&(e.setData({isRunning:!1}),e.getPointsGameInfo())}})),s%=8,e.setData({indexSelect:s})},100+i);else n.toast(a.msg),e.setData({isRunning:!1})})}},scrolltxt:function(){var t=this,e=t,a=setInterval(function(){var s=e.marquee-1;s<0&&Math.abs(s)>e.maxScroll&&(s=e.windowHeight,clearInterval(a),t.scrolltxt()),t.setData({marquee:s})},80)},setRuleModalStatus:function(t){var e=wx.createAnimation({duration:300,timingFunction:"linear",delay:0});e.translateY(300).opacity(1).step(),this.setData({animationData:e.export()}),this.setData({showRuleModalStatus:!0}),setTimeout(function(){e.translateY("-150px").translateX("-50%").step(),this.setData({animationData:e}),0==t.currentTarget.dataset.status&&this.setData({showRuleModalStatus:!1})}.bind(this),200)},setModalBonus:function(){0==this.showBonusModal?(this.showBonusModal=1,this.getAwordLog()):this.showBonusModal=0;var t=wx.createAnimation({duration:300,timingFunction:"linear",delay:0});t.translateY(300).opacity(1).step(),this.setData({animationData:t.export()}),1==this.showBonusModal&&this.setData({showBonusModal:!0}),setTimeout(function(){t.translateY(0).step(),this.setData({animationData:t}),0==this.showBonusModal&&this.setData({showBonusModal:!1})}.bind(this),200)},setData:function(t){var e=this,a=[];Object.keys(t).forEach(function(s){a=s.split("."),t[s],e.$data,a.forEach(function(a,n){e[s]=t[s]})})}}};e.default=i}},[["394a","common/runtime","common/vendor"]]]);