(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageB/invitation-share/invitation-share"],{"07f4":function(t,e,i){"use strict";i.r(e);var n=i("ba39"),o=i("df35");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("f59f");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"30a1":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=getApp().globalData,o=i("28c1"),a={data:function(){return{iconURL:n.dataBase.iconURL,headerTitle:"邀请好友成功下单可再开启现金红包",maxRedEnvelopes:"3",invitationRecord:{},swiperNotice:[],swiperCurrent:0,csInviteList:{},red_packet_id:0,showRedEnvel:!1,sclType:1,shareInfoInvite:{fromButton:"envelopes"},shareInfoUrge:{fromButton:"notice"},guideIsShow:!1,guideIsShowBtn:!0,invite_list:[],invite_list_urge:[],swiperNoticeTime:"",swiperNoticeTimeout:"",redLogShow:!1,redActivityShow:!1,popupShow:!1,redLogList:[],rule_img:"",promptStatus:!1,shareInfo:{fromButton:"envelopes"}}},components:{},props:{},onLoad:function(t){this.sclType=t.type;var e=o.getStorageSync("entry_share_info");this.setData({rule_img:e.rule_img}),wx.showShareMenu({withShareTicket:!0}),this.getCsTopNotice()},onShow:function(){this.getCsInviteList()},onHide:function(){var t=o.getStorageSync("promptStatus");t&&this.setData({guideIsShowBtn:!1})},onUnload:function(){clearTimeout(this.swiperNoticeTime),clearTimeout(this.swiperNoticeTimeout)},onShareAppMessage:function(t){var e=this,i=o.getStorageSync("getpickup"),n=o.getStorageSync("entry_share_info");if(t.target&&t.target.dataset.shareinfo){var a=t.target.dataset.shareinfo;return a&&"envelopes"==a.fromButton?setTimeout(function(){e.setData({popupShow:!0})},2e3):setTimeout(function(){e.setData({popupShow:!0})},1e3),a&&"notice"==a.fromButton?{title:n.urge_share_text,path:"/pages/index/index?pickup_id="+i.pickup_id+"&user_id="+n.user_id,imageUrl:n.urge_share_img}:(a&&a.fromButton,{title:n.invite_share_text,path:"/pages/index/index?pickup_id="+i.pickup_id+"&user_id="+n.user_id,imageUrl:n.invite_share_img})}return{title:n.invite_share_text,path:"/pages/index/index?pickup_id="+i.pickup_id+"&user_id="+n.user_id,imageUrl:n.invite_share_img}},methods:{getCsTopNotice:function(){var t=this,e=n.getPath.csTopNotice;this.setData({swiperNotice:[]}),t.swiperNoticeTime=setTimeout(function(){o.ApiCoordination(e,"",!0,function(e){var i=e.data;i.result&&(1==i.result.length&&(t.swiperNoticeTimeout=setTimeout(function(){t.getCsTopNotice()},3e3)),t.setData({swiperNotice:i.result,swiperCurrent:0}))})},3e3)},swiperBindchange:function(t){var e=this,i=t.detail.current;i+1==this.swiperNotice.length&&setTimeout(function(){e.getCsTopNotice()},3e3)},getCsInviteList:function(){var t=this,e=n.getPath.csInviteList;o.ApiCoordination(e,"",!0,function(e){var i=e.data;if(1==i.success){var n=i.result.invite_list.filter(function(t){return 2==t.status}),o=i.result.invite_list.filter(function(t){return 2!=t.status});t.setData({csInviteList:i.result,invite_list:n,invite_list_urge:o,rule_img:i.result.rule_img}),2==t.sclType&&wx.pageScrollTo({selector:"#invitation"})}})},getEnvelopes:function(t){var e=t.currentTarget.dataset.rid;this.setData({red_packet_id:e,showRedEnvel:!0})},getCsClickKnow:function(t){var e=this,i=t.currentTarget.dataset.id,a=n.getPath.csClickKnow,s={id:i};o.ApiCoordination(a,s,!0,function(t){var n=t.data;n.result.success?(e.invite_list_urge=e.invite_list_urge.filter(function(t){return t.id!=i}),e.setData({invite_list_urge:e.invite_list_urge})):o.toast(n.msg)})},showShareGuide:function(e){console.log(t("点击开按钮提示"," at packageB\\invitation-share\\invitation-share.vue:405")),console.log(t(this.guideIsShow," at packageB\\invitation-share\\invitation-share.vue:406")),o.formIdUpdate(e),this.setData({guideIsShow:!0}),console.log(t(this.guideIsShow," at packageB\\invitation-share\\invitation-share.vue:411"))},invitationShare:function(){o.getStorageSync("getpickup")},urgingReport:function(t){o.formIdUpdate(t);var e=o.getStorageSync("getpickup");n.aldstat.sendEvent("invitation_urging_report",{"提货点":e.cityName})},getCslist:function(){var t=this,e=n.getPath.cslist;o.ApiCoordination(e,"",!0,function(e){var i=e.data;1==i.success?t.setData({redLogList:i.result,redLogShow:!0}):o.toast(i.msg)})},hideRedLog:function(){this.setData({redLogShow:!1})},hideRedActivity:function(){this.setData({redActivityShow:!1})},showActivityModel:function(){this.setData({redActivityShow:!0})},hidePopup:function(){console.log(t(this.guideIsShow," at packageB\\invitation-share\\invitation-share.vue:475")),this.setData({popupShow:!1}),console.log(t(this.guideIsShow," at packageB\\invitation-share\\invitation-share.vue:480"))},goHome:function(){wx.switchTab({url:"/pages/index/index"})},bindtouchmove:function(){return!1},setPrompt:function(){var t=this;o.getStorageSync("getpickup");t.setData({promptStatus:!t.promptStatus}),o.setStorageSync("promptStatus",t.promptStatus)},goShare:function(t){var e=this;o.formIdUpdate(t);o.getStorageSync("getpickup");setTimeout(function(){e.setData({guideIsShow:!1})},1e3)},hide:function(){this.setData({guideIsShow:!1})},setData:function(t){var e=this,i=[];Object.keys(t).forEach(function(n){i=n.split("."),t[n],e.$data,i.forEach(function(i,o){e[n]=t[n]})})}}};e.default=a}).call(this,i("0de9")["default"])},a22c:function(t,e,i){},ba39:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},df35:function(t,e,i){"use strict";i.r(e);var n=i("30a1"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},f59f:function(t,e,i){"use strict";var n=i("a22c"),o=i.n(n);o.a}},[["2ccb","common/runtime","common/vendor"]]]);