(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/couponCenter/couponCenter"],{"17cf":function(t,e,n){"use strict";var a=n("e75b"),i=n.n(a);i.a},"47e8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"67f0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp().globalData,i=n("28c1"),o={data:function(){return{iconURL:a.dataBase.iconURL,lists:[],share_info:{},isShowGoHome:!1,entryData:""}},components:{},props:{},onLoad:function(t){var e=this;this.getallcouponlist(),t&&t.entryType&&"external"==t.entryType?this.setData({isShowGoHome:!1}):this.setData({isShowGoHome:!0}),this.setData({entryData:t});t=e.entryData;var n=i.getStorageSync("getpickup");t&&(t.atitude||t.pickup_id)&&!n&&e.getExternal(t.pickup_id).then(function(){a.firstlaunchApp=!1,e.entryData={},i.setStorageSync("authSetting",{"scope.userLocation":!0})})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){var t=this,e=i.getStorageSync("getpickup");return{title:t.share_info.share_title,path:"/pages/couponCenter/couponCenter?pickup_id="+e.pickup_id,imageUrl:t.share_info.share_img,success:function(t){i.toast("分享成功")},fail:function(t){i.toast("分享失败")}}},methods:{getExternal:function(t){var e=a.getPath.getpickup,n={pickup_id:t};return new Promise(function(t,a){i.ApiGateWayTest(e,n,!0,function(e){if(e&&e.data&&1==e.data.success){e=e.data.result.cities.pick_up;i.setStorage({key:"city",data:{pickup_id:e.pickup_id,warehouse_id:e.warehouse_id,cityName:e.city_name,is_pick_up:1}}),i.setStorage({key:"getpickup",data:{pickup_id:e.pickup_id,cityName:e.pickup_name,pickup_address:e.pickup_address,pickup_contact:e.pickup_contact,pickup_phone:e.pickup_phone,pickup_type:e.pickup_type}},function(e){t("获取id成功")})}})})},gotoHome:function(){wx.switchTab({url:"/pages/index/index"})},getallcouponlist:function(){var t=this,e=a.getPath.getallcouponlist;i.ApiGateWayTest(e,"",!0,function(e){if(e&&e.data&&1==e.data.success){var n=e.data.result;t.setData({lists:n.lists,share_info:n.share_info})}})},addCoupon:function(t){var e=this,n=i.getStorageSync("isOldUser");if(!a.checkSessionKey||2==n)return i.goRegister(),!1;var o=a.getPath.addCoupon,c=(e.lists,{coupon_id:t.currentTarget.dataset.id});i.ApiGateWayTest(o,c,!0,function(t){if(t&&t.data&&1==t.data.success){var n=t.data.result;i.toast(n.state_desc),e.getallcouponlist()}})},setData:function(t){var e=this,n=[];Object.keys(t).forEach(function(a){n=a.split("."),t[a],e.$data,n.forEach(function(n,i){e[a]=t[a]})})}}};e.default=o},"82de":function(t,e,n){"use strict";n.r(e);var a=n("67f0"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},b76b:function(t,e,n){"use strict";n.r(e);var a=n("47e8"),i=n("82de");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("17cf");var c=n("2877"),u=Object(c["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=u.exports},e75b:function(t,e,n){}},[["5f53","common/runtime","common/vendor"]]]);