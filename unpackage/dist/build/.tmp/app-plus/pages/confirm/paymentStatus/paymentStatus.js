(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/confirm/paymentStatus/paymentStatus"],{"2c29":function(t,e,a){},"552b":function(t,e,a){"use strict";a.r(e);var n=a("e040"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"5a73":function(t,e,a){"use strict";a.r(e);var n=a("610f"),i=a("552b");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("aee3");var r=a("2877"),s=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"610f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},aee3:function(t,e,a){"use strict";var n=a("2c29"),i=a.n(n);i.a},e040:function(t,e,a){"use strict";function n(t){return r(t)||o(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=getApp().globalData,c=a("28c1"),d=function(){return a.e("components/goodList/goodList").then(a.bind(null,"bc0e"))},u={data:function(){return{iconURL:s.dataBase.iconURL,refresh:!0,page:1,recommend_good_list:[],showNewCouponModalStatus:!1,newCouponImg:"",duration:500,interval:5e3,indexAdcurrent:0,indicatorColor:"#fff",indicatorActiveColor:"#eb3c39",circular:!0,autoplay:!1,adList:[],indicatorDots:!1,showRedEnvel:!1,showRedEnvelType:1,red_packet_id:0,order_id:"",payment_code:"",msg:"",success:"",animationData:""}},components:{goodlist:d},props:{},onLoad:function(t){if(void 0!=t){wx.showShareMenu({withShareTicket:!0});var e=this;e.setData({order_id:t.order_id,payment_code:t.payment_code}),e.getcheckPay(),this.getAd()}else c.toast("请求参数错误")},onShow:function(){this.getRecommendGoodList()},onReachBottom:function(t){this.refresh&&(this.setData({page:this.page+1}),this.getRecommendGoodList())},onShareAppMessage:function(t){var e=c.getStorageSync("getpickup"),a=c.getStorageSync("entry_share_info");if(t.target&&t.target.dataset.shareinfo){var n=t.target.dataset.shareinfo;return n&&"notice"==n.fromButton?{title:a.urge_share_text,path:"/pages/index/index?pickup_id="+e.pickup_id+"&user_id="+a.user_id,imageUrl:a.urge_share_img}:n&&"envelopes"==n.fromButton?{title:a.invite_share_text,path:"/pages/index/index?pickup_id="+e.pickup_id+"&user_id="+a.user_id,imageUrl:a.invite_share_img}:{title:a.invite_share_text,path:"/pages/index/index?pickup_id="+e.pickup_id,imageUrl:a.invite_share_img}}return{title:a.invite_share_text,path:"/pages/index/index?pickup_id="+e.pickup_id,imageUrl:a.invite_share_img}},methods:{getcheckPay:function(){var t=this,e=s.getPath.checkPay,a=(s.getPath.paySuccessCoupon,{order_id:t.order_id,payment_code:t.payment_code});c.ApiGateWayTest(e,a,!0,function(e){1==e.data.success?(t.setData({msg:e.data.msg,success:e.data.success}),e.data.result.couponInfo.list_img&&"[object Object]"===Object.prototype.toString.call(e.data.result.couponInfo)&&(t.showNewCouponModalStatus(),t.setData({newCouponImg:e.data.result.couponInfo.list_img})),t.getSendRpAfterOrder()):t.setData({msg:e.data.msg,success:e.data.success})})},goOrderList:function(){wx.redirectTo({url:"../../../packageA/user/dingdan?entryType=external&currentTab=0"})},goOrderDetail:function(){var t=this;wx.redirectTo({url:"../../../packageA/user/detail?orderId="+t.order_id})},goHome:function(){wx.switchTab({url:"/pages/index/index"})},onPay:function(){var t=this,e=s.getPath.doPay,a={order_id:t.order_id,payment_code:t.payment_code};c.ApiGateWayTest(e,a,!0,function(e){if(1==e.data.success){var a=e.data.result;c.doWechatPay(a,function(e){t.getcheckPay()},function(t){})}})},showNewCouponModalStatus:function(t){var e=wx.createAnimation({duration:300,timingFunction:"linear",delay:0});this.setData({animationData:e.export()}),this.setData({showNewCouponModalStatus:!0}),setTimeout(function(){e.translateY("-100px").translateX("-50%").opacity(1).step(),this.setData({animationData:e})}.bind(this),200)},hideNewCouponModalStatus:function(t){c.formIdUpdate(t),this.setData({showNewCouponModalStatus:!1})},goCouponList:function(t){wx.redirectTo({url:"../../../pages/coupon/coupon?entryType=external"})},getRecommendGoodList:function(){var t=this,e=s.getPath.highSaleGoods,a=10,i={page:this.page,page_size:a};c.ApiGateWayTest(e,i,!0,function(e){e=e.data;1==e.success&&(t.setData({recommend_good_list:[].concat(n(t.recommend_good_list),n(e.result.products))}),e.result.products.length<a?t.refreshFun(!1):t.refreshFun(!0))})},getAd:function(){var t=this,e=s.getPath.adlist,a={pid:7};return new Promise(function(n,i){c.ApiGateWayTest(e,a,!0,function(e){if(e&&e.data&&1==e.data.success){var a=e.data.result;a.length>1?t.setData({indicatorDots:!0}):t.setData({indicatorDots:!1}),t.setData({adList:a,indexAdcurrent:0,indicatorDots:a.length>1}),n("successAd")}})})},adclose:function(t,e){var a=s.getPath.adclose,n={ad_id:t,is_close:e};c.ApiGateWayTest(a,n,!0,function(t){})},goWebView:function(t){c.goAdWebView(t)},refreshFun:function(t){this.setData({refresh:t})},getSendRpAfterOrder:function(){var t=this,e=s.getPath.sendRpAfterOrder,a={order_id:t.order_id};c.ApiGateWayTest(e,a,!0,function(e){var a=e.data;if(1==a.success){var n={user_id:a.result.user_id,invite_share_img:a.result.invite_share_img,invite_share_text:a.result.invite_share_text,urge_share_img:a.result.urge_share_img,urge_share_text:a.result.urge_share_text};c.setStorageSync("entry_share_info",n),a.result.is_send?t.setData({showRedEnvel:!0,showRedEnvelType:1,red_packet_id:a.result.red_packet_id}):t.setData({showRedEnvel:!0,showRedEnvelType:2})}else c.toast(a.msg)})},setData:function(t){var e=this,a=[];Object.keys(t).forEach(function(n){a=n.split("."),t[n],e.$data,a.forEach(function(a,i){e[n]=t[n]})})}}};e.default=u}},[["a900","common/runtime","common/vendor"]]]);