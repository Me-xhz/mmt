(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/projectPage/projectPage"],{"03a4":function(t,e,a){},"1ec3":function(t,e,a){"use strict";a.r(e);var o=a("5289"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=i.a},3514:function(t,e,a){"use strict";a.r(e);var o=a("4cf9"),i=a("1ec3");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("eb6f");var c=a("2877"),s=Object(c["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},"4cf9":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i})},5289:function(t,e,a){"use strict";(function(t){function o(t){return c(t)||n(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=getApp().globalData,u=a("28c1"),r=function(){return a.e("components/goodList/goodList").then(a.bind(null,"bc0e"))},p=function(){return a.e("components/loadingBottom/loadingBottom").then(a.bind(null,"e834"))},g={data:function(){return{iconURL:s.dataBase.iconURL,page:1,page_size:10,total:0,lists:[],isShowGoHome:!1,checkShowBottom:!1,checkBottomLoading:!1,entryData:"",head_info:"",type:""}},components:{goodList:r,loadingBottom:p},props:{},onLoad:function(e){console.log(t(e," at pages\\projectPage\\projectPage.vue:66")),this.setData(e),e&&e.entryType&&"external"==e.entryType?this.setData({isShowGoHome:!1}):this.setData({isShowGoHome:!0});var a=this;this.setData({entryData:e});e=a.entryData;var o=u.getStorageSync("getpickup");e&&(e.atitude||e.pickup_id)&&!o?a.getExternal(e.pickup_id).then(function(){s.firstlaunchApp=!1,a.entryData={},u.setStorageSync("authSetting",{"scope.userLocation":!0}),5==a.type?(a.getAcInfo(),a.getAcgoods()):(a.getSubjectInfo(),a.getSubjectgoods())}):5==a.type?(a.getAcInfo(),a.getAcgoods()):(a.getSubjectInfo(),a.getSubjectgoods())},onReachBottom:function(){var t=this;t.lists&&t.total>t.lists.length&&(t.setData({page:t.page+1,checkBottomLoading:!0}),t.getSubjectgoods())},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onShareAppMessage:function(){var t=this,e=u.getStorageSync("getpickup");return{title:t.head_info.share_title,path:"/pages/projectPage/projectPage?type="+t.type+"&id="+t.id+"&pickup_id="+e.pickup_id,imageUrl:t.head_info.share_img,success:function(t){u.toast("分享成功")},fail:function(t){u.toast("分享失败")}}},methods:{getExternal:function(e){var a=s.getPath.getpickup,o={pickup_id:e};return new Promise(function(e,i){u.ApiGateWayTest(a,o,!0,function(a){if(a&&a.data&&1==a.data.success){console.log(t(a.data.result.cities.pick_up," at pages\\projectPage\\projectPage.vue:186"));a=a.data.result.cities.pick_up;u.setStorage({key:"city",data:{pickup_id:a.pickup_id,warehouse_id:a.warehouse_id,cityName:a.city_name,is_pick_up:1}}),u.setStorage({key:"getpickup",data:{pickup_id:a.pickup_id,cityName:a.pickup_name,pickup_address:a.pickup_address,pickup_contact:a.pickup_contact,pickup_phone:a.pickup_phone,pickup_type:a.pickup_type}},function(t){e("获取id成功")})}})})},getAcInfo:function(){var t=this,e=s.getPath.activitydetail,a={activity_id:t.id};u.ApiGateWayTest(e,a,!0,function(e){e=e.data;1==e.success&&(t.setData({head_info:e.result.data}),wx.setNavigationBarTitle({title:e.result.data.name}))})},getAcgoods:function(){var t=this,e=s.getPath.activitygoodslist,a={activity_id:t.id,page:t.page,page_size:t.page_size};u.ApiGateWayTest(e,a,!0,function(e){if(1==e.data.success){var a=e.data.result;t.setData({lists:[].concat(o(t.lists),o(a.lists)),total:a.total})}})},getSubjectInfo:function(){var t=this,e=s.getPath.subjectInfo,a={subject_id:t.id};u.ApiGateWayTest(e,a,!0,function(e){e=e.data;1==e.success&&(t.setData({head_info:e.result}),wx.setNavigationBarTitle({title:e.result.name}))})},getSubjectgoods:function(){var e=this,a=s.getPath.subjectgoods,i={subject_id:e.id,page:e.page,page_size:e.page_size};u.ApiGateWayTest(a,i,!0,function(a){if(console.log(t("res",a," at pages\\projectPage\\projectPage.vue:291")),1==a.data.success){var i=a.data.result;console.log(t(i," at pages\\projectPage\\projectPage.vue:294")),i.lists.length<e.page_size&&e.setData({checkShowBottom:!0}),e.setData({checkBottomLoading:!1,lists:[].concat(o(e.lists),o(i.lists)),total:i.total}),console.log(t(e.lists," at pages\\projectPage\\projectPage.vue:307"))}})},gotoHome:function(){wx.switchTab({url:"/pages/index/index"})},setData:function(t){var e=this,a=[];Object.keys(t).forEach(function(o){a=o.split("."),t[o],e.$data,a.forEach(function(a,i){e[o]=t[o]})})}}};e.default=g}).call(this,a("0de9")["default"])},eb6f:function(t,e,a){"use strict";var o=a("03a4"),i=a.n(o);i.a}},[["8ba2","common/runtime","common/vendor"]]]);