(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["packageA/takeout-order/check-takeout-order"],{

/***/ 602:
/*!*****************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./check-takeout-order.vue?vue&type=template&id=674b85a0& */ 603);
/* harmony import */ var _check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./check-takeout-order.vue?vue&type=script&lang=js& */ 605);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./check-takeout-order.vue?vue&type=style&index=0&lang=css& */ 607);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 15);






/* normalize component */

var component = Object(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__["render"],
  _check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 603:
/*!************************************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=template&id=674b85a0& ***!
  \************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./check-takeout-order.vue?vue&type=template&id=674b85a0& */ 604);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_template_id_674b85a0___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 604:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=template&id=674b85a0& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (!_vm._isMounted) {
    _vm.e0 = function($event) {
      $event.stopPropagation()
      _vm.showChooseTag ? "changeChooseTag" : ""
    }

    _vm.e1 = function($event) {
      _vm.selectedGoods.is_in_shipping_time == 0 ? "showWindow" : ""
    }
  }
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 605:
/*!******************************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./check-takeout-order.vue?vue&type=script&lang=js& */ 606);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 606:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var app = getApp().globalData;
var common = __webpack_require__(/*! ../../utils/common.js */ 28);var _default =

{
  data: function data() {
    return {
      iconURL: app.dataBase.iconURL,
      showDialog: false,
      order_confirm_show: false,
      selectedGoods: {},
      // 闪送地址
      consignee: {
        consignee: "" },

      isTopaydis: false,
      //商品信息
      productInfo: {},
      // 后台筛选返回后商品信息
      order_info: {},
      orderSn: "",
      //发票信息
      invoiceData: {},
      //地址
      cashgift: {},
      address_extra: '',
      //去支付默认
      canPurchase: false,
      // 优惠券展示
      showBonusModal: false,
      tip_show: {
        tip1: true,
        tip2: true },

      // 是否从缓存里读取地址
      storageAddr: false,
      // 是否需要修改地址
      isEditAddr: false,
      message: '',
      iphoneXBottom: '0rpx',
      shop_id: 0,
      address_tag: [],
      tag_num: -1,
      label_id: 0,
      label_name: "",
      has_shop: '',
      showOrderWindow: false,
      orderTimeId: 0,
      orderTimeText: {},
      title_text: [],
      timeOrderCheck: true,
      checkShowOrder: false,
      showChooseTag: false,
      checkChoose: false,
      coupon_id: "",
      cashgifts: "",
      animationData: "",
      user_note: "" };

  },

  components: {},
  props: {},
  onLoad: function onLoad(options) {
    var that = this;
    that.shop_id = options.shop_id;
    wx.getSystemInfo({
      success: function success(res) {
        var model = res.model;

        if (model.search('iPhone X') != -1) {
          that.setData({
            iphoneXBottom: '68rpx' });

        }
      } });

    this.checkUser();
    // app.aldstat.sendEvent("进入闪购确认订单");
  },
  onShow: function onShow() {
    var that = this;
    this.tag_num = -1;
    this.label_id = 0;
    Promise.all([that.getaddresslist(), that.getOrderCouponList()]).then(function (val) {
      that.getcheckOrderinfo();
    });
  },
  methods: {
    // 判断用户是否为黑名单
    checkUser: function checkUser() {
      var that = this;
      var uri = app.getPath.checkUser;
      common.ApiGateWayTest(uri, '', true, function (res) {
        if (res.data.success == 1) {
          return;
        } else {
          wx.showModal({
            title: '用户禁用下单提示',
            content: res.data.msg,
            confirmText: '确定',
            confirmColor: '#eb3c39',
            showCancel: false,
            cancelColor: '#030303',

            success: function success(res) {
              if (res.confirm) {
                wx.navigateBack({
                  delta: 1 });

              }
            } });


        }
      });
    },
    // 提示显示隐藏
    isShow: function isShow(e) {
      var name = e.currentTarget.dataset.name;
      var tip_show = this.tip_show;
      tip_show[name] = false;
      this.setData({
        tip_show: tip_show });

    },
    // 获取地理位置
    getaddresslist: function getaddresslist() {
      var that = this;
      var addressUri = app.getPath.getaddresslist;
      var addressData = {
        is_default: '1' // 地理位置请求
      };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(addressUri, addressData, true, function (res) {
          if (res.statusCode == 200) {
            var res = res.data.result.consignees;

            if (that.consignee && that.consignee.address_id) {
              that.setData({
                consignee: that.consignee,
                storageAddr: false });

              that.getAddressTag();
            } else {
              if (res.length > 0) {
                that.setData({
                  consignee: res[0],
                  storageAddr: false });

                that.getAddressTag();
              } else {
                // 无地址时，取缓存自提点地址
                common.getStorage({
                  key: 'getpickup' },
                function (res) {
                  if (res.data.pickup_id && res.data.pickup_id > 0) {
                    that.setData({
                      consignee: res.data,
                      storageAddr: true });

                    that.getAddressTag();
                  }
                });
                resolve('无地址');
                return;
              }
            }

            resolve('getAddress success');
          }
        });
      });
    },
    // 新增收货地址
    addAddress: function addAddress(callback) {
      var that = this;
      var reg = /^[0-9]{11}$/;

      if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
        common.toast('请输入提货人姓名');
        return;
      }

      if (!reg.test(this.consignee.mobile)) {
        common.toast('请输入正确的手机号');
        return;
      }

      ;

      if (this.consignee.address_extra == "" && that.has_shop == 1) {
        common.toast('请输入闪送地址');
        return;
      }

      ;

      if (that.address_tag.length > 0 && that.has_shop == 1) {
        if (that.label_id == 0) {
          common.toast('请选择闪送地址');
          return;
        }

        ;
      }

      var uri = app.getPath.addaddress;
      var data = {
        consignee: that.consignee.consignee,
        mobile: that.consignee.mobile,
        pickup_id: that.consignee.pickup_id,
        address_extra: that.consignee.address_extra,
        is_default: 1,
        pick_up_label_id: that.label_id };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res && res.data.success == 1) {
          var res = res.data.result;
          that.setData({
            consignee: res.consignees });

          callback && typeof callback === "function" && callback();
        }
      });
    },
    // 修改收货地址
    editAddress: function editAddress(callback) {
      var that = this;
      var reg = /^[0-9]{11}$/;

      if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
        common.toast('请输入提货人姓名');
        return;
      }

      if (!reg.test(this.consignee.mobile)) {
        common.toast('请输入正确的手机号');
        return;
      }

      ;

      if (this.consignee.address_extra == "" && that.has_shop == 1) {
        common.toast('请输入闪送地址');
        return;
      }

      ;

      if (that.address_tag.length > 0 && that.has_shop == 1) {
        if (that.label_id == 0) {
          common.toast('请选择闪送地址');
          return;
        }

        ;
      }

      that.isEditAddr = false;
      var uri = app.getPath.alteraddress;
      var data = {
        consignee: that.consignee.consignee,
        mobile: that.consignee.mobile,
        address_id: that.consignee.address_id,
        pickup_id: that.consignee.pickup_id,
        address_extra: that.consignee.address_extra,
        is_default: that.consignee.is_default,
        pick_up_label_id: that.label_id };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res && res.data.success == 1) {
          var res = res.data.result;
          that.getAddressTag();
          callback && typeof callback === "function" && callback();
        }
      });
    },
    // 输入框双向绑定
    editInput: function editInput(e) {
      var keyName = e.target.dataset.keyname;
      var val = e.detail.value;
      var consignee = this.consignee;
      consignee[keyName] = val;
      this.isEditAddr = true;
      this.setData({
        consignee: consignee });

    },
    // 获取信息接口
    getcheckOrderinfo: function getcheckOrderinfo() {
      var that = this; // 当前仓库

      var city = common.getStorageSync('city');
      var uri = app.getPath.shopCheckOrderInfo;

      if (that.coupon_id == undefined) {
        that.coupon_id = 0; // that.data.coupon_id = that.data.cashgift.id;
      }

      if (that.selectedGoods.use_balance == undefined) {
        that.selectedGoods.use_balance = 0;
      }

      if (that.consignee.address_id == undefined) {
        that.consignee.address_id = 0;
      } // 确认订单接口提交数据


      var data = {
        coupon_id: that.coupon_id,
        address_id: that.consignee.address_id,
        use_balance: that.selectedGoods.use_balance,
        shop_id: that.shop_id };
      // 获取确认订单信息

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.statusCode == 200) {
            var res = res.data.result;
            that.setData({
              selectedGoods: res,
              cashgift: res.coupon_info,
              coupon_id: res.coupon_info.id,
              order_info: res.order_info });


            if (res.is_in_shipping_time === 0) {
              if (!that.checkShowOrder) {
                var time = common.getStorageSync('tackoutOrderTime');
                var timeFilter = res.shipping_time.filter(function (item) {
                  return item.shopping_time_text == time.shopping_time_text;
                });

                if (timeFilter.length > 0) {
                  that.setData({
                    showOrderWindow: true,
                    orderTimeId: timeFilter[0].shop_shipping_time_id,
                    orderTimeText: timeFilter[0],
                    title_text: res.is_in_shipping_time_text.split('，') });

                } else {
                  common.setStorageSync('tackoutOrderTime', res.shipping_time[0]);
                  that.setData({
                    showOrderWindow: true,
                    orderTimeId: res.shipping_time[0].shop_shipping_time_id,
                    orderTimeText: res.shipping_time[0],
                    title_text: res.is_in_shipping_time_text.split('，') });

                }

                that.checkShowOrder = true;
              }
            } // if (res.is_in_shipping_time == 0){
            //   common.showRidoModal(res.is_in_shipping_time_text,'确定',function(res){
            //     return;
            //   })
            // }

          }

          var btn = true;
          var order_info = that.order_info; // that.data.consignee && that.data.consignee.address_id

          if (btn) {
            that.setData({
              canPurchase: true });

          } else {
            that.setData({
              canPurchase: false });

            wx.showModal({
              content: '商品被抢光咯，小提正在补货中喔~',
              showCancel: false,
              confirmText: '取消',
              confirmColor: '#575757' });

          }

          resolve('getcheckOrderinfo success');
        });
      });
    },
    // 地址选择
    touchAddress: function touchAddress() {
      var that = this;
      wx.navigateTo({
        url: '/pages/address/addressList/addressList?from=flashConfirm' });

    },
    // 新增地址
    newAddress: function newAddress() {
      var that = this;
      wx.navigateTo({
        url: '/pages/address/address' });

    },
    // 优惠券选择
    touchCashgift: function touchCashgift(e) {
      var that = this;
      var id = e.currentTarget.dataset.id;

      if (that.coupon_id == id) {
        that.setModalBonus();
        return false;
      } else {
        that.coupon_id = id;
        that.getcheckOrderinfo();
      }

      that.setModalBonus();
    },
    // 优惠券列表信息
    getOrderCouponList: function getOrderCouponList() {
      var that = this;
      var uri = app.getPath.shopOrderCouponList;
      var data = {
        shop_id: that.shop_id };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.data.errorCode != 1) {
            var res = res.data.result;
            that.setData({
              cashgifts: res.lists });

            resolve('getOrderCouponList');
          } else {
            common.toast(res.data.msg);
          }
        });
      });
    },
    //发票
    // touchInvoice: function () {
    //   var newData;
    //   if (this.data.invoiceData) {
    //     newData = JSON.stringify(this.data.invoiceData)
    //   } else {
    //     newData = undefined;
    //   }
    //   wx.navigateTo({
    //     url: './invoice/invoice?invoiceData=' + newData
    //   })
    // },
    // 从外部二维码扫码，带经纬度和外部标识external
    getExternal: function getExternal(pickup_id) {
      var that = this;
      var uri = app.getPath.getpickup;
      var data = {
        pickup_id: pickup_id };

      return new Promise(function (resolve, reject) {
        // 获取提货点
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res && res.data && res.data.success == 1) {
            var res = res.data.result.cities.pick_up;
            common.setStorage({
              key: 'city',
              data: {
                'pickup_id': res.pickup_id,
                'warehouse_id': res.warehouse_id,
                'cityName': res.city_name,
                'is_pick_up': 1 } });


            common.setStorage({
              key: 'getpickup',
              data: {
                'pickup_id': res.pickup_id,
                'cityName': res.pickup_name,
                'pickup_address': res.pickup_address,
                'pickup_contact': res.pickup_contact,
                'pickup_phone': res.pickup_phone,
                'pickup_type': res.pickup_type } },

            function (res) {
              resolve('获取id成功');
            });
          }
        });
      });
    },
    // 领券弹窗
    setModalBonus: function setModalBonus() {
      if (this.showBonusModal == 0) {
        this.showBonusModal = 1;
      } else {
        this.showBonusModal = 0;
      }

      var animation = wx.createAnimation({
        duration: 300,
        timingFunction: "linear",
        delay: 0 });

      animation.translateY(300).opacity(1).step();
      this.setData({
        animationData: animation.export() });


      if (this.showBonusModal == 1) {
        this.setData({
          showBonusModal: true });

      }

      setTimeout(function () {
        animation.translateY(0).step();
        this.setData({
          animationData: animation });


        if (this.showBonusModal == 0) {
          this.setData({
            showBonusModal: false });

        }
      }.bind(this), 200);
    },
    refreshOrderPrice: function refreshOrderPrice() {},
    // 留言
    refreshComment: function refreshComment(event) {
      var value = event.detail.value;
      this.setData({
        user_note: value });

    },
    // 显示支付弹窗
    showConfirm: function showConfirm(e) {
      var that = this;
      common.getStorage({
        key: 'getpickup' },
      function (res) {
        if (res.data.pickup_id && res.data.pickup_id > 0) {
          var reg = /^[0-9]{11}$/;

          if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
            common.toast('请输入提货人姓名');
            return;
          }

          if (!reg.test(that.consignee.mobile)) {
            common.toast('请输入正确的手机号');
            return;
          }

          ;

          if (that.consignee.address_extra == '' && that.has_shop == 1) {
            common.toast('请输入闪送地址');
            return;
          }

          ;

          if (that.address_tag.length > 0 && that.has_shop == 1) {
            if (that.label_id == 0) {
              common.toast('请选择闪送地址');
              return;
            }

            ;
          }

          that.beforeSubmit();
        } else {
          that.touchSubmit(e);
        }
      });
    },
    // 隐藏支付弹窗
    hideConfirm: function hideConfirm(e) {
      common.formIdUpdate(e);
      this.setData({
        order_confirm_show: false });

    },

    //阻止冒泡事件
    unLoad: function unLoad() {},

    // 支付前地址分析
    beforeSubmit: function beforeSubmit(e) {
      // 没收货地址，从缓存取到地址
      var that = this;

      if (this.storageAddr) {
        that.setData({
          order_confirm_show: true });

        that.addAddress(function () {
          that.getaddresslist();
        });
      } else {
        if (this.isEditAddr == true) {
          that.editAddress(function () {
            that.setData({
              order_confirm_show: true });

          });
        } else {
          that.setData({
            order_confirm_show: true });

        }
      }
    },

    //获取留言信息
    getMessage: function getMessage(e) {
      this.message = e.detail.value;
      this.setData({
        message: e.detail.value });

    },

    // 去支付
    touchSubmit: function touchSubmit(e) {
      var that = this;
      var productInfo = that.productInfo;
      var uri = app.getPath.shopConfirmOrder;

      if (that.consignee && !that.consignee.address_id) {
        var content = '您还未设置收货地址';
        var confimText = '去设置';
        common.showModal(content, confimText, function (res) {
          if (res.confirm) {
            that.newAddress();
          } else {
            return;
          }
        });
      } else {
        common.showLoad(that);

        if (that.selectedGoods.coupons_can_use == 0) {
          that.coupon_id = -1;
        }

        var shop_shipping_time_id = 0;

        if (that.selectedGoods.is_in_shipping_time === 0) {
          shop_shipping_time_id = that.orderTimeText.shop_shipping_time_id;
        }

        var data = {
          coupon_id: that.coupon_id,
          address_id: that.consignee.address_id,
          shop_id: that.shop_id,
          payment_code: that.selectedGoods.payment_code[0],
          user_note: that.message,
          use_balance: that.selectedGoods.use_balance,
          time_atitude: app.dataBase.userAtitude,
          shop_shipping_time_id: shop_shipping_time_id };

        common.formIdUpdate(e);
        common.ApiGateWayTest(uri, data, true, function (res) {
          var res = res.data;

          if (data.shop_id && data.shop_id.length > 0 && res.success == 1) {
            var payUri = app.getPath.doPay;
            var payData = {
              order_type: 2,
              order_id: res.result.order_id,
              payment_code: that.selectedGoods.payment_code[0] };

            common.hideLoad(that);

            if (res.result.status == 1) {
              // 实付为0，不走支付接口
              wx.redirectTo({
                url: './order-detail?order_id=' + payData.order_id + '&entryType=external' });

            } else {
              // 调用支付
              common.ApiGateWayTest(payUri, payData, true, function (res) {
                if (res.data.success == 1) {
                  var data = res.data.result;
                  common.doWechatPay(data, function (res) {
                    common.hideLoad(that);
                    that.checkPay(payData.order_id).then(function (res) {
                      wx.showToast({
                        title: '支付成功',
                        duration: 2000 });

                      wx.redirectTo({
                        url: './order-detail?order_id=' + payData.order_id + '&entryType=external' });

                    });
                  }, function (failres) {
                    common.hideLoad(that);
                    that.checkPay(payData.order_id).then(function (res) {
                      wx.showToast({
                        title: '支付失败',
                        icon: 'cancel',
                        duration: 2000 });

                      wx.redirectTo({
                        url: './order-detail?order_id=' + payData.order_id + '&entryType=external' });

                    });
                  }, function (completeres) {
                    common.hideLoad(that);
                  });
                } else {
                  common.hideLoad(that);
                  common.toast(res.data.msg);
                  return;
                }
              });
            }
          } else {
            common.hideLoad(that);
            common.toast(res.msg);
            return;
          }
        });
      }
    },
    // 支付确认是否回调
    checkPay: function checkPay(orderId) {
      var that = this;
      var uri = app.getPath.checkPay;
      var data = {
        order_id: orderId,
        order_type: 2 };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.data.success == 1) {
            resolve(true);
          } else {
            resolve(false);
          }
        });
      });
    },

    // 获取提货点楼号标签
    getAddressTag: function getAddressTag() {
      var that = this;
      var url = app.getPath.pickupLabel;
      var data = {
        pickup_id: this.consignee.pickup_id,
        address_id: this.consignee.address_id };

      common.ApiGateWayTest(url, data, true, function (res) {
        var res = res.data;

        if (res.success == 1) {
          res.result.list.forEach(function (val, index) {
            if (val.is_selected == 1) {
              that.tag_num = index;
              that.label_id = val.pick_up_label_id;
              that.label_name = val.name;

              if (!that.checkChoose) {
                that.showChooseTag = true;
                that.checkChoose = true;
              }
            }
          });
          that.setData({
            address_tag: res.result.list,
            tag_num: that.tag_num,
            label_name: that.label_name,
            has_shop: res.result.has_shop,
            showChooseTag: that.showChooseTag });

        }
      });
    },

    // 选择标签
    changeChooseTag: function changeChooseTag() {
      this.setData({
        showChooseTag: false });

    },

    // 切换标签
    change_tag: function change_tag(e) {
      this.label_id = e.currentTarget.dataset.label_id;
      this.label_name = e.currentTarget.dataset.label_name;
      this.isEditAddr = true;
      this.setData({
        tag_num: e.currentTarget.dataset.tagnum });

    },

    //  隐藏弹窗
    hideWindow: function hideWindow() {
      var that = this;
      that.setData({
        showOrderWindow: false,
        timeOrderCheck: false });

    },

    showWindow: function showWindow() {
      var that = this;
      that.setData({
        showOrderWindow: true,
        timeOrderCheck: true });

    },

    //  选择时间
    changeOrderTime: function changeOrderTime(e) {
      var num = e.currentTarget.dataset.num;
      var item = e.currentTarget.dataset.item;
      common.setStorageSync('tackoutOrderTime', item);
      this.setData({
        orderTimeId: item.shop_shipping_time_id,
        orderTimeText: item });

    },

    // 阻止父级冒泡
    stopMove: function stopMove() {
      return true;
    },

    setData: function setData(obj) {
      var that = this;
      var keys = [];
      var val, data;
      Object.keys(obj).forEach(function (key) {
        keys = key.split('.');
        val = obj[key];
        data = that.$data;
        keys.forEach(function (key2, index) {
          that[key] = obj[key];
        });
      });
    } } };exports.default = _default;

/***/ }),

/***/ 607:
/*!**************************************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./check-takeout-order.vue?vue&type=style&index=0&lang=css& */ 608);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_check_takeout_order_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 608:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/takeout-order/check-takeout-order.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

},[[601,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/packageA/takeout-order/check-takeout-order.js.map