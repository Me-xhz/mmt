(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/activity/activity"],{

/***/ 182:
/*!**********************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./activity.vue?vue&type=template&id=1ea007fc& */ 183);
/* harmony import */ var _activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./activity.vue?vue&type=script&lang=js& */ 185);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./activity.vue?vue&type=style&index=0&lang=css& */ 187);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 15);






/* normalize component */

var component = Object(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__["render"],
  _activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 183:
/*!*****************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=template&id=1ea007fc& ***!
  \*****************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity.vue?vue&type=template&id=1ea007fc& */ 184);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_template_id_1ea007fc___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 184:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=template&id=1ea007fc& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 185:
/*!***********************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity.vue?vue&type=script&lang=js& */ 186);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 186:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var app = getApp().globalData;
var common = __webpack_require__(/*! ../../utils/common.js */ 28);var countdown = function countdown() {return __webpack_require__.e(/*! import() | components/countDown/countDown */ "components/countDown/countDown").then(__webpack_require__.bind(null, /*! ../../components/countDown/countDown */ 853));};var _default =


{
  data: function data() {
    return {
      autoplay: true,
      interval: 3000,
      duration: 500,
      indicatorDots: true,
      indicatorColor: "rgba(0,0,0,.2)",
      indicatorActiveColor: "#FF7F95",
      shareContent: {},
      iconURL: app.dataBase.iconURL,
      showPhoneModal: false,
      join_id: 0,
      joinName: "",
      joinPhone: "",
      joinAge: "",
      joinFactory: "",
      showSkuDrawer: false,
      field_data: [],
      field_upd_data: [],
      selectedSkuArr: [],
      selected_field_idx: 0,
      skuArr: [],
      countTimeDate: 0,
      countTimeType: 0,
      isShowGoHome: false,
      entryData: "",
      ConfigStyle: "",
      Items: "",
      preImageWidth: "",
      preImageHeight: "",
      animationData: "",
      skuAnimationData: "",
      select_label_name: "",
      goods_id: "",
      good_idx: "",
      properties: "" };

  },

  components: {
    countdown: countdown },

  props: {},
  onLoad: function onLoad(options) {
    var that = this;
    common.showLoad(this);
    this.ad_id = options.ad_id;
    this.activity_id = options.activity_id;
    this.getActivity(); // 从外部分享进入时，显示左上角回到首页  改动带external时为内部进入携带参数，外部进入不带参数

    if (options && options.entryType && options.entryType == 'external') {
      this.setData({
        isShowGoHome: false });

    } else {
      this.setData({
        isShowGoHome: true });

    } // 外部带商品店铺


    this.setData({
      entryData: options });

    var options = that.entryData;
    var pickupId = common.getStorageSync('getpickup'); // 判断是否第一次进入 且是从外部进入，如二维码扫码 && app.firstlaunchApp

    if (options && (options.atitude || options.pickup_id) && !pickupId) {
      that.getExternal(options.pickup_id).then(function () {
        // 关闭开关，让app知道已经不是第一次进入当前页
        app.firstlaunchApp = false; // 清空data内携带参数

        that.entryData = {}; // 外部已带经纬度定位，无需再调用定位接口，所以将缓存定位改为真，让页面可以显示

        common.setStorageSync('authSetting', {
          'scope.userLocation': true });

      });
    }
  },

  onReady: function onReady() {
    common.hideLoad(this);
  },

  onShareAppMessage: function onShareAppMessage() {
    var that = this;
    var pickup = common.getStorageSync('getpickup');
    return {
      title: that.shareContent.shareTitle.value,
      path: '/pages/activity/activity?activity_id=' + that.activity_id + '&pickup_id=' + pickup.pickup_id,
      imageUrl: that.shareContent.shareImage.value,
      success: function success(res) {
        console.log("转发成功");
      },
      fail: function fail(res) {
        console.log("转发失败");
      } };

  },
  methods: {
    // 从外部二维码扫码，带经纬度和外部标识external
    getExternal: function getExternal(pickup_id) {
      var that = this;
      var uri = app.getPath.getpickup;
      var data = {
        pickup_id: pickup_id };

      return new Promise(function (resolve, reject) {
        // 获取提货点
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res && res.data && res.data.success == 1) {
            var res = res.data.result.cities.pick_up;
            common.setStorage({
              key: 'getpickup',
              data: {
                'pickup_id': res.pickup_id,
                'cityName': res.pickup_name,
                'pickup_address': res.pickup_address,
                'pickup_contact': res.pickup_contact,
                'pickup_phone': res.pickup_phone,
                'pickup_type': res.pickup_type } },

            function (res) {
              resolve('获取id成功');
            });
            common.setStorage({
              key: 'city',
              data: {
                'pickup_id': res.pickup_id,
                'warehouse_id': res.warehouse_id,
                'cityName': res.city_name,
                'is_pick_up': 1 } });


          }
        });
      });
    },
    // 返回首页
    gotoHome: function gotoHome() {
      wx.switchTab({
        url: '/pages/index/index' });

    },
    getActivity: function getActivity() {
      var that = this;
      wx.request({
        //正式服
        url: 'https://api.activity.haoyousheng.com.cn/api/ActivityApi/activityList',
        //测试服
        // url: 'https://api.t-activity.surex.cc/api/ActivityApi/activityList',
        data: {
          id: that.activity_id },

        method: 'post',
        success: function success(res) {
          var item = res.data;
          var ItemsJson = JSON.stringify(item.pageList.items);
          var Items = ItemsJson.replace(/px/g, "");
          that.setData({
            ConfigStyle: item.pageList.config.style,
            Items: JSON.parse(Items),
            shareContent: item.pageList.config });

          wx.setNavigationBarTitle({
            title: item.pageList.title });


          for (var i = 0; i < that.Items.length; i++) {
            for (var k = 0; k < that.Items[i].children.length; k++) {
              if (that.Items[i].children[k].type == "countdown") {
                var newDate = new Date().getTime();
                var startDate = new Date(that.Items[i].children[k].data.time.value[0]).getTime();
                var endDate = new Date(that.Items[i].children[k].data.time.value[1]).getTime();

                if (newDate < startDate) {
                  that.setData({
                    countTimeType: 0,
                    countTimeDate: startDate });

                } else {
                  that.setData({
                    countTimeType: 1,
                    countTimeDate: endDate });

                }
              }
            }
          }

          console.log(that.countTimeDate);
        },
        fail: function fail(res) {
          wx.hideLoading();
        } });

    },
    imagesLoad: function imagesLoad(event) {
      var that = this;
      var data = event.detail;
      that.setData({
        preImageWidth: data.width,
        preImageHeight: data.height });

    },
    hotpotLink: function hotpotLink(e) {
      var that = this;
      var typeId = e.target.dataset.type;
      var id = e.target.dataset.id;

      if (typeId == 1) {
        var uri = app.getPath.addCoupon; // 判断是否登录

        var isOldUser = common.getStorageSync('isOldUser');

        if (!app.checkSessionKey || isOldUser == 2) {
          common.goRegister();
          return false;
        }

        var data = {
          coupon_id: id };

        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.statusCode == 200 && !res.data.result.error_desc) {
            if (res.data.result) {
              common.toast(res.data.result.state_desc);
              that.adclose(that.ad_id, 1);
            } else {
              common.toast(res.data.msg);
            }
          } else {
            common.toast(res.data.result.error_desc);
          }
        });
      } else if (typeId == 2) {
        wx.navigateTo({
          url: '../../pages/product/product?entryType=external&productId=' + id });

      } else if (typeId == 3) {
        wx.navigateTo({
          url: '../../pages/listdetail/listdetail?brand_id=' + id });

      } else if (typeId == 5) {
        wx.navigateTo({
          url: '../../pages/projectPage/projectPage?entryType=external&type=3&id=' + id });

      } else if (typeId == 6) {
        wx.navigateTo({
          url: '../../pages/projectPage/projectPage?entryType=external&type=5&id=' + id });

      } else if (typeId == 7) {
        wx.switchTab({
          url: '/pages/index/index' });

      } else if (typeId == 8) {
        // 判断是否登录
        var isOldUser = common.getStorageSync('isOldUser');

        if (!app.checkSessionKey || isOldUser == 2) {
          common.goRegister();
          return false;
        }

        var animation = wx.createAnimation({
          duration: 300,
          timingFunction: "linear",
          delay: 0 });

        animation.translateY(300).opacity(1).step();
        that.setData({
          animationData: animation.export() });

        var _uri = app.getPath.enrolluser;
        var _data = {
          type: 1,
          activity_id: id };

        common.ApiGateWayTest(_uri, _data, true, function (res) {
          if (res.statusCode == 200) {
            if (res.data.result.status == 0) {
              var animation = wx.createAnimation({
                duration: 300,
                timingFunction: "linear",
                delay: 0 });

              animation.translateY(300).opacity(1).step();
              that.setData({
                animationData: animation.export() });

              that.setData({
                join_id: id,
                showPhoneModal: true });

              setTimeout(function () {
                animation.translateY('-150px').translateX('-50%').step();
                that.setData({
                  animationData: animation });


                if (e.currentTarget.dataset.status == 0) {
                  that.setData({
                    showPhoneModal: false });

                }
              }.bind(that), 200); // 是否data内有数据，无则为正常信息填写，有则为配置信息填写

              that.setData({
                field_data: res.data.result.data });

            } else {
              common.toast(res.data.result.msg);
            }
          } else {
            common.toast("网络错误请重试！");
          }
        });
      }
    },
    adclose: function adclose(ad_id, is_close) {
      var that = this;
      var uri = app.getPath.adclose;
      var data = {
        ad_id: ad_id,
        is_close: is_close };

      common.ApiGateWayTest(uri, data, true, function (res) {});
    },
    countdown: function countdown() {
      var that = this;
    },
    phoneMaskSubmit: function phoneMaskSubmit() {
      var that = this;

      if (that.joinName.length == 0) {
        common.toast('请填写姓名');
        return;
      }

      if (that.joinPhone.length == 0) {
        common.toast('请填写手机号码');
        return;
      }

      if (that.joinAge.length == 0) {
        common.toast('请填写年龄');
        return;
      }

      if (that.joinFactory.length == 0) {
        common.toast('请填写工厂名称');
        return;
      }

      var uri = app.getPath.enrolluser;
      var data = {
        type: 2,
        real_name: that.joinName,
        mobile: that.joinPhone,
        factory_name: that.joinFactory,
        age: that.joinAge,
        activity_id: that.join_id };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res.statusCode == 200) {
          that.setData({
            joinName: "",
            joinPhone: "",
            joinAge: "",
            joinFactory: "",
            showPhoneModal: false });

          common.toast(res.data.result.msg);
        } else {
          common.toast("网络错误请重试！");
        }
      });
    },
    phoneMaskCancel: function phoneMaskCancel() {
      this.setData({
        joinName: "",
        joinPhone: "",
        joinAge: "",
        joinFactory: "",
        showPhoneModal: false });

    },
    inputInfo: function inputInfo(e) {
      if (e.currentTarget.dataset.item == 1) {
        this.setData({
          joinName: e.detail.value });

      } else if (e.currentTarget.dataset.item == 2) {
        this.setData({
          joinPhone: e.detail.value });

      } else if (e.currentTarget.dataset.item == 3) {
        this.setData({
          joinAge: e.detail.value });

      } else if (e.currentTarget.dataset.item == 4) {
        this.setData({
          joinFactory: e.detail.value });

      }
    },
    // 弹窗动画js
    showSkuDrawerHandle: function showSkuDrawerHandle() {
      var animation = wx.createAnimation({
        duration: 500,
        timingFunction: 'ease' });


      if (!this.showSkuDrawer) {
        animation.bottom(0).step();
      } else {
        animation.bottom(-700).step();
      }

      this.setData({
        skuAnimationData: animation.export(),
        showSkuDrawer: !this.showSkuDrawer });

    },
    // 选择规格  弹窗
    showSku: function showSku(e) {
      var idx = e.currentTarget.dataset.idx;
      var field_list = this.field_data[idx].field_list;
      this.setData({
        select_label_name: this.field_data[idx].label_name,
        goods_id: this.field_data[idx].field_list[0].goods_id,
        selectedSkuArr: field_list,
        selected_field_idx: idx });

      this.showSkuDrawerHandle();
      this.selectGood();
    },
    selectGood: function selectGood(e) {
      if (e) {
        var index = e.currentTarget.dataset.index;
        var goods_id = e.currentTarget.dataset.goodid;
      } else {
        var index = 0;
        var goods_id = this.goods_id;
      }

      var properties = this.selectedSkuArr[index];
      this.setData({
        goods_id: goods_id,
        good_idx: index,
        properties: properties,
        skuArr: [] });

      var maybeStock = []; // 将所有规格提取成数组

      for (var i = 0; i < properties.spec_name.length; ++i) {
        var property = properties.spec_name[i];
        maybeStock[i] = [];

        for (var j = 0; j < property.attrs.length; j++) {
          maybeStock[i].push(property.attrs[j].id);
        }
      } // 获取笛卡尔积组合


      maybeStock = common.multiCartesian(maybeStock);
      this.maybeStock = maybeStock;
    },
    selectAttr: function selectAttr(e) {
      // skuArr 当前选择的规格组合的存放数组
      // 规格组名index
      var idx = e.currentTarget.dataset.idx;
      var skuId = e.currentTarget.dataset.attr.id;
      var skuArr = this.skuArr.concat(); // 防止引用

      skuArr[idx] = skuId;

      if (this.properties.spec_name.length == skuArr.length) {
        var skuStr = skuArr.join('_');
        var btn = false;
        this.properties.spec_key.forEach(function (item) {
          if (item == skuStr) {
            btn = true;
          }
        });

        if (!btn) {
          common.toast('商品无库存');
          return false;
        }
      }

      this.setData({
        skuArr: skuArr });

    },
    affirm: function affirm() {
      var skuArr = this.skuArr;
      var str = this.properties.goods_name;

      if (skuArr.length < this.properties.spec_name.length) {
        common.toast('请选择规格');
        return false;
      }

      this.properties.spec_name.forEach(function (item, index) {
        for (var i in item.attrs) {
          if (item.attrs[i].id == skuArr[index]) {
            str += '/' + item.attrs[i].item;
          }
        }
      });
      var field_data = this.field_data;
      field_data[this.selected_field_idx].val = str;
      var field_upd_data = this.field_upd_data;
      field_upd_data[this.selected_field_idx] = this.goods_id + '+' + skuArr.join('_'); // return

      this.setData({
        field_upd_data: field_upd_data,
        field_data: field_data });

      this.showSkuDrawerHandle();
    },
    // 输入框双向绑定
    inputBind: function inputBind(e) {
      var val = e.detail.value;
      var idx = e.target.dataset.idx;
      var field_upd_data = this.field_upd_data;
      field_upd_data[idx] = val;
      this.setData({
        field_upd_data: field_upd_data });

    },
    // 提交
    field_upd: function field_upd() {
      var that = this;
      var fLen1 = this.field_upd_data.length;
      var fLen2 = this.field_data.length; // 判断是否为空

      if (fLen1 < fLen2) {
        common.toast('请填写所有数据');
        return false;
      }

      for (var i = 0; i < fLen2; i++) {
        if (this.field_upd_data[i] == undefined || this.field_upd_data[i] == '') {
          common.toast('请填写所有数据');
          return false;
        }
      }

      var field_data = this.field_data;
      var name_key = [];
      field_data.forEach(function (item) {
        name_key.push(item.field_id);
      }); // return;

      var uri = app.getPath.enrolluser;
      var data = {
        type: 2,
        name_key: name_key.join(','),
        name: this.field_upd_data.join(','),
        activity_id: that.join_id };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res.statusCode == 200) {
          that.setData({
            joinName: "",
            joinPhone: "",
            joinAge: "",
            joinFactory: "",
            showPhoneModal: false });

          that.adclose(that.ad_id, 1);
          common.toast(res.data.result.msg);
        } else {
          common.toast("网络错误请重试！");
        }
      });
    },

    goProduct: function goProduct(e) {
      var that = this;
      var id = e.currentTarget.dataset.id;
      wx.navigateTo({
        url: '../../pages/product/product?entryType=external&productId=' + id });

    },

    setData: function setData(obj) {
      var that = this;
      var keys = [];
      var val, data;
      Object.keys(obj).forEach(function (key) {
        keys = key.split('.');
        val = obj[key];
        data = that.$data;
        keys.forEach(function (key2, index) {
          that[key] = obj[key];
        });
      });
    } } };exports.default = _default;

/***/ }),

/***/ 187:
/*!*******************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=style&index=0&lang=css& ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity.vue?vue&type=style&index=0&lang=css& */ 188);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_activity_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 188:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/activity/activity.vue?vue&type=style&index=0&lang=css& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

},[[181,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/activity/activity.js.map