(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/confirm/confirm"],{

/***/ 142:
/*!********************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./confirm.vue?vue&type=template&id=6a78a09e& */ 143);
/* harmony import */ var _confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./confirm.vue?vue&type=script&lang=js& */ 145);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./confirm.vue?vue&type=style&index=0&lang=css& */ 147);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 15);






/* normalize component */

var component = Object(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__["render"],
  _confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 143:
/*!***************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=template&id=6a78a09e& ***!
  \***************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=template&id=6a78a09e& */ 144);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_template_id_6a78a09e___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 144:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=template&id=6a78a09e& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 145:
/*!*********************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=script&lang=js& */ 146);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 146:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

// pages/confirm/confirm.js
var app = getApp().globalData;
var common = __webpack_require__(/*! ../../utils/common.js */ 28);var _default =

{
  data: function data() {
    return {
      iconURL: app.dataBase.iconURL,
      showDialog: false,
      order_confirm_show: false,
      selectedGoods: {},
      // 默认地址
      consignee: {
        consignee: "" },

      consignee2: {},

      isTopaydis: false,
      //商品信息
      productInfo: {},
      // 后台筛选返回后商品信息
      order_info: {
        firstGoods: [],
        secondGoods: [] },

      orderSn: "",
      //发票信息
      invoiceData: {},
      //地址
      cashgift: {},
      //去支付默认
      canPurchase: false,
      // 优惠券展示
      showBonusModal: false,
      // 可领取优惠券展示
      showGetBonusModal: false,
      tip_show: {
        tip1: true,
        tip2: true },

      // 是否从缓存里读取地址
      storageAddr: false,
      // 是否需要修改地址
      isEditAddr: false,
      // 可领取优惠券
      bounsList: [],
      // 可用优惠券
      cashgifts: [],
      // 不可用优惠券
      noCashgifts: [],
      order_product: "",
      coupon_id: undefined,
      animationData: "",
      user_note: "" };

  },

  components: {},
  props: {},
  onLoad: function onLoad(options) {
    var that = this;
    this.checkUser();
    this.getPreData();
    //options.index是地址列表中传过,判断是否是选地址页面跳过来的。如果是，利用缓存显示再当前页面的地理信息。如果是别的页面跳过了，显示默认地址
    if (options.index) {
      var consignee = common.getStorageSync('edit')[options.index];
      that.consignee = consignee;
    } else {
      this.getaddresslist();
    }
    Promise.all([this.getOrderCouponList(), this.getBounsList()]).then(function (val) {
      that.getcheckOrderinfo();
    });
  },
  onShow: function onShow() {


    var that = this;
    var data = common.getStorageSync('nowPay');

    if (data == undefined || data == '') {
      common.toast("请求参数错误");
      return;
    }


  },
  methods: {
    // 去地图
    goMap: function goMap(e) {

      var url = e.currentTarget.dataset.url;
      var pickup_img = e.currentTarget.dataset.pickup_img;
      common.setStorage({
        key: 'pickup_img',
        data: pickup_img },
      function (res) {
        wx.navigateTo({
          url: url });

      });
    },
    // 判断用户是否为黑名单
    checkUser: function checkUser() {


      var that = this;
      var uri = app.getPath.checkUser;
      common.ApiGateWayTest(uri, '', true, function (res) {
        if (res.data.success == 1) {
          return;
        } else {
          wx.showModal({
            title: '用户禁用下单提示',
            content: res.data.msg,
            confirmText: '确定',
            confirmColor: '#eb3c39',
            showCancel: false,
            cancelColor: '#030303',

            success: function success(res) {
              if (res.confirm) {
                wx.navigateBack({
                  delta: 1 });

              }
            } });


        }
      });
    },
    // 提示显示隐藏
    isShow: function isShow(e) {

      var name = e.currentTarget.dataset.name;
      var tip_show = this.tip_show;
      tip_show[name] = false;
      this.setData({
        tip_show: tip_show });

    },
    getPreData: function getPreData() {

      var that = this; // 缓存数据

      var productInfo = common.getStorageSync('nowPay');
      var order_product = []; // 将商品转为后台所需json字符串

      for (var i in productInfo) {
        order_product.push({
          goods_id: productInfo[i].goods_id,
          sku_key: productInfo[i].sku_key,
          num: productInfo[i].amount });

      }

      order_product = JSON.stringify(order_product);
      that.setData({
        productInfo: productInfo,
        order_product: order_product,
        'order_info.firstGoods': productInfo });

      this.cartBuyCheck();
    },
    // 获取地理位置,默认的地址
    getaddresslist: function getaddresslist() {
      var that = this;
      var addressUri = app.getPath.getaddresslist;
      var addressData = {
        is_default: '1' // 地理位置请求
      };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(addressUri, addressData, true, function (res) {
          if (res.statusCode == 200) {
            var res = res.data.result.consignees;
            that.consignee = res[0];
            resolve('getAddress success');
          }
        });
      });

    },
    // 新增收货地址
    addAddress: function addAddress(callback) {
      var that = this;
      var reg = /^[0-9]{11}$/;

      if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
        common.toast('请输入提货人姓名');
        return;
      }

      if (!reg.test(this.consignee.mobile)) {
        common.toast('请输入正确的手机号');
        return;
      }

      ;
      var uri = app.getPath.addaddress;
      var data = {
        consignee: that.consignee.consignee,
        mobile: that.consignee.mobile,
        pickup_id: that.consignee.pickup_id,
        is_default: 1 };


      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res && res.data.success == 1) {
          var res = res.data.result;
          that.setData({
            consignee: res.consignees });

          callback && typeof callback === "function" && callback();
        }
      });

    },
    // 修改收货地址
    editAddress: function editAddress(callback) {

      var that = this;
      var reg = /^[0-9]{11}$/;

      if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
        common.toast('请输入提货人姓名');
        return;
      }

      if (!reg.test(this.consignee.mobile)) {
        common.toast('请输入正确的手机号');
        return;
      }

      ;
      that.isEditAddr = false;
      var uri = app.getPath.alteraddress;
      var data = {
        consignee: that.consignee.consignee,
        mobile: that.consignee.mobile,
        address_id: that.consignee.address_id,
        pickup_id: that.consignee.pickup_id,
        is_default: that.consignee.is_default };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res && res.data.success == 1) {
          var res = res.data.result;
          callback && typeof callback === "function" && callback();
        }
      });

    },
    // 输入框双向绑定
    editInput: function editInput(e) {

      var keyName = e.target.dataset.keyname;
      var val = e.detail.value;
      var consignee = this.consignee;
      consignee[keyName] = val;
      this.isEditAddr = true;
      this.setData({
        consignee: consignee });


    },
    // 获取信息接口
    getcheckOrderinfo: function getcheckOrderinfo() {

      var that = this;
      // 当前仓库
      var city = common.getStorageSync('city');
      var uri = app.getPath.checkOrderInfo;
      if (that.coupon_id == undefined) {
        that.coupon_id = 0; // that.data.coupon_id = that.data.cashgift.id;
      }

      if (that.selectedGoods.use_balance == undefined) {
        that.selectedGoods.use_balance = 1;
      }

      if (that.consignee.address_id == undefined) {
        that.consignee.address_id = 0;
      }
      // 确认订单接口提交数据
      var data = {
        coupon_id: that.coupon_id,
        address_id: that.consignee.address_id,
        use_balance: that.selectedGoods.use_balance,
        order_product: that.order_product,
        team_order: that.productInfo[0].team_order ? that.productInfo[0].team_order : 0,
        channel: that.productInfo[0].channel ? that.productInfo[0].channel : 0,
        team_id: that.productInfo[0].team_id ? that.productInfo[0].team_id : 0,
        found_id: that.productInfo[0].found_id ? that.productInfo[0].found_id : '',
        activity_bargaining_id: that.productInfo[0].activity_bargaining_id ? that.productInfo[0].activity_bargaining_id :
        '',
        activity_bargain_id: that.productInfo[0].activity_bargain_id ? that.productInfo[0].activity_bargain_id : '' };

      // 获取确认订单信息
      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.statusCode == 200) {
            var res = res.data.result;
            that.setData({
              selectedGoods: res,
              cashgift: res.coupon_info,
              coupon_id: res.coupon_info.id,
              order_info: res.order_info });

          }

          var btn = true;
          var order_info = that.order_info;
          order_info.firstGoods.forEach(function (item) {
            if (item.is_disable == 1 || item.is_enough == 0 || item.is_on_sale == 0) {
              btn = false;
            }
          });
          order_info.secondGoods.forEach(function (item) {
            if (item.is_disable == 1 || item.is_enough == 0 || item.is_on_sale == 0) {
              btn = false;
            }
          }); // that.data.consignee && that.data.consignee.address_id

          if (btn) {
            that.setData({
              canPurchase: true });

          } else {
            that.setData({
              canPurchase: false });

            wx.showModal({
              content: '商品被抢光咯，小提正在补货中喔~',
              showCancel: false,
              confirmText: '取消',
              confirmColor: '#575757' });

          }

          resolve('getcheckOrderinfo success');
        });
      });

    },
    // 地址选择
    touchAddress: function touchAddress() {

      var that = this;
      wx.navigateTo({
        //这里给参数switch=1 A页面跳到B页面，然后点击B页面再调回来
        url: '/pages/address/addressList/addressList?from=confirm&&switch=1' });


    },
    // 新增地址
    newAddress: function newAddress() {


      var that = this;
      wx.navigateTo({
        url: '/pages/address/address' });


    },
    // 优惠券选择
    touchCashgift: function touchCashgift(e) {
      var that = this;
      var id = e.currentTarget.dataset.id;

      if (that.coupon_id == id) {
        that.setModalBonus();
        return false;
      } else {
        that.coupon_id = id;
        that.getcheckOrderinfo();
      }

      that.setModalBonus();
    },
    // 优惠券列表信息
    getOrderCouponList: function getOrderCouponList() {
      var that = this;
      var uri = app.getPath.ordercouponList;
      var data = {
        order_product: that.order_product,
        team_order: that.productInfo[0].team_order ? that.productInfo[0].team_order : 0,
        team_id: that.productInfo[0].team_id ? that.productInfo[0].team_id : 0,
        activity_bargaining_id: that.productInfo[0].activity_bargaining_id ? that.productInfo[0].activity_bargaining_id :
        '' };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.data.errorCode != 1) {
            var res = res.data.result;
            that.setData({
              cashgifts: res.lists,
              noCashgifts: res.no_lists });

            resolve('getOrderCouponList');
          } else {
            common.toast(res.data.msg);
          }
        });
      });
    },
    // 可领取优惠券信息
    getBounsList: function getBounsList() {
      var that = this;
      var uri = app.getPath.canGetCouponList;
      var data = {
        order_product: that.order_product,
        team_order: that.productInfo[0].team_order ? that.productInfo[0].team_order : 0,
        team_id: that.productInfo[0].team_id ? that.productInfo[0].team_id : 0,
        activity_bargaining_id: that.productInfo[0].activity_bargaining_id ? that.productInfo[0].activity_bargaining_id :
        '' };

      return new Promise(function (resolve, reject) {
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res.data.errorCode != 1) {
            var res = res.data.result;
            that.setData({
              bounsList: res.lists });

            resolve('getBounsList');
          } else {
            common.toast(res.data.msg);
          }
        });
      });
    },
    // 点击领取优惠券
    getBouns: function getBouns(e) {
      var that = this;
      var id = e.currentTarget.dataset.id;
      var uri = app.getPath.addCoupon;
      var data = {
        coupon_id: id };

      common.ApiGateWayTest(uri, data, true, function (res) {
        var resData = res.data;

        if (resData.success == 1) {
          that.getBounsList();
          that.getOrderCouponList();
          common.toast(resData.result.state_desc);
        } else {
          common.toast(resData.result.state_desc);
          return;
        }
      });
    },
    // 可领取优惠券-去使用
    onSetBouns: function onSetBouns() {
      var that = this;
      that.coupon_id = 0;
      that.getModalBonus();
      that.getcheckOrderinfo();
      that.getOrderCouponList();
    },
    //发票
    // touchInvoice: function () {
    //   var newData;
    //   if (this.data.invoiceData) {
    //     newData = JSON.stringify(this.data.invoiceData)
    //   } else {
    //     newData = undefined;
    //   }
    //   wx.navigateTo({
    //     url: './invoice/invoice?invoiceData=' + newData
    //   })
    // },
    // 从外部二维码扫码，带经纬度和外部标识external
    getExternal: function getExternal(pickup_id) {
      var that = this;
      var uri = app.getPath.getpickup;
      var data = {
        pickup_id: pickup_id };

      return new Promise(function (resolve, reject) {
        // 获取提货点
        common.ApiGateWayTest(uri, data, true, function (res) {
          if (res && res.data && res.data.success == 1) {
            var res = res.data.result.cities.pick_up;
            common.setStorage({
              key: 'city',
              data: {
                'pickup_id': res.pickup_id,
                'warehouse_id': res.warehouse_id,
                'cityName': res.city_name,
                'is_pick_up': 1 } });


            common.setStorage({
              key: 'getpickup',
              data: {
                'pickup_id': res.pickup_id,
                'cityName': res.pickup_name,
                'pickup_address': res.pickup_address,
                'pickup_contact': res.pickup_contact,
                'pickup_phone': res.pickup_phone,
                'pickup_type': res.pickup_type } },

            function (res) {
              resolve('获取id成功');
            });
          }
        });
      });
    },
    // 已领取优惠券弹窗
    setModalBonus: function setModalBonus() {
      if (this.showBonusModal == 0) {
        this.showBonusModal = 1;
      } else {
        this.showBonusModal = 0;
      }

      var animation = wx.createAnimation({
        duration: 300,
        timingFunction: "linear",
        delay: 0 });

      animation.translateY(300).opacity(1).step();
      this.setData({
        animationData: animation.export() });


      if (this.showBonusModal == 1) {
        this.setData({
          showBonusModal: true });

      }

      setTimeout(function () {
        animation.translateY(0).step();
        this.setData({
          animationData: animation });


        if (this.showBonusModal == 0) {
          this.setData({
            showBonusModal: false });

        }
      }.bind(this), 200);
    },
    refreshOrderPrice: function refreshOrderPrice() {},
    // 可领取优惠券弹窗
    getModalBonus: function getModalBonus() {
      if (this.showGetBonusModal == 0) {
        this.showGetBonusModal = 1;
      } else {
        this.showGetBonusModal = 0;
      }

      var animation = wx.createAnimation({
        duration: 300,
        timingFunction: "linear",
        delay: 0 });

      animation.translateY(300).opacity(1).step();
      this.setData({
        animationData: animation.export() });


      if (this.showGetBonusModal == 1) {
        this.setData({
          showGetBonusModal: true,
          showBonusModal: false });

      }

      setTimeout(function () {
        animation.translateY(0).step();
        this.setData({
          animationData: animation });


        if (this.showGetBonusModal == 0) {
          this.setData({
            showGetBonusModal: false });

        }
      }.bind(this), 200);
    },
    //  是否使用余额
    use_balance: function use_balance() {
      var that = this;
      var selectedGoods = this.selectedGoods;

      if (selectedGoods.use_balance == 1) {
        selectedGoods.use_balance = 0;
      } else {
        selectedGoods.use_balance = 1;
      }

      that.setData({
        selectedGoods: selectedGoods });
      // 重新获取信息

      that.getcheckOrderinfo();
    },
    // 留言
    refreshComment: function refreshComment(event) {
      var value = event.detail.value;
      this.setData({
        user_note: value });

    },
    // 检测新人礼包
    cartBuyCheck: function cartBuyCheck(callback) {
      var that = this;
      var uri = app.getPath.cartBuyCheck;
      var data = {
        order_product: that.order_product };

      common.ApiGateWayTest(uri, data, true, function (res) {
        if (res.data.success == 1) {
          if (res.data.result.state == 1) {
            wx.showModal({
              title: '',
              content: res.data.result.msg,
              showCancel: false,
              confirmText: '确认',
              confirmColor: '#eb3c39',
              success: function success(res) {
                if (res.confirm) {
                  wx.navigateBack({
                    delta: 1 });

                } // (callback && typeof (callback) === "function") && callback(res);

              } });
            // common.showModal(res.data.result.msg);
          }
        }
      });
    },
    // 显示支付弹窗
    showConfirm: function showConfirm(e) {
      var that = this;
      common.getStorage({
        key: 'getpickup' },
      function (res) {
        if (res.data.pickup_id && res.data.pickup_id > 0) {
          var reg = /^[0-9]{11}$/;

          if (that.consignee.consignee == undefined || that.consignee.consignee == '') {
            common.toast('请输入提货人姓名');
            return;
          }

          if (!reg.test(that.consignee.mobile)) {
            common.toast('请输入正确的手机号');
            return;
          }

          ;
          that.beforeSubmit();
        } else {
          that.touchSubmit(e);
        }
      });
    },
    // 隐藏支付弹窗
    hideConfirm: function hideConfirm(e) {
      common.formIdUpdate(e);
      this.setData({
        order_confirm_show: false });

    },
    // 支付前地址分析
    beforeSubmit: function beforeSubmit(e) {
      // 没收货地址，从缓存取到地址
      var that = this;

      if (this.storageAddr) {
        that.setData({
          order_confirm_show: true });


        that.addAddress(function () {
          console.log(6666666666666);
          that.getaddresslist();
        });
      } else {
        if (this.isEditAddr == true) {
          that.editAddress(function () {
            that.setData({
              order_confirm_show: true });

          });
        } else {
          that.setData({
            order_confirm_show: true });

        }
      }
    },
    // 去支付
    touchSubmit: function touchSubmit(e) {

      var that = this;
      var productInfo = that.productInfo;
      var uri = app.getPath.confirmOrder;
      var carturi = app.getPath.confirmCartOrder;

      if (that.consignee && !that.consignee.address_id) {
        var content = '您还未设置收货地址';
        var confimText = '去设置';
        common.showModal(content, confimText, function (res) {
          if (res.confirm) {
            that.newAddress();
          } else {
            return;
          }
        });
      } else {
        common.showLoad(that);

        if (that.selectedGoods.coupons_can_use == 0) {
          that.coupon_id = -1;
        }

        var data = {
          coupon_id: that.coupon_id,
          address_id: that.consignee.address_id,
          // shipping_code: that.data.selectedGoods.shipping_info.code,
          cart_ids: [],
          payment_code: that.selectedGoods.payment_code[0],
          // invoice_content: that.data.invoiceData.companyName == undefined ? '' : that.data.invoiceData.companyName,
          // invoice_type: that.data.invoiceData.type == undefined ? '' : that.data.invoiceData.type,
          // invoice_title: that.data.invoiceData.upId == undefined ? '' : that.data.invoiceData.upId,
          // taxpayer: that.data.invoiceData.taxesCode == undefined ? '' : that.data.invoiceData.taxesCode,
          user_note: that.user_note == undefined ? '' : that.user_note,
          use_balance: that.selectedGoods.use_balance,
          time_atitude: app.dataBase.userAtitude,
          team_order: productInfo[0].team_order ? productInfo[0].team_order : 0,
          channel: productInfo[0].channel ? productInfo[0].channel : 0,
          team_id: productInfo[0].team_id ? productInfo[0].team_id : 0,
          found_id: productInfo[0].found_id ? productInfo[0].found_id : '',
          activity_bargaining_id: productInfo[0].activity_bargaining_id ? productInfo[0].activity_bargaining_id : '',
          activity_bargain_id: productInfo[0].activity_bargain_id ? productInfo[0].activity_bargain_id : '' };


        for (var i in productInfo) {
          if (productInfo[i].cart_id && productInfo[i].cart_id > 0) {
            data.cart_ids.push(productInfo[i].cart_id);
          }
        }

        common.formIdUpdate(e);

        if (!that.isTopaydis) {
          that.isTopaydis = true;

          if (data.cart_ids && data.cart_ids.length > 0) {
            // 从购物车进入
            if (that.orderSn == "") {
              common.ApiGateWayTest(carturi, data, true, function (res) {
                if (res.data.success == 1) {
                  var res = res.data.result;
                  that.orderSn = res.order_id;
                  var payUri = app.getPath.doPay;
                  var payData = {
                    order_id: res.order_id,
                    payment_code: that.selectedGoods.payment_code[0] };

                  that.isTopaydis = false;

                  if (res.status == 1) {
                    common.hideLoad(that);

                    for (var i in that.order_info.firstGoods) {
                      // app.aldstat.sendEvent("支付成功", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {



                    } // app.aldstat.sendEvent("支付成功", {
                    //   "商品名称": that.order_info.secondGoods[i].goods_name
                    // });
                    // 直接用账户余额支付
                    wx.redirectTo({ url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                      that.consignee) + '&payment_code=' + payData.payment_code });

                  } else {
                    common.hideLoad(that); // 下单成功，调用支付

                    common.ApiGateWayTest(payUri, payData, true, function (res) {
                      if (res.data.success == 1) {
                        var data = res.data.result;
                        common.doWechatPay(data, function (res) {
                          for (var i in that.order_info.firstGoods) {
                            // app.aldstat.sendEvent("支付成功", {
                            //   "商品名称": that.order_info.firstGoods[i].goods_name
                            // });
                          }

                          for (var i in that.order_info.secondGoods) {



                          } // app.aldstat.sendEvent("支付成功", {
                          //   "商品名称": that.order_info.secondGoods[i].goods_name
                          // });
                          // wx.redirectTo({
                          //   url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(that.data.consignee) + '&payment_code=' + payData.payment_code,
                          // })
                        }, function (failres) {for (var i in that.order_info.firstGoods) {// app.aldstat.sendEvent("支付失败", {
                            //   "商品名称": that.order_info.firstGoods[i].goods_name
                            // });
                          }

                          for (var i in that.order_info.secondGoods) {



                          } // app.aldstat.sendEvent("支付失败", {
                          //   "商品名称": that.order_info.secondGoods[i].goods_name
                          // });
                          // common.toast("支付失败");
                        }, function (completeres) {// + '&payment_type=true'
                          wx.redirectTo({ url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                            that.consignee) + '&payment_code=' + payData.payment_code });

                        });
                      } else {
                        common.toast(res.data.msg);
                        that.isTopaydis = false;
                        return;
                      }
                    });
                  }
                } else {
                  common.toast(res.data.msg);
                  that.isTopaydis = false;
                  return;
                }
              });
            } else {
              var payUri = app.getPath.doPay;
              var payData = {
                order_id: parseInt(that.orderSn),
                payment_code: that.selectedGoods.payment_code[0] };

              common.hideLoad(that);
              that.isTopaydis = false; // 下单成功，调用支付

              common.ApiGateWayTest(payUri, payData, true, function (res) {
                if (res.data.success == 1) {
                  var data = res.data.result;
                  common.doWechatPay(data, function (res) {
                    for (var i in that.order_info.firstGoods) {
                      // app.aldstat.sendEvent("支付成功", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {



                    } // app.aldstat.sendEvent("支付成功", {
                    //   "商品名称": that.order_info.secondGoods[i].goods_name
                    // });
                    // wx.redirectTo({
                    //   url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(that.data.consignee) + '&payment_code=' + payData.payment_code,
                    // })
                  }, function (failres) {for (var i in that.order_info.firstGoods) {// app.aldstat.sendEvent("支付失败", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {



                    } // app.aldstat.sendEvent("支付失败", {
                    //   "商品名称": that.order_info.secondGoods[i].goods_name
                    // });
                    // common.toast("支付失败");
                  }, function (completeres) {wx.redirectTo({ url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                      that.consignee) + '&payment_code=' + payData.payment_code });

                  });
                } else {
                  common.toast(res.data.msg);
                  that.isTopaydis = false;
                  return;
                }
              });
            }
          } else {
            if (that.orderSn == "" || productInfo[0].team_order == 1 || productInfo[0].team_order == 2) {
              // 从商品详情  立即购买进入
              data['order_product'] = [{
                goods_id: productInfo[i].goods_id,
                sku_key: productInfo[i].sku_key,
                num: productInfo[i].amount }];

              data.order_product = JSON.stringify(data.order_product);
              common.ApiGateWayTest(uri, data, true, function (res) {
                if (res.data.success == 1) {
                  var res = res.data.result;
                  that.orderSn = res.order_id;
                  var payUri = app.getPath.doPay;
                  var payData = {
                    order_id: res.order_id,
                    payment_code: that.selectedGoods.payment_code[0] };

                  common.hideLoad(that);
                  that.isTopaydis = false;

                  if (res.status == 1) {
                    for (var i in that.order_info.firstGoods) {
                      // app.aldstat.sendEvent("支付成功", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {



                    } // app.aldstat.sendEvent("支付成功", {
                    //   "商品名称": that.order_info.secondGoods[i].goods_name
                    // });
                    // 余额支付，实付为0，不走支付接口
                    wx.redirectTo({ url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                      that.consignee) + '&payment_code=' + payData.payment_code });

                  } else {
                    // 走支付接口
                    common.ApiGateWayTest(payUri, payData, true, function (res) {
                      if (res.data.success == 1) {
                        var data = res.data.result;

                        if (productInfo[0].team_order == 1 || productInfo[0].team_order == 2) {
                          var found_id = data.found_id;
                        }

                        common.showLoad(that);
                        common.doWechatPay(data, function (res) {
                          var pickupId = common.getStorageSync('getpickup');

                          if (that.consignee.is_default == 1 && pickupId != that.consignee.pickup_id) {
                            that.getExternal(that.consignee.pickup_id);
                          }

                          for (var i in that.order_info.firstGoods) {
                            // app.aldstat.sendEvent("支付成功", {
                            //   "商品名称": that.order_info.firstGoods[i].goods_name
                            // });
                          }

                          for (var i in that.order_info.secondGoods) {
                            // app.aldstat.sendEvent("支付成功", {
                            //   "商品名称": that.order_info.secondGoods[i].goods_name
                            // });
                          }

                          if (productInfo[0].team_order == 1 || productInfo[0].team_order == 2) {
                            var checkPayUri = app.getPath.checkPay;
                            var checkPayData = {
                              order_id: that.orderSn,
                              payment_code: payData.payment_code };

                            common.ApiGateWayTest(checkPayUri, checkPayData, true, function (resData) {
                              if (resData.data.success == 1) {
                                wx.redirectTo({
                                  url: '../../packageA/groupbuy/groupbuy?found_id=' + resData.data.result.found_id +
                                  '&entryType=external' + '&teamType=' + productInfo[0].team_order });

                                common.hideLoad(that);
                              } else {
                                common.toast("支付失败");
                                common.hideLoad(that);
                              }
                            });
                          } else {
                            wx.redirectTo({
                              url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                              that.consignee) + '&payment_code=' + payData.payment_code });

                          }
                        }, function (failres) {
                          for (var i in that.order_info.firstGoods) {
                            // app.aldstat.sendEvent("支付失败", {
                            //   "商品名称": that.order_info.firstGoods[i].goods_name
                            // });
                          }

                          for (var i in that.order_info.secondGoods) {
                            // app.aldstat.sendEvent("支付失败", {
                            //   "商品名称": that.order_info.secondGoods[i].goods_name
                            // });
                          }

                          if (productInfo[0].team_order == 1 || productInfo[0].team_order == 2) {
                            var checkPayUri = app.getPath.checkPay;
                            var checkPayData = {
                              order_id: that.orderSn,
                              payment_code: payData.payment_code };

                            common.ApiGateWayTest(checkPayUri, checkPayData, true, function (resData) {
                              if (resData.data.success == 1) {
                                wx.redirectTo({
                                  url: '../../packageA/groupbuy/groupbuy?found_id=' + resData.data.result.found_id +
                                  '&entryType=external' + '&teamType=' + productInfo[0].team_order });

                                common.hideLoad(that);
                              } else {
                                common.toast("支付失败");
                                common.hideLoad(that);
                              }
                            });
                          } else {
                            wx.redirectTo({
                              url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                              that.consignee) + '&payment_code=' + payData.payment_code });

                            common.hideLoad(that);
                          }
                        });
                      } else {
                        common.toast(res.data.msg);
                        that.isTopaydis = false;
                        return;
                      }
                    });
                  }
                } else {
                  common.toast(res.data.msg);
                  common.hideLoad(that);
                  that.isTopaydis = false;
                  return;
                }
              });
            } else {
              var payUri = app.getPath.doPay;
              var payData = {
                order_id: parseInt(that.orderSn),
                payment_code: that.selectedGoods.payment_code[0] };

              common.hideLoad(that);
              that.isTopaydis = false; // 走支付接口

              common.ApiGateWayTest(payUri, payData, true, function (res) {
                if (res.data.success == 1) {
                  var data = res.data.result;
                  common.doWechatPay(data, function (res) {
                    for (var i in that.order_info.firstGoods) {
                      // app.aldstat.sendEvent("支付成功", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {



                    } // app.aldstat.sendEvent("支付成功", {
                    //   "商品名称": that.order_info.secondGoods[i].goods_name
                    // });
                    // wx.redirectTo({
                    //   url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(that.data.consignee) + '&payment_code=' + payData.payment_code,
                    // })
                  }, function (failres) {for (var i in that.order_info.firstGoods) {// app.aldstat.sendEvent("支付失败", {
                      //   "商品名称": that.order_info.firstGoods[i].goods_name
                      // });
                    }

                    for (var i in that.order_info.secondGoods) {
                      app.aldstat.sendEvent("支付失败", {
                        "商品名称": that.order_info.secondGoods[i].goods_name });

                    } // common.toast("支付失败");

                  }, function (completeres) {
                    wx.redirectTo({
                      url: './paymentStatus/paymentStatus?order_id=' + payData.order_id + '&consignee=' + JSON.stringify(
                      that.consignee) + '&payment_code=' + payData.payment_code });

                  });
                } else {
                  common.toast(res.data.msg);
                  that.isTopaydis = false;
                  return;
                }
              });
            }
          }
        }
      }

    },

    // 返回上级弹窗
    leaveModal: function leaveModal() {
      // if (this.data.showGetBonusModal == 0) {
      //   this.data.showGetBonusModal = 1;
      // } else {
      //   this.data.showGetBonusModal = 0;
      // }
      var animation = wx.createAnimation({
        duration: 300,
        timingFunction: "linear",
        delay: 0 });

      animation.translateY(300).opacity(1).step();
      this.setData({
        animationData: animation.export() });


      if (this.showGetBonusModal == 1) {
        this.setData({
          showGetBonusModal: false,
          showBonusModal: true });

      }

      setTimeout(function () {
        animation.translateY(0).step();
        this.setData({
          animationData: animation });


        if (this.showGetBonusModal == 0) {
          this.setData({
            showBonusModal: true });

        }
      }.bind(this), 200);
    },

    // 阻止父级冒泡
    stopMove: function stopMove() {
      return true;
    },
    cashgift_jump_type: function cashgift_jump_type(jump_type) {
      if (jump_type) {
        this.getModalBonus();
      } else {
        this.setModalBonus();
      }
    },
    setData: function setData(obj) {
      var that = this;
      var keys = [];
      var val, data;
      Object.keys(obj).forEach(function (key) {
        keys = key.split('.');
        val = obj[key];
        data = that.$data;
        keys.forEach(function (key2, index) {
          that[key] = obj[key];
        });
      });
    } } };exports.default = _default;

/***/ }),

/***/ 147:
/*!*****************************************************************************************************************!*\
  !*** C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=style&index=0&lang=css& ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=style&index=0&lang=css& */ 148);
/* harmony import */ var _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_Program_Files_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_confirm_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 148:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/confirm/confirm.vue?vue&type=style&index=0&lang=css& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

},[[141,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/confirm/confirm.js.map