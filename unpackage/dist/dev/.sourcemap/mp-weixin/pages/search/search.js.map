{"version":3,"sources":["webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?0cac","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?3533","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?73b6","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?0354","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?5f1f","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue?38a0"],"names":["app","getApp","globalData","common","require","data","focus","hotKeyShow","historyKeyShow","searchValue","page","shopList","historyKeyList","hotKeyList","page_size","reachBottom","hotWord","keyword","showEmpty","sort","hotAndHistoryHidden","iconUrl","dataBase","iconURL","hiddenTitle","ac_load_btn","priceSort","placeholder","components","goodlist","props","onLoad","options","keyWord","setData","getHotWord","getHistroyList","onPullDownRefresh","searchProductData","onReachBottom","key","methods","goHome","e","wx","switchTab","url","getStorageSync","doKeySearch","currentTarget","dataset","length","getOrSetSearchHistory","filter","that","type","doSearch","searchKey","replace","toast","getStorage","res","num","i","push","unshift","setStorage","historyList","searchValueInput","value","detail","cancelSearch","clearHistory","showModal","confirm","uri","getPath","gethotword","is_default","ApiGateWayTest","success","result","showLoad","searchlist","sort_asc","stopPullDownRefresh","concat","hideLoad","obj","keys","val","Object","forEach","split","$data","key2","index"],"mappings":"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","file":"pages/search/search.js","sourcesContent":["import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=19c01c5c&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('19c01c5c', component.options)\n    } else {\n      api.reload('19c01c5c', component.options)\n    }\n    module.hot.accept(\"./search.vue?vue&type=template&id=19c01c5c&\", function () {\n      api.rerender('19c01c5c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=19c01c5c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar app = getApp().globalData;\r\nconst common = require(\"../../utils/common.js\"); // pages/search/search.js\r\nimport goodlist from \"../../components/goodList/goodList\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      focus: true,\r\n      hotKeyShow: true,\r\n      historyKeyShow: true,\r\n      searchValue: '',\r\n      page: 1,\r\n      shopList: [],\r\n      historyKeyList: [],\r\n      hotKeyList: [],\r\n      page_size: 10,\r\n      reachBottom: false,\r\n      hotWord: [],\r\n      keyword: '',\r\n      showEmpty: false,\r\n      sort: 'normal',\r\n      hotAndHistoryHidden: false,\r\n      iconUrl: app.dataBase.iconURL,\r\n      hiddenTitle: true,\r\n      ac_load_btn: true,\r\n      priceSort: 'asc',\r\n      placeholder: \"\"\r\n    };\r\n  },\r\n\r\n  components: {\r\n    goodlist\r\n  },\r\n  props: {},\r\n  onLoad: function (options) {\r\n    // if (options == undefined || options.keyWord == undefined) {\r\n    //   common.toast(\"请求参数错误\");\r\n    //   return;\r\n    // }\r\n    if (options.keyWord != '') {\r\n      this.setData({\r\n        keyword: options.keyWord,\r\n        placeholder: options.keyWord\r\n      });\r\n    }\r\n\r\n    this.getHotWord();\r\n    this.getHistroyList();\r\n  },\r\n  onPullDownRefresh: function () {\r\n    this.setData({\r\n      page: 1,\r\n      shopList: []\r\n    });\r\n    this.searchProductData('downRefresh');\r\n  },\r\n  onReachBottom: function () {\r\n    //下拉加载更多多...\r\n    var key = this.searchValue;\r\n    this.setData({\r\n      page: this.page + 1,\r\n      keyword: key\r\n    });\r\n\r\n    if (this.reachBottom) {\r\n      this.searchProductData();\r\n    }\r\n  },\r\n  methods: {\r\n    goHome: function (e) {\r\n      wx.switchTab({\r\n        url: '../index/index'\r\n      });\r\n    },\r\n    getHistroyList: function () {\r\n      var data = common.getStorageSync('historyKeyList') || null;\r\n      this.setData({\r\n        historyKeyList: data\r\n      });\r\n    },\r\n    doKeySearch: function (e) {\r\n      var key = e.currentTarget.dataset.key;\r\n      this.setData({\r\n        searchValue: key,\r\n        hotKeyShow: false,\r\n        historyKeyShow: false,\r\n        shopList: [],\r\n        page: 1,\r\n        hotAndHistoryHidden: true,\r\n        keyword: key\r\n      });\r\n      this.shopList.length = 0;\r\n      this.getOrSetSearchHistory(key);\r\n      this.searchProductData();\r\n    },\r\n    //筛选切换\r\n    filter: function (e) {\r\n      var that = this;\r\n\r\n      if (!that.ac_load_btn) {\r\n        return false;\r\n      }\r\n\r\n      var type = e.currentTarget.dataset.type;\r\n      that.setData({\r\n        sort: type\r\n      });\r\n\r\n      if (type == 'price') {\r\n        this.priceSort = this.priceSort == 'asc' ? 'desc' : 'asc';\r\n      }\r\n\r\n      that.doSearch();\r\n    },\r\n    // 执行搜索事件\r\n    doSearch: function () {\r\n      var searchKey = this.searchValue.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n\r\n      if (searchKey == '') {\r\n        common.toast('请输入您需要搜索的商品');\r\n        return;\r\n      }\r\n\r\n      if (!searchKey && !this.keyword) {\r\n        this.setData({\r\n          focus: true,\r\n          hotAndHistoryHidden: false\r\n        });\r\n        return;\r\n      } else if (!searchKey && this.keyword) {\r\n        searchKey = this.keyword;\r\n        this.setData({\r\n          searchValue: this.keyword\r\n        });\r\n      }\r\n\r\n      this.setData({\r\n        keyword: searchKey,\r\n        hotAndHistoryHidden: true,\r\n        shopList: [],\r\n        page: 1\r\n      });\r\n      this.searchProductData();\r\n      this.getOrSetSearchHistory(searchKey);\r\n    },\r\n    // 获取历史搜索记录\r\n    getOrSetSearchHistory: function (key) {\r\n      var that = this;\r\n      common.getStorage({\r\n        key: 'historyKeyList'\r\n      }, function (res) {\r\n        var data = res.data;\r\n        var historyKeyList = [];\r\n        var num = 1; //只取9个不包括key的最新数据\r\n\r\n        for (var i in data) {\r\n          if (data[i] != key && num < 10) {\r\n            num++;\r\n            historyKeyList.push(data[i]);\r\n          }\r\n        }\r\n\r\n        historyKeyList.unshift(key);\r\n        common.setStorage({\r\n          key: \"historyKeyList\",\r\n          data: historyKeyList\r\n        }, function (res) {\r\n          that.setData({\r\n            historyKeyList: historyKeyList\r\n          });\r\n        });\r\n      }, //第一次storage中没有key时返回失败。\r\n      function (res) {\r\n        var historyList = [];\r\n        historyList.unshift(key);\r\n        common.setStorage({\r\n          key: 'historyKeyList',\r\n          data: historyList\r\n        });\r\n      });\r\n    },\r\n    // 获取搜索内容\r\n    searchValueInput: function (e) {\r\n      var value = e.detail.value;\r\n      this.setData({\r\n        searchValue: value,\r\n        placeholder: '请输入您的搜索内容'\r\n      });\r\n\r\n      if (!value && this.shopList.length == 0) {\r\n        this.setData({\r\n          hotKeyShow: true,\r\n          historyKeyShow: true,\r\n          keyword: ''\r\n        });\r\n      }\r\n    },\r\n    // 清除搜索内容\r\n    cancelSearch: function () {\r\n      this.setData({\r\n        searchValue: '',\r\n        shopList: [],\r\n        showEmpty: false,\r\n        hotAndHistoryHidden: false,\r\n        hiddenTitle: true,\r\n        keyword: '',\r\n        placeholder: '请输入您的搜索内容'\r\n      });\r\n      this.getHistroyList();\r\n    },\r\n    // 清除搜索历史记录\r\n    clearHistory: function () {\r\n      var data = [];\r\n      var that = this;\r\n      common.showModal('是否清空历史记录？', '清空', function (res) {\r\n        if (res.confirm) {\r\n          // 清空\r\n          common.setStorage({\r\n            key: 'historyKeyList',\r\n            data: data\r\n          }, function (res) {\r\n            that.setData({\r\n              historyKeyList: data\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 获取热门搜索词条\r\n    getHotWord: function () {\r\n      var that = this;\r\n      var uri = app.getPath.gethotword;\r\n      var data = {\r\n        is_default: 0\r\n      };\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        if (res && res.data) {\r\n          if (res.data.success == 1) {\r\n            that.setData({\r\n              hotWord: res.data.result.data\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 搜索api，获取接口数据列表\r\n    searchProductData: function (type) {\r\n      var that = this;\r\n      common.showLoad(that); // 关闭开关\r\n\r\n      that.ac_load_btn = false;\r\n      var uri = app.getPath.searchlist;\r\n      var data = {\r\n        page: this.page,\r\n        page_size: this.page_size,\r\n        keyword: this.keyword,\r\n        sort: this.sort\r\n      };\r\n      data.sort_asc = this.sort == 'price' ? this.priceSort : '';\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        if (res && res.data) {\r\n          if (res.data.success == 1) {\r\n            var data = res.data.result.data;\r\n\r\n            if (type == 'downRefresh') {\r\n              wx.stopPullDownRefresh();\r\n            }\r\n\r\n            if (data.length < that.page_size) {\r\n              that.setData({\r\n                reachBottom: false\r\n              });\r\n            } else {\r\n              that.setData({\r\n                reachBottom: true\r\n              });\r\n            }\r\n\r\n            if (data.length > 0) {\r\n              // var list = [];\r\n              // var dataList = [];\r\n              // for(var i in data){\r\n              //   list.push(data[i]);\r\n              //   if((Number(i)+1)%2 == 0){\r\n              //     dataList.push(list);\r\n              //     list = [];\r\n              //   }\r\n              //   if(i == data.length-1){\r\n              //     if(list.length > 0){\r\n              //       dataList.push(list);\r\n              //     }\r\n              //   }\r\n              // }\r\n              that.setData({\r\n                shopList: that.shopList.concat(data),\r\n                showEmpty: false,\r\n                hiddenTitle: false\r\n              });\r\n            } else if (that.shopList.length <= 0) {\r\n              that.setData({\r\n                showEmpty: true,\r\n                hiddenTitle: true\r\n              });\r\n            }\r\n          } else if (res.data.success == 0) {\r\n            that.setData({\r\n              reachBottom: false\r\n            });\r\n          }\r\n        } else {\r\n          common.toast('网络加载错误，请稍后重试');\r\n        }\r\n\r\n        common.hideLoad(that); // 打开开关\r\n\r\n        that.ac_load_btn = true;\r\n        common.hideLoad(that);\r\n      });\r\n    },\r\n    setData: function (obj) {\r\n      let that = this;\r\n      let keys = [];\r\n      let val, data;\r\n      Object.keys(obj).forEach(function (key) {\r\n        keys = key.split('.');\r\n        val = obj[key];\r\n        data = that.$data;\r\n        keys.forEach(function (key2, index) {\r\n          that[key] = obj[key];\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}