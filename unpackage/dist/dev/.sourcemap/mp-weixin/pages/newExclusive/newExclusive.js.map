{"version":3,"sources":["webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?ce09","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?170f","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?6f7a","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?2d83","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?91ec","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue?dc2b"],"names":["app","getApp","globalData","common","require","event","data","iconURL","dataBase","indexModel","productId","itemData","showSKUstatus","optionalAttrs","skuImages","bannerItem","buynum","firstIndex","choosed_sku","cartAmount","undel","unadd","isPriceEqual","canPurchase","confirmData","isShowGoHome","entryData","share_data","animationData","showModalStatus","buy_now","productid","showfwModalStatus","showShareModalStatus","showBonusModal","indicatorDots","brandID","skuSvipCurrent","skuCurrent","sku_price","min_sku_price","sku_svip_price","min_sku_svip_price","currentStock","hasDefaultSKU","sumbitName","components","goodlist","props","onLoad","options","that","entryType","setData","pickupId","getStorageSync","atitude","pickup_id","getExternal","then","firstlaunchApp","setStorageSync","checkSessionKey","on","getConfigureIndexModel","getShare","onShareAppMessage","res","pickup","title","share_title","path","imageUrl","share_img","methods","uri","getPath","getpickup","Promise","resolve","reject","ApiGateWayTest","success","console","log","result","cities","pick_up","setStorage","key","pickup_name","pickup_address","pickup_contact","pickup_phone","pickup_type","warehouse_id","city_name","position","indexShare","indexmodel","new_user","toast","lists","forEach","model","item","type","route","url","total","param","good","parseInt","money","goodscss","goods","rowFormat","colNum","arr","FormatArr","rowNum","length","i","push","Array","j","undefined","gotoHome","wx","switchTab","goToProduct","e","goodsid","currentTarget","dataset","navigateTo","toCart","adclose","ad_id","is_close","akeyToGet","isOldUser","goRegister","target","coupon_id","id","addCoupon","state_desc","state","setModalStatus","animation","createAnimation","duration","timingFunction","delay","translateY","opacity","step","export","setTimeout","bind","isnewpersongoods","goods_id","product_id","sku_key","addShopCart","buynow","addCart","loadProductDetail","checkCanPurchase","product","currentAttrs","properties","_addcart","invdata","amount","formIdUpdate","invurl","ret","cart_num","msg","stock","split","sort","a","b","join","attrs","addCartnew","showModal","confirm","nowPurchase","nowPurchaseSub","skuEnough","pre_info","is_pre","is_enough","showLoad","goodsInfo","skuAmounturi","getSkuAmount","statusCode","productlist","content","goods_content","introContent","detail_explain","islike","is_liked","current_price","shop_price","price","market_price","gallery","min_buy_amount","cat_id","setDefaultSKU","isPriceEqualFun","hideLoad","defaultAttrIds","defaultAttrStock","maybeStock","effectiveStock","property","is_multiselect","multiCartesian","_goods_attr","_min_sku_price","_min_sku_svip_price","hasDefaultFlag","ids","is_goods_number","is_on_sale","ind","len","_thisStock","Object","parseFloat","toFixed","set_choosed_sku","isin_count","k","isin","RegExp","test","header_img","setAttrsClass","goods_name","sku_key_name","sku_img","attrValueselest","attr","concat","index","indexOf","splice","inStock","String","filter","self","class","attrArr","currentAyyrsJn","stockDisplyKey","s","required","pre_time","svip_price","changeNum","alphaBeta","max_buy_amount","num","obj","keys","val","$data","key2"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2F;AAC3B;AACL;AACa;;;AAGxE;AACoJ;AACpJ,gBAAgB,sJAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,upBAAG,EAAC,C;;;;;;;;;;;;wFCA1sB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"pages/newExclusive/newExclusive.js","sourcesContent":["import { render, staticRenderFns } from \"./newExclusive.vue?vue&type=template&id=3cc3db5c&\"\nimport script from \"./newExclusive.vue?vue&type=script&lang=js&\"\nexport * from \"./newExclusive.vue?vue&type=script&lang=js&\"\nimport style0 from \"./newExclusive.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3cc3db5c', component.options)\n    } else {\n      api.reload('3cc3db5c', component.options)\n    }\n    module.hot.accept(\"./newExclusive.vue?vue&type=template&id=3cc3db5c&\", function () {\n      api.rerender('3cc3db5c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/newExclusive/newExclusive.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./newExclusive.vue?vue&type=template&id=3cc3db5c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./newExclusive.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./newExclusive.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n// pages/newExclusive/newExclusive.js\r\nvar app = getApp().globalData;\r\nvar common = require(\"../../utils/common.js\");\r\nvar event = require(\"../../utils/event.js\");\r\nimport goodlist from \"../../components/goodList/goodList\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      iconURL: app.dataBase.iconURL,\r\n      indexModel: [],\r\n      // 商详\r\n      productId: 0,\r\n      itemData: {},\r\n      showSKUstatus: 0,\r\n      optionalAttrs: {},\r\n      skuImages: '',\r\n      bannerItem: [],\r\n      buynum: 1,\r\n      // 属性选择\r\n      firstIndex: -1,\r\n      choosed_sku: '',\r\n      cartAmount: 0,\r\n      // 弹窗SKU，不能减不能加\r\n      undel: true,\r\n      unadd: false,\r\n      // SKU的VIP价格和非SVIP是否相同\r\n      isPriceEqual: false,\r\n      canPurchase: false,\r\n      confirmData: {},\r\n      isShowGoHome: false,\r\n      entryData: \"\",\r\n      share_data: \"\",\r\n      animationData: \"\",\r\n      showModalStatus: false,\r\n      buy_now: \"\",\r\n      productid: 0,\r\n      showfwModalStatus: false,\r\n      showShareModalStatus: false,\r\n      showBonusModal: false,\r\n      indicatorDots: \"\",\r\n      brandID: \"\",\r\n      skuSvipCurrent: \"\",\r\n      skuCurrent: \"\",\r\n      sku_price: \"\",\r\n      min_sku_price: \"\",\r\n      sku_svip_price: \"\",\r\n      min_sku_svip_price: \"\",\r\n      currentStock: \"\",\r\n      hasDefaultSKU: \"\",\r\n      sumbitName: \"\"\r\n    };\r\n  },\r\n\r\n  components: {\r\n    goodlist\r\n  },\r\n  props: {},\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var that = this; // 从外部分享进入时，显示左上角回到首页  改动带external时为内部进入携带参数，外部进入不带参数\r\n\r\n    if (options && options.entryType && options.entryType == 'external') {\r\n      this.setData({\r\n        isShowGoHome: false\r\n      });\r\n    } else {\r\n      this.setData({\r\n        isShowGoHome: true\r\n      });\r\n    } // 外部带商品店铺\r\n\r\n\r\n    this.setData({\r\n      entryData: options\r\n    });\r\n    var options = that.entryData;\r\n    var pickupId = common.getStorageSync('getpickup'); // 判断是否第一次进入 且是从外部进入，如二维码扫码 && app.firstlaunchApp\r\n\r\n    if (options && (options.atitude || options.pickup_id) && !pickupId) {\r\n      that.getExternal(options.pickup_id).then(function () {\r\n        // 关闭开关，让app知道已经不是第一次进入当前页\r\n        app.firstlaunchApp = false; // 清空data内携带参数\r\n\r\n        that.entryData = {}; // 外部已带经纬度定位，无需再调用定位接口，所以将缓存定位改为真，让页面可以显示\r\n\r\n        common.setStorageSync('authSetting', {\r\n          'scope.userLocation': true\r\n        });\r\n      });\r\n    }\r\n\r\n    if (!app.checkSessionKey) {\r\n      event.on('checkSessionKey', this, function (data) {\r\n        this.getConfigureIndexModel();\r\n      });\r\n    } else {\r\n      this.getConfigureIndexModel();\r\n    }\r\n\r\n    this.getShare();\r\n  },\r\n\r\n  onShareAppMessage(res) {\r\n    var that = this;\r\n    var pickup = common.getStorageSync('getpickup');\r\n    return {\r\n      title: that.share_data.share_title,\r\n      path: '/pages/newExclusive/newExclusive?pickup_id=' + pickup.pickup_id,\r\n      imageUrl: that.share_data.share_img\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 从外部二维码扫码，带经纬度和外部标识external\r\n    getExternal: function (pickup_id) {\r\n      var that = this;\r\n      var uri = app.getPath.getpickup;\r\n      var data = {\r\n        pickup_id: pickup_id\r\n      };\r\n      return new Promise(function (resolve, reject) {\r\n        // 获取提货点\r\n        common.ApiGateWayTest(uri, data, true, function (res) {\r\n          if (res && res.data && res.data.success == 1) {\r\n            console.log(res.data.result.cities.pick_up);\r\n            var res = res.data.result.cities.pick_up;\r\n            common.setStorage({\r\n              key: 'getpickup',\r\n              data: {\r\n                'pickup_id': res.pickup_id,\r\n                'cityName': res.pickup_name,\r\n                'pickup_address': res.pickup_address,\r\n                'pickup_contact': res.pickup_contact,\r\n                'pickup_phone': res.pickup_phone,\r\n                'pickup_type': res.pickup_type\r\n              }\r\n            }, function (res) {\r\n              resolve('获取id成功');\r\n            });\r\n            common.setStorage({\r\n              key: 'city',\r\n              data: {\r\n                'pickup_id': res.pickup_id,\r\n                'warehouse_id': res.warehouse_id,\r\n                'cityName': res.city_name,\r\n                'is_pick_up': 1\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    // 获取分享信息\r\n    getShare: function (position) {\r\n      var that = this;\r\n      var uri = app.getPath.indexShare;\r\n      var data = {\r\n        position: 2\r\n      };\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        if (res && res.data && res.data.success == 1) {\r\n          console.log(res);\r\n          that.setData({\r\n            share_data: res.data.result\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getConfigureIndexModel: function () {\r\n      var that = this;\r\n      var uri = app.getPath.indexmodel;\r\n      var data = {\r\n        position: 2\r\n      };\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        if (res && res.data && res.data.success == 1) {\r\n          if (res.data.result.new_user == 0) {\r\n            common.toast('你已经是老用户啦，无法享受当前福利喔~');\r\n          }\r\n\r\n          var indexModel = res.data.result.lists;\r\n          indexModel.forEach(function (model) {\r\n            model.forEach(function (item) {\r\n              // 增加优惠券总金额\r\n              if (item.type == 1 && item.route.url == \"coupon\") {\r\n                var total = 0;\r\n                item.route.param.forEach(function (good) {\r\n                  total += parseInt(good.money);\r\n                });\r\n                item.route.total = total;\r\n              } // 格式化商品\r\n\r\n\r\n              if (item.type == 3 && item.goodscss == 2) {\r\n                item.goods = that.rowFormat(3, item.goods);\r\n              }\r\n            });\r\n          }); // console.log(indexModel)\r\n\r\n          that.setData({\r\n            indexModel\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n       * 格式化一维数组为二维数组\r\n       * colNum: 列数\r\n       * arr：传入的总数组数\r\n       * **/\r\n    rowFormat(colNum, arr) {\r\n      let FormatArr = [];\r\n      let rowNum = arr.length / colNum;\r\n\r\n      for (var i = 0; i < rowNum; i++) {\r\n        FormatArr.push(new Array());\r\n\r\n        for (var j = i * colNum; j < colNum * (i + 1); j++) {\r\n          if (arr[j] != undefined) {\r\n            FormatArr[i].push(arr[j]);\r\n          }\r\n        }\r\n      }\r\n\r\n      return FormatArr;\r\n    },\r\n\r\n    // 返回首页\r\n    gotoHome: function () {\r\n      wx.switchTab({\r\n        url: '/pages/index/index'\r\n      });\r\n    },\r\n\r\n    // 跳转商品页\r\n    goToProduct(e) {\r\n      var goodsid = e.currentTarget.dataset.goodsid;\r\n      wx.navigateTo({\r\n        url: '/pages/product/product?entryType=external&productId=' + goodsid\r\n      });\r\n    },\r\n\r\n    // 跳转购物车\r\n    toCart() {\r\n      wx.switchTab({\r\n        url: '/pages/cart/cart'\r\n      });\r\n    },\r\n\r\n    adclose: function (ad_id, is_close) {\r\n      var that = this;\r\n      var uri = app.getPath.adclose;\r\n      var data = {\r\n        ad_id,\r\n        is_close\r\n      };\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        // console.log(res.data.result)\r\n        that.getConfigureIndexModel();\r\n      });\r\n    },\r\n\r\n    // 一键领取\r\n    akeyToGet(e) {\r\n      // console.log(e.target.dataset.ad_id);\r\n      // return\r\n      // 跳转登录\r\n      var isOldUser = common.getStorageSync('isOldUser');\r\n\r\n      if (!app.checkSessionKey || isOldUser == 2) {\r\n        common.goRegister();\r\n        return false;\r\n      }\r\n\r\n      var that = this;\r\n      var param = e.target.dataset.param;\r\n      var ad_id = e.target.dataset.ad_id;\r\n      var coupon_id = [];\r\n      param.forEach(function (item) {\r\n        coupon_id.push(item.id);\r\n      });\r\n      var uri = app.getPath.addCoupon;\r\n      var data = {\r\n        coupon_id: coupon_id\r\n      };\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        if (res && res.data && res.data.success == 1) {\r\n          var result = res.data.result;\r\n          common.toast(result.state_desc);\r\n\r\n          if (result.state == 0) {\r\n            that.adclose(ad_id, 1);\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // SKU弹窗\r\n    setModalStatus: function (type) {\r\n      if (this.showSKUstatus == 0) {\r\n        this.showSKUstatus = 1;\r\n      } else {\r\n        this.showSKUstatus = 0;\r\n      }\r\n\r\n      var animation = wx.createAnimation({\r\n        duration: 300,\r\n        timingFunction: \"linear\",\r\n        delay: 0\r\n      });\r\n      animation.translateY(300).opacity(1).step();\r\n      this.setData({\r\n        animationData: animation.export()\r\n      });\r\n\r\n      if (this.showSKUstatus == 1) {\r\n        this.setData({\r\n          showModalStatus: true\r\n        });\r\n      }\r\n\r\n      setTimeout(function () {\r\n        animation.translateY(0).step();\r\n        this.setData({\r\n          animationData: animation\r\n        });\r\n\r\n        if (this.showSKUstatus == 0) {\r\n          this.setData({\r\n            showModalStatus: false\r\n          });\r\n        }\r\n      }.bind(this), 200);\r\n    },\r\n    // 是否购物车有新人商品\r\n    isnewpersongoods: function (goods_id, product_id) {\r\n      var uri = app.getPath.isnewpersongoods;\r\n      var data = {\r\n        goods_id: goods_id,\r\n        sku_key: product_id\r\n      };\r\n      return new Promise(function (resolve, reject) {\r\n        common.ApiGateWayTest(uri, data, true, function (res) {\r\n          var data = res.data;\r\n\r\n          if (data.success == 1) {\r\n            var result = data.result.result;\r\n            resolve(result);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    //添加到购物车\r\n    addShopCart: function (e) {\r\n      // 跳转登录\r\n      var isOldUser = common.getStorageSync('isOldUser');\r\n\r\n      if (!app.checkSessionKey || isOldUser == 2) {\r\n        common.goRegister();\r\n        return false;\r\n      }\r\n\r\n      var that = this;\r\n      console.log(e); // 判断sku是否立即购买\r\n\r\n      this.setData({\r\n        buy_now: e.target.dataset.buynow\r\n      });\r\n\r\n      if (this.productid == e.target.dataset.productid) {\r\n        addCart(e);\r\n      } else {\r\n        this.loadProductDetail(e).then(function () {\r\n          addCart(e);\r\n        });\r\n      }\r\n\r\n      function addCart(e) {\r\n        if (!that.checkCanPurchase()) return;\r\n        var product = that.itemData;\r\n        var type = e.currentTarget.dataset.type; // type == 'addcart' && \r\n\r\n        if (that.currentAttrs.length == product.properties.length) {\r\n          // 验证库存\r\n          var product_id = '';\r\n\r\n          for (var i in product.stock) {\r\n            var stock = product.stock[i].key;\r\n            stock = stock.split('_');\r\n            stock.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n            stock = stock.join('_');\r\n            var attrs = that.currentAttrs.join('_');\r\n\r\n            if (attrs == stock) {\r\n              product_id = product.stock[i].key;\r\n              break;\r\n            }\r\n          } // 加入购物车前判断是否新人商品且是否替换新人商品\r\n\r\n\r\n          var invurl = '';\r\n          that.isnewpersongoods(product.goods_id, product_id).then(function (res) {\r\n            if (res) {\r\n              invurl = app.getPath.addCartnew;\r\n              common.showModal('是否替换新人商品', '确定', function (res) {\r\n                if (res.confirm) {\r\n                  _addcart();\r\n                }\r\n              });\r\n            } else {\r\n              invurl = app.getPath.addCart;\r\n\r\n              _addcart();\r\n            }\r\n          });\r\n\r\n          function _addcart() {\r\n            // var invurl = app.getPath.addCart;\r\n            // if (product.pre_info && product.pre_info.is_pre == 1) {\r\n            //   invurl = app.getPath.addCart;\r\n            // }\r\n            var invdata = {\r\n              goods_id: product.goods_id,\r\n              sku_key: product_id,\r\n              amount: that.buynum\r\n            };\r\n            // app.aldstat.sendEvent(\"加入购物车\", {\r\n            //   \"商品名称\": that.itemData.report.goods_name,\r\n            //   \"用户名\": that.itemData.report.nick_name\r\n            // });\r\n            common.formIdUpdate(e);\r\n            common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n              if (!ret) return;\r\n\r\n              if (ret.data.success != 0) {\r\n                that.currentAttrs = [];\r\n                that.setData({\r\n                  cartAmount: ret.data.result.cart_num,\r\n                  productid: 0\r\n                });\r\n                common.toast(ret.data.msg);\r\n\r\n                if (type == 'bottomcart') {\r\n                  // that.setModalStatus(e);\r\n                  that.setData({\r\n                    showModalStatus: false,\r\n                    showSKUstatus: 0\r\n                  });\r\n                }\r\n              } else {\r\n                common.toast(ret.data.msg);\r\n                return;\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          // type != 'addcart' || \r\n          if (that.showSKUstatus == 0) {\r\n            that.setModalStatus(type);\r\n            that.setData({\r\n              showfwModalStatus: false,\r\n              showShareModalStatus: false,\r\n              showBonusModal: false\r\n            });\r\n          } else {\r\n            common.toast('请选择商品款式');\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 立即购买\r\n    nowPurchase: function (e) {\r\n      var that = this; // 跳转登录\r\n\r\n      var isOldUser = common.getStorageSync('isOldUser');\r\n\r\n      if (!app.checkSessionKey || isOldUser == 2) {\r\n        common.goRegister();\r\n        return false;\r\n      } // 判断sku是否立即购买\r\n\r\n\r\n      this.setData({\r\n        buy_now: e.target.dataset.buynow\r\n      });\r\n\r\n      if (that.productid == e.target.dataset.productid) {\r\n        nowPurchaseSub(e);\r\n      } else {\r\n        that.loadProductDetail(e).then(function () {\r\n          nowPurchaseSub(e);\r\n        });\r\n      } // console.log(1)\r\n\r\n\r\n      function nowPurchaseSub(e) {\r\n        if (!that.checkCanPurchase()) return;\r\n        var product = that.itemData; // that.setData({\r\n        //   buy_now: 1\r\n        // })\r\n\r\n        if (that.currentAttrs.length == product.properties.length) {\r\n          // 验证库存\r\n          var product_id = '';\r\n\r\n          for (var i in product.stock) {\r\n            var stock = product.stock[i].key;\r\n            stock = stock.split('_');\r\n            stock.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n            stock = stock.join('_');\r\n            var attrs = that.currentAttrs.join('_');\r\n\r\n            if (attrs == stock) {\r\n              product_id = product.stock[i].key;\r\n              break;\r\n            }\r\n          }\r\n\r\n          var invurl = app.getPath.skuEnough;\r\n\r\n          if (product.pre_info && product.pre_info.is_pre == 1) {\r\n            invurl = app.getPath.skuEnough;\r\n          }\r\n\r\n          var invdata = {\r\n            goods_id: product.goods_id,\r\n            sku_key: product_id,\r\n            amount: that.buynum\r\n          };\r\n          // app.aldstat.sendEvent(\"立即购买\", {\r\n          //   \"商品名称\": that.itemData.report.goods_name,\r\n          //   \"用户名\": that.itemData.report.nick_name\r\n          // });\r\n          common.formIdUpdate(e);\r\n          common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n            if (!ret) return;\r\n\r\n            if (ret.data.result.is_enough != 1) {\r\n              common.toast(ret.data.result.msg);\r\n              return;\r\n            } else {\r\n              that.currentAttrs = []; // showSKUstatus 0关闭  1展开  重置为关闭\r\n\r\n              that.setData({\r\n                showModalStatus: false,\r\n                showSKUstatus: 0,\r\n                cartAmount: ret.data.result.cart_num,\r\n                productid: 0\r\n              });\r\n              wx.navigateTo({\r\n                url: '/pages/confirm/confirm'\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          if (that.showSKUstatus == 0) {\r\n            that.setModalStatus();\r\n            that.setData({\r\n              showfwModalStatus: false,\r\n              showShareModalStatus: false,\r\n              showBonusModal: false\r\n            });\r\n          } else {\r\n            common.toast('请选择商品款式');\r\n          }\r\n        } // 立即购买的缓存\r\n\r\n\r\n        common.setStorage({\r\n          key: \"nowPay\",\r\n          data: that.confirmData\r\n        });\r\n      }\r\n    },\r\n    // 商品详情数据获取\r\n    loadProductDetail: function (e) {\r\n      var productid = e.target.dataset.productid;\r\n      this.setData({\r\n        productid: e.target.dataset.productid\r\n      });\r\n      var that = this;\r\n      common.showLoad(that);\r\n      var uri = app.getPath.goodsInfo;\r\n      var skuAmounturi = app.getPath.getSkuAmount;\r\n      var data = {\r\n        goods_id: productid\r\n      };\r\n      return new Promise(function (resolve, reject) {\r\n        common.ApiGateWayTest(uri, data, true, function (res) {\r\n          if (res.statusCode == 200) {\r\n            var productlist = res.data.result; // productlist.min_buy_amount = productlist.min_buy_amount ? productlist.min_buy_amount : 1;\r\n\r\n            var content = productlist.goods_content;\r\n            var introContent = productlist.detail_explain;\r\n            var islike = productlist.is_liked;\r\n            productlist.current_price = productlist.shop_price;\r\n            productlist.price = productlist.market_price; // WxParse.wxParse('content', 'html', content, that, 0);\r\n            // WxParse.wxParse('introContent', 'html', introContent, that, 0);\r\n\r\n            that.setData({\r\n              itemData: productlist,\r\n              bannerItem: productlist.gallery,\r\n              indicatorDots: productlist.gallery.length > 1 ? true : false,\r\n              buynum: productlist.min_buy_amount,\r\n              // isLike: islike,\r\n              brandID: productlist.cat_id,\r\n              skuSvipCurrent: productlist.shop_price,\r\n              skuCurrent: productlist.market_price\r\n            });\r\n            that.setDefaultSKU(productlist); // that.loadipRecommend();\r\n            // that.getGoodsRecommend();\r\n\r\n            that.isPriceEqualFun();\r\n            common.hideLoad(that);\r\n          } else {\r\n            common.hideLoad(that);\r\n            common.toast(\"获取购物车数量失败\");\r\n          }\r\n\r\n          resolve('获取商详信息');\r\n        });\r\n        common.ApiGateWayTest(skuAmounturi, '', true, function (res) {\r\n          if (res.statusCode == 200) {\r\n            that.setData({\r\n              cartAmount: res.data.result.cart_num\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    //设置默认SKU\r\n    setDefaultSKU: function (product) {\r\n      // product 请求到的数据\r\n      var defaultAttrIds = [];\r\n      var defaultAttrStock = null;\r\n      var maybeStock = [];\r\n      var effectiveStock = []; // 得到SKU组合的原始数组\r\n\r\n      for (var i = 0; i < product.properties.length; ++i) {\r\n        var property = product.properties[i];\r\n\r\n        if (!property.is_multiselect) {\r\n          maybeStock[i] = [];\r\n\r\n          for (var j = 0; j < property.attrs.length; j++) {\r\n            maybeStock[i].push(property.attrs[j].id);\r\n          }\r\n        }\r\n      } // 得到多个笛卡尔积组合\r\n\r\n\r\n      maybeStock = common.multiCartesian(maybeStock);\r\n\r\n      if (maybeStock.length && maybeStock[0] instanceof Array) {\r\n        for (var i = 0; i < maybeStock.length; i++) {\r\n          maybeStock[i].sort(function (a, b) {\r\n            return a - b;\r\n          });\r\n        }\r\n      } //验证是否可以购买\r\n\r\n\r\n      this.setData({\r\n        canPurchase: this.checkCanPurchase()\r\n      });\r\n      var min_sku_price = 9999999999;\r\n      var min_sku_svip_price = 9999999999;\r\n\r\n      for (var i = 0; i < product.stock.length; ++i) {\r\n        var _goods_attr = product.stock[i].key.split('_');\r\n\r\n        var _min_sku_price = product.stock[i].market_price,\r\n            _min_sku_svip_price = product.stock[i].price;\r\n        var hasDefaultFlag = false;\r\n\r\n        if (min_sku_svip_price > _min_sku_svip_price) {\r\n          var ids = [];\r\n\r\n          if (product.is_goods_number > 0 && product.is_on_sale && product.stock[i].is_enough) {\r\n            //商品能购买，并且该sku有库存 则更新最低价\r\n            for (var ind = 0, len = _goods_attr.length; ind < len; ind++) {\r\n              ids.push(parseInt(_goods_attr[ind]));\r\n            }\r\n\r\n            defaultAttrIds = ids;\r\n            defaultAttrStock = [{\r\n              attrs: defaultAttrIds,\r\n              stock: product.stock[i]\r\n            }];\r\n            hasDefaultFlag = true;\r\n            min_sku_svip_price = _min_sku_svip_price;\r\n            min_sku_price = _min_sku_price;\r\n          } else if (!product.is_goods_number > 0 || !product.is_on_sale) {\r\n            //商品不能购买，则一定更新最低价，否则就是9999999999\r\n            for (var ind = 0, len = _goods_attr.length; ind < len; ind++) {\r\n              ids.push(parseInt(_goods_attr[ind]));\r\n            }\r\n\r\n            defaultAttrIds = ids;\r\n            defaultAttrStock = [{\r\n              attrs: defaultAttrIds,\r\n              stock: product.stock[i]\r\n            }];\r\n            hasDefaultFlag = true;\r\n            min_sku_svip_price = _min_sku_svip_price;\r\n            min_sku_price = _min_sku_price;\r\n          }\r\n        }\r\n\r\n        _goods_attr.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n\r\n        _goods_attr = _goods_attr.join('_');\r\n\r\n        for (var j = 0; j < maybeStock.length; j++) {\r\n          var _thisStock = '';\r\n\r\n          if (maybeStock[j] instanceof Array) {\r\n            _thisStock = maybeStock[j].join('_');\r\n          } else if (maybeStock[j] instanceof Object) {\r\n            _thisStock = '';\r\n          } else {\r\n            _thisStock = maybeStock[j];\r\n          }\r\n\r\n          if (_goods_attr == _thisStock) {\r\n            if (product.stock[i].is_enough == true) {\r\n              effectiveStock.push({\r\n                attrs: maybeStock[j],\r\n                stock: product.stock[i]\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      var skuSvipCurrent = this.itemData.current_price;\r\n      var skuCurrent = this.itemData.price;\r\n      this.setData({\r\n        sku_price: min_sku_price,\r\n        min_sku_price: min_sku_price,\r\n        sku_svip_price: min_sku_svip_price,\r\n        min_sku_svip_price: min_sku_svip_price,\r\n        skuSvipCurrent: parseFloat(skuSvipCurrent).toFixed(2),\r\n        skuCurrent: skuCurrent,\r\n        currentStock: defaultAttrStock\r\n      }); //先通过设置默认sku，来设置默认显示价格，设置完之后，把默认sku去掉，不影响原来逻辑\r\n\r\n      this.currentAttrs = defaultAttrIds;\r\n      this.setData({\r\n        hasDefaultSKU: this.currentStock ? true : false\r\n      });\r\n      this.set_choosed_sku();\r\n      defaultAttrIds = [];\r\n      defaultAttrStock = null;\r\n      this.setData({\r\n        currentStock: null,\r\n        hasDefaultSKU: false\r\n      });\r\n      this.currentAttrs = [];\r\n\r\n      if (effectiveStock.length == 1) {\r\n        defaultAttrIds = effectiveStock[0].attrs instanceof Array ? effectiveStock[0].attrs : [effectiveStock[0].attrs];\r\n        defaultAttrStock = effectiveStock[0].stock;\r\n      }\r\n\r\n      if (effectiveStock.length > 1) {\r\n        for (var i in product.properties) {\r\n          var attrs = product.properties[i].attrs;\r\n\r\n          for (var j in attrs) {\r\n            var isin_count = 0;\r\n\r\n            for (var k in effectiveStock) {\r\n              var isin = new RegExp(attrs[j].id).test(effectiveStock[k].attrs);\r\n\r\n              if (isin) {\r\n                isin_count++;\r\n              }\r\n            }\r\n\r\n            if (isin_count == effectiveStock.length) {\r\n              defaultAttrIds.push(attrs[j].id);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        currentStock: defaultAttrStock\r\n      });\r\n      this.currentAttrs = defaultAttrIds;\r\n      this.setData({\r\n        hasDefaultSKU: this.currentStock ? true : false\r\n      });\r\n      this.set_choosed_sku();\r\n    },\r\n    //设置choosed_sku\r\n    set_choosed_sku: function () {\r\n      var that = this;\r\n      var product = that.itemData;\r\n\r\n      if (that.currentAttrs.length < product.properties.length) {\r\n        that.sku_price = that.min_sku_price;\r\n        that.sku_svip_price = that.min_sku_svip_price;\r\n        that.setData({\r\n          choosed_sku: '选择：商品规格',\r\n          skuImages: product.header_img,\r\n          skuSvipCurrent: that.itemData.current_price,\r\n          skuCurrent: that.itemData.price\r\n        });\r\n        that.setAttrsClass();\r\n        return;\r\n      }\r\n\r\n      var choosed_sku = '';\r\n      var sku_price = 0;\r\n      var sku_svip_price = 0;\r\n      var skuSvipCurrent = that.itemData.current_price;\r\n      var skuCurrent = that.itemData.price;\r\n      that.setData({\r\n        choosed_sku: choosed_sku,\r\n        sku_price: sku_price,\r\n        sku_svip_price: sku_svip_price,\r\n        skuSvipCurrent: skuSvipCurrent,\r\n        skuCurrent: skuCurrent\r\n      });\r\n\r\n      for (var i in product.properties) {\r\n        var attrs = product.properties[i].attrs;\r\n\r\n        for (var j in attrs) {\r\n          for (var k in that.currentAttrs) {\r\n            if (that.currentAttrs[k] == attrs[j].id) {\r\n              choosed_sku += attrs[j].item + ' '; //\t\t\t\t\tsku_price += attrs[j].attr_price;\r\n              //\t\t\t\t\tsku_svip_price += attrs[j].attr_svip_price;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (choosed_sku != '') {\r\n        for (var i in product.stock) {\r\n          var stock = product.stock[i].key;\r\n          stock = stock.split('_');\r\n          stock.sort(function (a, b) {\r\n            return a - b;\r\n          });\r\n          stock = stock.join('_');\r\n          var attrs = that.currentAttrs.join('_');\r\n\r\n          if (attrs == stock) {\r\n            that.skuImages = product.stock[i].header_img;\r\n            sku_price = product.stock[i].market_price;\r\n            sku_svip_price = product.stock[i].shop_price;\r\n          }\r\n        }\r\n\r\n        that.confirmData = [{\r\n          goods_name: product.goods_name,\r\n          goods_id: product.goods_id,\r\n          sku_key: attrs,\r\n          amount: that.buynum,\r\n          shop_price: sku_svip_price,\r\n          market_price: sku_price,\r\n          sku_key_name: \"规格:\" + choosed_sku,\r\n          sku_img: that.skuImages\r\n        }];\r\n        choosed_sku = '已选：' + choosed_sku;\r\n        var skuSvipCurrent = sku_svip_price;\r\n        var skuCurrent = sku_price;\r\n        that.setData({\r\n          choosed_sku: choosed_sku,\r\n          sku_price: sku_price,\r\n          sku_svip_price: sku_svip_price,\r\n          skuSvipCurrent: skuSvipCurrent,\r\n          skuCurrent: skuCurrent,\r\n          skuImages: that.skuImages\r\n        });\r\n      }\r\n\r\n      that.setAttrsClass();\r\n    },\r\n    //SKU选择\r\n    attrValueselest: function (e) {\r\n      console.log('attrValueselest');\r\n      var that = this;\r\n      var product = this.itemData;\r\n      if (!product) return;\r\n      var property = e.currentTarget.dataset.property;\r\n      var attr = e.currentTarget.dataset.attr;\r\n\r\n      if (attr.is_multiselect) {\r\n        var attrs = [].concat(this.optionalAttrs);\r\n        var index = attrs.indexOf(attr.id);\r\n\r\n        if (-1 == index) {\r\n          attrs.push(attr.id);\r\n        } else {\r\n          attrs.splice(index, 1);\r\n        }\r\n\r\n        this.setData({\r\n          optionalAttrs: attrs\r\n        });\r\n      } else {\r\n        var inStock = false;\r\n\r\n        for (var i in product.stock) {\r\n          if (product.stock[i].is_enough != true) {\r\n            continue;\r\n          }\r\n\r\n          if (product.stock[i].key.indexOf(String(attr.id)) >= 0) {\r\n            inStock = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!inStock) {\r\n          common.toast('库存不足');\r\n          return;\r\n        }\r\n\r\n        var stock = null;\r\n        var attrs = [].concat(this.currentAttrs);\r\n        var index = attrs.indexOf(attr.id);\r\n\r\n        if (-1 == index) {\r\n          attrs.push(attr.id);\r\n        } else {\r\n          attrs.splice(index, 1);\r\n        }\r\n\r\n        for (var i in property.attrs) {\r\n          if (property.attrs[i].id != attr.id) {\r\n            var index = attrs.indexOf(property.attrs[i].id);\r\n\r\n            if (-1 != index) {\r\n              attrs.splice(index, 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        attrs = attrs.filter(function (attr, index, self) {\r\n          return self.indexOf(attr) === index;\r\n        });\r\n        attrs.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n\r\n        if (attrs.length) {\r\n          var key = attrs.join('_');\r\n\r\n          for (var i = 0; i < product.stock.length; ++i) {\r\n            var _goods_attr = product.stock[i].key.split('_');\r\n\r\n            _goods_attr.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n\r\n            _goods_attr = _goods_attr.join('_');\r\n\r\n            if (_goods_attr == key) {\r\n              stock = product.stock[i];\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (stock && stock.is_enough) {\r\n          this.currentStock = stock, this.currentAttrs = attrs, this.setData({\r\n            buynum: product.min_buy_amount\r\n          });\r\n        } else {\r\n          if (attrs.length < product.properties.length) {\r\n            this.currentStock = null, this.currentAttrs = attrs, this.setData({\r\n              buynum: product.min_buy_amount\r\n            });\r\n          } else {\r\n            common.toast('库存不足');\r\n          }\r\n        }\r\n\r\n        this.setData({\r\n          canPurchase: this.checkCanPurchase()\r\n        });\r\n      }\r\n\r\n      this.set_choosed_sku();\r\n    },\r\n    //设置每一个attr的class\r\n    setAttrsClass: function () {\r\n      var product = this.itemData;\r\n      var property = product.properties;\r\n\r\n      for (var i in property) {\r\n        var attrs = property[i].attrs;\r\n\r\n        for (var j in attrs) {\r\n          var attr = attrs[j];\r\n\r\n          if (!product) {\r\n            attr.class = 'disable';\r\n            continue;\r\n          }\r\n\r\n          if (product.is_goods_number == 0) {\r\n            attr.class = 'disable';\r\n            continue;\r\n          }\r\n\r\n          var attrArr = [];\r\n\r\n          if (attr.is_multiselect) {\r\n            attr.class = this.optionalAttrs.indexOf(attr.id) == -1 ? '' : 'active';\r\n          } else {\r\n            attr.class = this.currentAttrs.indexOf(attr.id) == -1 ? '' : 'active';\r\n            var inStock = false;\r\n\r\n            for (var i in product.stock) {\r\n              if (product.stock[i].is_enough != true) {\r\n                var currentAyyrsJn = this.currentAttrs.join(\"_\");\r\n\r\n                if (product.stock[i].key.indexOf(String(currentAyyrsJn)) >= 0 && this.currentAttrs.length > 0) {\r\n                  var stockDisplyKey = product.stock[i].key.split(\"_\");\r\n\r\n                  for (var j in stockDisplyKey) {\r\n                    if (stockDisplyKey[j] != this.currentAttrs) {\r\n                      for (var k in product.properties) {\r\n                        for (var s in product.properties[k].attrs) {\r\n                          if (product.properties[k].attrs[s].id == stockDisplyKey[j]) {\r\n                            product.properties[k].attrs[s].class = 'disable';\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                } else {\r\n                  continue;\r\n                }\r\n              }\r\n\r\n              if (product.stock[i].key.indexOf(String(attr.id)) >= 0) {\r\n                inStock = true;\r\n                break;\r\n              }\r\n            }\r\n\r\n            if (!inStock) {\r\n              attr.class += 'disable';\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        itemData: product\r\n      });\r\n    },\r\n    //验证是否可以购买\r\n    checkCanPurchase: function () {\r\n      var product = this.itemData;\r\n      var required = false;\r\n\r\n      if (product.pre_info && product.pre_info.is_pre == 1) {\r\n        this.setData({\r\n          sumbitName: product.pre_info.pre_time\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (!product || product.is_enough == 0) {\r\n        this.setData({\r\n          sumbitName: '抱歉，商品已售罄'\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (product.is_on_sale == 0) {\r\n        this.setData({\r\n          sumbitName: '抱歉，商品已下架'\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (this.currentAttrs.length >= product.properties.length) {\r\n        for (var i in product.properties) {\r\n          if (!product.properties[i].is_multiselect) {\r\n            required = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (required) {\r\n          if (!this.currentAttrs || !this.currentAttrs.length) {\r\n            return false;\r\n          }\r\n\r\n          if (!this.currentStock) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        sumbitName: '立即购买'\r\n      });\r\n      return true;\r\n    },\r\n    // SKU价格和非VIP价格是否相同\r\n    isPriceEqualFun: function () {\r\n      var that = this;\r\n\r\n      if (that.itemData.price && that.itemData.current_price) {\r\n        var price = that.itemData.price + that.sku_price,\r\n            svip_price = that.itemData.current_price + that.sku_svip_price;\r\n\r\n        if (price == svip_price) {\r\n          that.setData({\r\n            isPriceEqual: true\r\n          });\r\n        } else {\r\n          that.setData({\r\n            isPriceEqual: false\r\n          });\r\n        }\r\n      } else {\r\n        that.setData({\r\n          isPriceEqual: false\r\n        });\r\n      }\r\n    },\r\n    // 加减\r\n    changeNum: function (e) {\r\n      var that = this;\r\n      var product = that.itemData;\r\n      var invurl = app.getPath.skuEnough;\r\n\r\n      if (product.pre_info && product.pre_info.is_pre == 1) {\r\n        invurl = app.getPath.skuEnough;\r\n      }\r\n\r\n      var product_id = '';\r\n\r\n      for (var i in product.stock) {\r\n        var stock = product.stock[i].key;\r\n        stock = stock.split('_');\r\n        stock.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        stock = stock.join('_');\r\n        var attrs = that.currentAttrs.join('_');\r\n\r\n        if (attrs == stock) {\r\n          product_id = product.stock[i].key;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (that.currentAttrs.length == product.properties.length) {\r\n        // alpha-beta 0  减\r\n        if (e.currentTarget.dataset.alphaBeta == 0) {\r\n          if (!that.checkCanPurchase()) return; // Lin start\r\n\r\n          if (that.buynum <= that.itemData.min_buy_amount) {\r\n            common.toast('不能小于最小购买数量');\r\n            return;\r\n          } // Lin end\r\n\r\n\r\n          if (that.buynum <= 1) {// buynum: 1\r\n          } else if (that.buynum === 2) {\r\n            that.setData({\r\n              buynum: that.buynum - 1,\r\n              undel: true\r\n            });\r\n          } else {\r\n            that.setData({\r\n              buynum: that.buynum - 1\r\n            });\r\n          } // 验证库存\r\n\r\n\r\n          if (that.buynum != 1) {\r\n            var invdata = {\r\n              goods_id: product.goods_id,\r\n              sku_key: product_id,\r\n              amount: that.buynum\r\n            };\r\n            common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n              if (!ret) return;\r\n\r\n              if (ret.data.result.is_enough != 1) {\r\n                console.log(ret.data.result.msg);\r\n                common.toast(ret.data.result.msg);\r\n                return;\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          // alpha-beta 1  加      max_buy_amount==0不限制数量\r\n          // Lin start\r\n          if (that.itemData.max_buy_amount != 0 && that.buynum >= that.itemData.max_buy_amount) {\r\n            common.toast('不能在多啦~');\r\n            return;\r\n          } // Lin end\r\n\r\n\r\n          that.setData({\r\n            buynum: that.buynum + 1,\r\n            undel: false\r\n          });\r\n\r\n          if (that.buynum > 1) {\r\n            var invdata = {\r\n              goods_id: product.goods_id,\r\n              sku_key: product_id,\r\n              amount: that.buynum\r\n            };\r\n            common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n              if (!ret) return;\r\n\r\n              if (ret.data.result.is_enough != 1) {\r\n                // console.log(ret)\r\n                common.toast(ret.data.result.msg);\r\n                that.setData({\r\n                  buynum: that.buynum - 1\r\n                });\r\n                that.set_choosed_sku();\r\n                return;\r\n              }\r\n            });\r\n          }\r\n        }\r\n\r\n        that.confirmData.num = that.buynum;\r\n      } else {\r\n        if (that.showSKUstatus == 0) {\r\n          that.setModalStatus();\r\n        } else {\r\n          common.toast('请选择商品款式');\r\n        }\r\n      }\r\n\r\n      that.set_choosed_sku();\r\n    },\r\n    setData: function (obj) {\r\n      let that = this;\r\n      let keys = [];\r\n      let val, data;\r\n      Object.keys(obj).forEach(function (key) {\r\n        keys = key.split('.');\r\n        val = obj[key];\r\n        data = that.$data;\r\n        keys.forEach(function (key2, index) {\r\n          that[key] = obj[key];\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./newExclusive.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./newExclusive.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}