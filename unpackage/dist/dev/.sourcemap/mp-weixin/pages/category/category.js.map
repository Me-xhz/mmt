{"version":3,"sources":["webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?f644","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?90fb","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?ad0e","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?3051","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?2dce","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue?aff7"],"names":["app","getApp","globalData","common","require","icon_url","dataBase","iconURL","data","sort","order","currType","page","page_size","good_list","topFixed","productId","itemData","showSKUstatus","optionalAttrs","skuImages","bannerItem","buynum","firstIndex","choosed_sku","cartAmount","undel","unadd","isPriceEqual","canPurchase","confirmData","isAuthorization","types","typeTree","animationData","showModalStatus","buy_now","productid","showfwModalStatus","showShareModalStatus","showBonusModal","indicatorDots","brandID","skuSvipCurrent","skuCurrent","sku_price","min_sku_price","sku_svip_price","min_sku_svip_price","currentStock","hasDefaultSKU","sumbitName","components","no_warehouse","props","onLoad","option","that","getData","local","city","warehouse_id","showPage","setData","onShow","pickupId","getStorageSync","isRefresh","onReachBottom","total","length","getbrandList","methods","getcategoryNav","then","result","callback","pickup","firstlaunchApp","undefined","showLoad","getpickup","res","cities","hideLoad","openSet","e","detail","setStorageSync","goWebView","goAdWebView","uri","getPath","categorynav","Promise","resolve","reject","ApiGateWayTest","statusCode","cat_id","categoodslist","errorCode","lists","toast","sortTypes","Number","currentTarget","dataset","tapType","item","scrollEvent","top","scrollTop","setModalStatus","type","animation","wx","createAnimation","duration","timingFunction","delay","translateY","opacity","step","export","setTimeout","bind","addShopCart","isOldUser","checkSessionKey","goRegister","target","buynow","addCart","loadProductDetail","checkCanPurchase","product","currentAttrs","properties","product_id","i","stock","key","split","a","b","join","attrs","invurl","pre_info","is_pre","invdata","goods_id","sku_key","amount","formIdUpdate","ret","success","cart_num","msg","nowPurchase","nowPurchaseSub","skuEnough","is_enough","navigateTo","url","setStorage","goodsInfo","skuAmounturi","getSkuAmount","productlist","content","goods_content","introContent","detail_explain","islike","is_liked","current_price","shop_price","price","market_price","gallery","min_buy_amount","setDefaultSKU","isPriceEqualFun","defaultAttrIds","defaultAttrStock","maybeStock","effectiveStock","property","is_multiselect","j","push","id","multiCartesian","Array","_goods_attr","_min_sku_price","_min_sku_svip_price","hasDefaultFlag","ids","is_goods_number","is_on_sale","ind","len","parseInt","_thisStock","Object","parseFloat","toFixed","set_choosed_sku","isin_count","k","isin","RegExp","test","header_img","setAttrsClass","goods_name","sku_key_name","sku_img","attrValueselest","attr","concat","index","indexOf","splice","inStock","String","filter","self","class","attrArr","currentAyyrsJn","stockDisplyKey","s","required","pre_time","svip_price","changeNum","alphaBeta","max_buy_amount","num","goToProduct","goodsid","obj","keys","val","forEach","$data","key2"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuF;AAC3B;AACL;AACa;;;AAGpE;AACoJ;AACpJ,gBAAgB,sJAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAkrB,CAAgB,mpBAAG,EAAC,C;;;;;;;;;;;;inBCAtsB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,GAAG,GAAGC,MAAM,GAAGC,UAAnB;AACA,IAAIC,MAAM,GAAGC,mBAAO,CAAC,+BAAD,CAApB;AACA,IAAIC,QAAQ,GAAGL,GAAG,CAACM,QAAJ,CAAaC,OAA5B,C;;;AAGe;AACbC,MADa,kBACN;AACL,WAAO;AACLD,aAAO,EAAEP,GAAG,CAACM,QAAJ,CAAaC,OADjB;AAELE,UAAI,EAAE,CAFD;AAGLC,WAAK,EAAE,CAHF;AAILC,cAAQ,EAAE,CAJL;AAKLC,UAAI,EAAE,CALD;AAMLC,eAAS,EAAE,EANN;AAOLC,eAAS,EAAE,EAPN;AAQLC,cAAQ,EAAE,KARL;AASL;AACAC,eAAS,EAAE,CAVN;AAWLC,cAAQ,EAAE,EAXL;AAYLC,mBAAa,EAAE,CAZV;AAaLC,mBAAa,EAAE,EAbV;AAcLC,eAAS,EAAE,EAdN;AAeLC,gBAAU,EAAE,EAfP;AAgBLC,YAAM,EAAE,CAhBH;AAiBL;AACAC,gBAAU,EAAE,CAAC,CAlBR;AAmBLC,iBAAW,EAAE,EAnBR;AAoBLC,gBAAU,EAAE,CApBP;AAqBL;AACAC,WAAK,EAAE,IAtBF;AAuBLC,WAAK,EAAE,KAvBF;AAwBL;AACAC,kBAAY,EAAE,KAzBT;AA0BLC,iBAAW,EAAE,KA1BR;AA2BLC,iBAAW,EAAE,EA3BR;AA4BLC,qBAAe,EAAE,EA5BZ;AA6BLC,WAAK,EAAE,EA7BF;AA8BLC,cAAQ,EAAE,EA9BL;AA+BLC,mBAAa,EAAE,EA/BV;AAgCLC,qBAAe,EAAE,KAhCZ;AAiCLC,aAAO,EAAE,EAjCJ;AAkCLC,eAAS,EAAE,CAlCN;AAmCLC,uBAAiB,EAAE,KAnCd;AAoCLC,0BAAoB,EAAE,KApCjB;AAqCLC,oBAAc,EAAE,KArCX;AAsCLC,mBAAa,EAAE,EAtCV;AAuCLC,aAAO,EAAE,EAvCJ;AAwCLC,oBAAc,EAAE,EAxCX;AAyCLC,gBAAU,EAAE,EAzCP;AA0CLC,eAAS,EAAE,EA1CN;AA2CLC,mBAAa,EAAE,EA3CV;AA4CLC,oBAAc,EAAE,EA5CX;AA6CLC,wBAAkB,EAAE,EA7Cf;AA8CLC,kBAAY,EAAE,EA9CT;AA+CLC,mBAAa,EAAE,EA/CV;AAgDLC,gBAAU,EAAE,EAhDP,EAAP;;AAkDD,GApDY;;AAsDbC,YAAU,EAAE;AACVC,gBAAY,EAAZA,YADU,EAtDC;;AAyDbC,OAAK,EAAE,EAzDM;AA0DbC,QAAM,EAAE,gBAAUC,MAAV,EAAkB;AACxB,QAAIC,IAAI,GAAG,IAAX;AACAA,QAAI,CAACC,OAAL,GAFwB,CAER;;AAEhBD,QAAI,CAACE,KAAL,CAAW,UAAUC,IAAV,EAAgB;AACzB,UAAIpD,IAAI,GAAG;AACToD,YAAI,EAAEA,IADG;AAET7B,uBAAe,EAAE,IAFR,CAEa;AAFb,OAAX;;;AAMA,UAAI0B,IAAI,CAAC1B,eAAL,IAAwB6B,IAAI,CAACC,YAAL,IAAqB,CAAC,CAAlD,EAAqD;AACnDrD,YAAI,CAACsD,QAAL,GAAgB,IAAhB;AACAL,YAAI,CAACM,OAAL,CAAavD,IAAb;AACD,OAHD,MAGO;AACLA,YAAI,CAACsD,QAAL,GAAgB,KAAhB;AACAL,YAAI,CAACM,OAAL,CAAavD,IAAb;AACA,eAAO,KAAP;AACD;AACF,KAfD;AAgBD,GA9EY;AA+EbwD,QAAM,EAAE,kBAAY;AAClB,QAAIP,IAAI,GAAG,IAAX;AACA,QAAIQ,QAAQ,GAAG9D,MAAM,CAAC+D,cAAP,CAAsB,WAAtB,CAAf;AACA;AACA;AACA;;AAEA,QAAIlE,GAAG,CAACM,QAAJ,CAAa6D,SAAjB,EAA4B;AAC1B,UAAIV,IAAI,GAAG,IAAX,CAD0B,CACT;;AAEjBA,UAAI,CAACM,OAAL,CAAa;AACXtD,YAAI,EAAE,CADK;AAEXC,aAAK,EAAE,CAFI;AAGXC,gBAAQ,EAAE,CAHC;AAIXC,YAAI,EAAE,CAJK;AAKXE,iBAAS,EAAE,EALA;AAMXC,gBAAQ,EAAE,KANC,EAAb;;AAQA0C,UAAI,CAACC,OAAL,GAX0B,CAWV;;AAEhBD,UAAI,CAACE,KAAL,CAAW,UAAUC,IAAV,EAAgB;AACzB,YAAIpD,IAAI,GAAG;AACToD,cAAI,EAAEA,IADG;AAET7B,yBAAe,EAAE,IAFR,CAEa;AAFb,SAAX;;;AAMA,YAAI0B,IAAI,CAAC1B,eAAL,IAAwB6B,IAAI,CAACC,YAAL,IAAqB,CAAC,CAAlD,EAAqD;AACnDrD,cAAI,CAACsD,QAAL,GAAgB,IAAhB;AACAL,cAAI,CAACM,OAAL,CAAavD,IAAb;AACD,SAHD,MAGO;AACLA,cAAI,CAACsD,QAAL,GAAgB,KAAhB;AACAL,cAAI,CAACM,OAAL,CAAavD,IAAb;AACA,iBAAO,KAAP;AACD;AACF,OAfD;AAgBAR,SAAG,CAACM,QAAJ,CAAa6D,SAAb,GAAyB,KAAzB;AACD;AACF,GArHY;AAsHb;AACAC,eAAa,EAAE,yBAAY;AACzB,QAAIX,IAAI,GAAG,IAAX;;AAEA,QAAIA,IAAI,CAAC3C,SAAL,IAAkB2C,IAAI,CAACxB,QAAL,CAAcoC,KAAd,IAAuBZ,IAAI,CAAC3C,SAAL,CAAewD,MAA5D,EAAoE;AAClE,WAAKP,OAAL,CAAa;AACXnD,YAAI,EAAE6C,IAAI,CAAC7C,IAAL,GAAY,CADP,EAAb;;AAGA6C,UAAI,CAACc,YAAL;AACD;AACF,GAhIY;AAiIbC,SAAO,EAAE;AACPd,WAAO,EAAE,mBAAY;AACnB,UAAID,IAAI,GAAG,IAAX;AACAA,UAAI,CAACgB,cAAL,GAAsBC,IAAtB,CAA2B,UAAUC,MAAV,EAAkB;AAC3ClB,YAAI,CAACc,YAAL,CAAkBd,IAAI,CAAC9C,QAAvB;AACD,OAFD;AAGD,KANM;AAOP;AACAgD,SAAK,EAAE,eAAUiB,QAAV,EAAoB;AACzB,UAAInB,IAAI,GAAG,IAAX;AACAA,UAAI,CAACM,OAAL,CAAa;AACXhC,uBAAe,EAAE5B,MAAM,CAAC+D,cAAP,CAAsB,aAAtB,EAAqC,oBAArC,CADN,EAAb;;AAGA,UAAIN,IAAI,GAAGzD,MAAM,CAAC+D,cAAP,CAAsB,MAAtB,CAAX;AACA,UAAIW,MAAM,GAAG1E,MAAM,CAAC+D,cAAP,CAAsB,WAAtB,CAAb;;AAEA,UAAIlE,GAAG,CAAC8E,cAAJ,IAAsBlB,IAAI,CAACC,YAAL,IAAqBkB,SAA/C,EAA0D;AACxD;AACA,YAAItB,IAAI,CAAC1B,eAAT,EAA0B;AACxB;AACA5B,gBAAM,CAAC6E,QAAP,CAAgBvB,IAAhB;AACD;;AAEDtD,cAAM,CAAC8E,SAAP,CAAiB,UAAUC,GAAV,EAAe;AAC9B,cAAItB,IAAI,GAAGsB,GAAG,CAACC,MAAf;AACAP,kBAAQ,IAAI,OAAOA,QAAP,KAAoB,UAAhC,IAA8CA,QAAQ,CAAChB,IAAD,CAAtD;AACAzD,gBAAM,CAACiF,QAAP,CAAgB3B,IAAhB;AACD,SAJD;AAKD,OAZD,MAYO;AACL;AACA;AACAmB,gBAAQ,IAAI,OAAOA,QAAP,KAAoB,UAAhC,IAA8CA,QAAQ,CAAChB,IAAD,CAAtD;AACD;AACF,KAjCM;AAkCP;AACAyB,WAAO,EAAE,iBAAUC,CAAV,EAAa;AACpB,UAAI7B,IAAI,GAAG,IAAX;AACAA,UAAI,CAACM,OAAL,CAAa;AACXhC,uBAAe,EAAEuD,CAAC,CAACC,MAAF,CAASxD,eADf,EAAb;;AAGA5B,YAAM,CAACqF,cAAP,CAAsB,QAAtB,EAAgC,IAAhC;AACAxF,SAAG,CAACM,QAAJ,CAAa6D,SAAb,GAAyB,IAAzB;AACAV,UAAI,CAACO,MAAL;AACD,KA3CM;AA4CP;AACAyB,aAAS,EAAE,mBAAUH,CAAV,EAAa;AACtBnF,YAAM,CAACuF,WAAP,CAAmBJ,CAAnB;AACD,KA/CM;AAgDP;AACAb,kBAAc,EAAE,0BAAY;AAC1B,UAAIhB,IAAI,GAAG,IAAX;AACA,UAAIkC,GAAG,GAAG3F,GAAG,CAAC4F,OAAJ,CAAYC,WAAtB;AACA,aAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C7F,cAAM,CAAC8F,cAAP,CAAsBN,GAAtB,EAA2B,EAA3B,EAA+B,IAA/B,EAAqC,UAAUT,GAAV,EAAe;AAClD,cAAIA,GAAG,CAACgB,UAAJ,IAAkB,GAAtB,EAA2B;AACzB,gBAAIhB,GAAG,GAAGA,GAAG,CAAC1E,IAAJ,CAASmE,MAAnB;AACAlB,gBAAI,CAACM,OAAL,CAAa;AACX/B,mBAAK,EAAEkD,GADI;AAEXvE,sBAAQ,EAAEuE,GAAG,CAAC,CAAD,CAAH,CAAOiB,MAFN,EAAb;;AAIAJ,mBAAO,CAAC,uBAAD,CAAP;AACD;AACF,SATD;AAUD,OAXM,CAAP;AAYD,KAhEM;AAiEP;AACAxB,gBAAY,EAAE,wBAAY;AACxB,UAAId,IAAI,GAAG,IAAX;AACA,UAAIkC,GAAG,GAAG3F,GAAG,CAAC4F,OAAJ,CAAYQ,aAAtB;AACA,UAAI5F,IAAI,GAAG;AACT2F,cAAM,EAAE1C,IAAI,CAAC9C,QADJ;AAETC,YAAI,EAAE6C,IAAI,CAAC7C,IAFF;AAGTC,iBAAS,EAAE4C,IAAI,CAAC5C,SAHP;AAITJ,YAAI,EAAEgD,IAAI,CAAChD,IAJF;AAKTC,aAAK,EAAE+C,IAAI,CAAC/C,KALH,EAAX;;AAOAP,YAAM,CAAC6E,QAAP,CAAgBvB,IAAhB;AACAtD,YAAM,CAAC8F,cAAP,CAAsBN,GAAtB,EAA2BnF,IAA3B,EAAiC,IAAjC,EAAuC,UAAU0E,GAAV,EAAe;AACpD/E,cAAM,CAACiF,QAAP,CAAgB3B,IAAhB;;AAEA,YAAIyB,GAAG,CAAC1E,IAAJ,CAAS6F,SAAT,IAAsB,CAA1B,EAA6B;AAC3B,cAAInB,GAAG,GAAGA,GAAG,CAAC1E,IAAJ,CAASmE,MAAnB;;AAEA,cAAIO,GAAG,CAACoB,KAAJ,CAAUhC,MAAV,IAAoB,CAAxB,EAA2B;AACzBnE,kBAAM,CAACoG,KAAP,CAAa,SAAb;AACD;;AAED9C,cAAI,CAACM,OAAL,CAAa;AACX9B,oBAAQ,EAAEiD,GADC;AAEXpE,qBAAS,+BAAM2C,IAAI,CAAC3C,SAAX,sBAAyBoE,GAAG,CAACoB,KAA7B,EAFE,EAAb;;AAID,SAXD,MAWO;AACL7C,cAAI,CAACM,OAAL,CAAa;AACX9B,oBAAQ,EAAE,EADC,EAAb;;AAGD;AACF,OAnBD;AAoBD,KAjGM;AAkGPuE,aAAS,EAAE,mBAAUlB,CAAV,EAAa;AACtB,UAAI7E,IAAI,GAAGgG,MAAM,CAACnB,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBlG,IAAzB,CAAjB;AACA,UAAIC,KAAK,GAAG,KAAKA,KAAjB;;AAEA,UAAID,IAAI,IAAI,CAAZ,EAAe;AACbC,aAAK,GAAGA,KAAK,IAAI,CAAT,GAAa,CAAb,GAAiB,CAAzB;AACD;;AAED,WAAKqD,OAAL,CAAa;AACXtD,YAAI,EAAJA,IADW;AAEXC,aAAK,EAALA,KAFW;AAGXE,YAAI,EAAE,CAHK;AAIXE,iBAAS,EAAE,EAJA,EAAb;;AAMA,WAAKyD,YAAL;AACD,KAjHM;AAkHP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAqC,WAAO,EAAE,iBAAUtB,CAAV,EAAa;AACpB,UAAI7B,IAAI,GAAG,IAAX;AACA,UAAIoD,IAAI,GAAGvB,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBE,IAAnC;;AAEA,UAAIA,IAAI,CAACV,MAAT,EAAiB;AACf1C,YAAI,CAACM,OAAL,CAAa;AACXpD,kBAAQ,EAAEkG,IAAI,CAACV,MADJ;AAEXrF,mBAAS,EAAE,EAFA;AAGXF,cAAI,EAAE,CAHK;AAIXH,cAAI,EAAE,CAJK;AAKXC,eAAK,EAAE,CALI,EAAb;;AAOA+C,YAAI,CAACc,YAAL,CAAkBd,IAAI,CAAC9C,QAAvB;AACD,OAbmB,CAalB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAED,KA9JM;AA+JP;AACAmG,eAAW,EAAE,qBAAUxB,CAAV,EAAa;AACxB,UAAIyB,GAAG,GAAGzB,CAAC,CAACC,MAAF,CAASyB,SAAnB;;AAEA,UAAID,GAAG,GAAG,EAAV,EAAc;AACZ,aAAKhD,OAAL,CAAa;AACXhD,kBAAQ,EAAE,IADC,EAAb;;AAGD,OAJD,MAIO;AACL,aAAKgD,OAAL,CAAa;AACXhD,kBAAQ,EAAE,KADC,EAAb;;AAGD;AACF,KA5KM;AA6KP;AACAkG,kBAAc,EAAE,wBAAUC,IAAV,EAAgB;AAC9B,UAAI,KAAKhG,aAAL,IAAsB,CAA1B,EAA6B;AAC3B,aAAKA,aAAL,GAAqB,CAArB;AACD,OAFD,MAEO;AACL,aAAKA,aAAL,GAAqB,CAArB;AACD;;AAED,UAAIiG,SAAS,GAAGC,EAAE,CAACC,eAAH,CAAmB;AACjCC,gBAAQ,EAAE,GADuB;AAEjCC,sBAAc,EAAE,QAFiB;AAGjCC,aAAK,EAAE,CAH0B,EAAnB,CAAhB;;AAKAL,eAAS,CAACM,UAAV,CAAqB,GAArB,EAA0BC,OAA1B,CAAkC,CAAlC,EAAqCC,IAArC;AACA,WAAK5D,OAAL,CAAa;AACX7B,qBAAa,EAAEiF,SAAS,CAACS,MAAV,EADJ,EAAb;;;AAIA,UAAI,KAAK1G,aAAL,IAAsB,CAA1B,EAA6B;AAC3B,aAAK6C,OAAL,CAAa;AACX5B,yBAAe,EAAE,IADN,EAAb;;AAGD;;AAED0F,gBAAU,CAAC,YAAY;AACrBV,iBAAS,CAACM,UAAV,CAAqB,CAArB,EAAwBE,IAAxB;AACA,aAAK5D,OAAL,CAAa;AACX7B,uBAAa,EAAEiF,SADJ,EAAb;;;AAIA,YAAI,KAAKjG,aAAL,IAAsB,CAA1B,EAA6B;AAC3B,eAAK6C,OAAL,CAAa;AACX5B,2BAAe,EAAE,KADN,EAAb;;AAGD;AACF,OAXU,CAWT2F,IAXS,CAWJ,IAXI,CAAD,EAWI,GAXJ,CAAV;AAYD,KAjNM;AAkNP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,eAAW,EAAE,qBAAUzC,CAAV,EAAa;AACxB;AACA,UAAI0C,SAAS,GAAG7H,MAAM,CAAC+D,cAAP,CAAsB,WAAtB,CAAhB;;AAEA,UAAI,CAAClE,GAAG,CAACiI,eAAL,IAAwBD,SAAS,IAAI,CAAzC,EAA4C;AAC1C7H,cAAM,CAAC+H,UAAP;AACA,eAAO,KAAP;AACD;;AAED,UAAIzE,IAAI,GAAG,IAAX,CATwB,CASP;;AAEjB,WAAKM,OAAL,CAAa;AACX3B,eAAO,EAAEkD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiByB,MADf,EAAb;;;AAIA,UAAI,KAAK/F,SAAL,IAAkBiD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiBtE,SAAvC,EAAkD;AAChDgG,eAAO,CAAC/C,CAAD,CAAP;AACD,OAFD,MAEO;AACL,aAAKgD,iBAAL,CAAuBhD,CAAvB,EAA0BZ,IAA1B,CAA+B,YAAY;AACzC2D,iBAAO,CAAC/C,CAAD,CAAP;AACD,SAFD;AAGD;;AAED,eAAS+C,OAAT,CAAiB/C,CAAjB,EAAoB;AAClB,YAAI,CAAC7B,IAAI,CAAC8E,gBAAL,EAAL,EAA8B;AAC9B,YAAIC,OAAO,GAAG/E,IAAI,CAACxC,QAAnB;AACA,YAAIiG,IAAI,GAAG5B,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBO,IAAnC,CAHkB,CAGuB;;AAEzC,YAAIzD,IAAI,CAACgF,YAAL,CAAkBnE,MAAlB,IAA4BkE,OAAO,CAACE,UAAR,CAAmBpE,MAAnD,EAA2D;AACzD;AACA,cAAIqE,UAAU,GAAG,EAAjB;;AAEA,eAAK,IAAIC,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,gBAAIA,KAAK,GAAGL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA7B;AACAD,iBAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAR;AACAF,iBAAK,CAACpI,IAAN,CAAW,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACzB,qBAAOD,CAAC,GAAGC,CAAX;AACD,aAFD;AAGAJ,iBAAK,GAAGA,KAAK,CAACK,IAAN,CAAW,GAAX,CAAR;AACA,gBAAIC,KAAK,GAAG1F,IAAI,CAACgF,YAAL,CAAkBS,IAAlB,CAAuB,GAAvB,CAAZ;;AAEA,gBAAIC,KAAK,IAAIN,KAAb,EAAoB;AAClBF,wBAAU,GAAGH,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA9B;AACA;AACD;AACF;;AAED,cAAIM,MAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYyC,OAAzB;;AAEA,cAAIG,OAAO,CAACa,QAAR,IAAoBb,OAAO,CAACa,QAAR,CAAiBC,MAAjB,IAA2B,CAAnD,EAAsD;AACpDF,kBAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYyC,OAArB;AACD;;AAED,cAAIkB,OAAO,GAAG;AACZC,oBAAQ,EAAEhB,OAAO,CAACgB,QADN;AAEZC,mBAAO,EAAEd,UAFG;AAGZe,kBAAM,EAAEjG,IAAI,CAACnC,MAHD,EAAd;;AAKA;AACA;AACA;AACA;AACAnB,gBAAM,CAACwJ,YAAP,CAAoBrE,CAApB;AACAnF,gBAAM,CAAC8F,cAAP,CAAsBmD,MAAtB,EAA8BG,OAA9B,EAAuC,IAAvC,EAA6C,UAAUK,GAAV,EAAe;AAC1D,gBAAI,CAACA,GAAL,EAAU;;AAEV,gBAAIA,GAAG,CAACpJ,IAAJ,CAASqJ,OAAT,IAAoB,CAAxB,EAA2B;AACzBpG,kBAAI,CAACgF,YAAL,GAAoB,EAApB;AACAhF,kBAAI,CAACM,OAAL,CAAa;AACXtC,0BAAU,EAAEmI,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBmF,QADjB;AAEXzH,yBAAS,EAAE,CAFA,EAAb;;AAIAlC,oBAAM,CAACoG,KAAP,CAAaqD,GAAG,CAACpJ,IAAJ,CAASuJ,GAAtB;;AAEA,kBAAI7C,IAAI,IAAI,YAAZ,EAA0B;AACxB;AACAzD,oBAAI,CAACM,OAAL,CAAa;AACX5B,iCAAe,EAAE,KADN;AAEXjB,+BAAa,EAAE,CAFJ,EAAb;;AAID;AACF,aAfD,MAeO;AACLf,oBAAM,CAACoG,KAAP,CAAaqD,GAAG,CAACpJ,IAAJ,CAASuJ,GAAtB;AACA;AACD;AACF,WAtBD;AAuBD,SA1DD,MA0DO;AACL;AACA,cAAItG,IAAI,CAACvC,aAAL,IAAsB,CAA1B,EAA6B;AAC3BuC,gBAAI,CAACwD,cAAL,CAAoBC,IAApB;AACAzD,gBAAI,CAACM,OAAL,CAAa;AACXzB,+BAAiB,EAAE,KADR;AAEXC,kCAAoB,EAAE,KAFX;AAGXC,4BAAc,EAAE,KAHL,EAAb;;AAKD,WAPD,MAOO;AACLrC,kBAAM,CAACoG,KAAP,CAAa,SAAb;AACD;AACF;AACF;AACF,KAvVM;AAwVP;AACAyD,eAAW,EAAE,qBAAU1E,CAAV,EAAa;AACxB,UAAI7B,IAAI,GAAG,IAAX,CADwB,CACP;;AAEjB,UAAIuE,SAAS,GAAG7H,MAAM,CAAC+D,cAAP,CAAsB,WAAtB,CAAhB;;AAEA,UAAI,CAAClE,GAAG,CAACiI,eAAL,IAAwBD,SAAS,IAAI,CAAzC,EAA4C;AAC1C7H,cAAM,CAAC+H,UAAP;AACA,eAAO,KAAP;AACD,OARuB,CAQtB;;;AAGF,WAAKnE,OAAL,CAAa;AACX3B,eAAO,EAAEkD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiByB,MADf,EAAb;;;AAIA,UAAI3E,IAAI,CAACpB,SAAL,IAAkBiD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiBtE,SAAvC,EAAkD;AAChD4H,sBAAc,CAAC3E,CAAD,CAAd;AACD,OAFD,MAEO;AACL7B,YAAI,CAAC6E,iBAAL,CAAuBhD,CAAvB,EAA0BZ,IAA1B,CAA+B,YAAY;AACzCuF,wBAAc,CAAC3E,CAAD,CAAd;AACD,SAFD;AAGD;;AAED,eAAS2E,cAAT,CAAwB3E,CAAxB,EAA2B;AACzB,YAAI,CAAC7B,IAAI,CAAC8E,gBAAL,EAAL,EAA8B;AAC9B,YAAIC,OAAO,GAAG/E,IAAI,CAACxC,QAAnB,CAFyB,CAEI;AAC7B;AACA;;AAEA,YAAIwC,IAAI,CAACgF,YAAL,CAAkBnE,MAAlB,IAA4BkE,OAAO,CAACE,UAAR,CAAmBpE,MAAnD,EAA2D;AACzD;AACA,cAAIqE,UAAU,GAAG,EAAjB;;AAEA,eAAK,IAAIC,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,gBAAIA,KAAK,GAAGL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA7B;AACAD,iBAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAR;AACAF,iBAAK,CAACpI,IAAN,CAAW,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACzB,qBAAOD,CAAC,GAAGC,CAAX;AACD,aAFD;AAGAJ,iBAAK,GAAGA,KAAK,CAACK,IAAN,CAAW,GAAX,CAAR;AACA,gBAAIC,KAAK,GAAG1F,IAAI,CAACgF,YAAL,CAAkBS,IAAlB,CAAuB,GAAvB,CAAZ;;AAEA,gBAAIC,KAAK,IAAIN,KAAb,EAAoB;AAClBF,wBAAU,GAAGH,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA9B;AACA;AACD;AACF;;AAED,cAAIM,MAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYsE,SAAzB;;AAEA,cAAI1B,OAAO,CAACa,QAAR,IAAoBb,OAAO,CAACa,QAAR,CAAiBC,MAAjB,IAA2B,CAAnD,EAAsD;AACpDF,kBAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYsE,SAArB;AACD;;AAED,cAAIX,OAAO,GAAG;AACZC,oBAAQ,EAAEhB,OAAO,CAACgB,QADN;AAEZC,mBAAO,EAAEd,UAFG;AAGZe,kBAAM,EAAEjG,IAAI,CAACnC,MAHD,EAAd;;AAKA;AACA;AACA;AACA;AACAnB,gBAAM,CAACwJ,YAAP,CAAoBrE,CAApB;AACAnF,gBAAM,CAAC8F,cAAP,CAAsBmD,MAAtB,EAA8BG,OAA9B,EAAuC,IAAvC,EAA6C,UAAUK,GAAV,EAAe;AAC1D,gBAAI,CAACA,GAAL,EAAU;;AAEV,gBAAIA,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBwF,SAAhB,IAA6B,CAAjC,EAAoC;AAClChK,oBAAM,CAACoG,KAAP,CAAaqD,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBoF,GAA7B;AACA;AACD,aAHD,MAGO;AACLtG,kBAAI,CAACgF,YAAL,GAAoB,EAApB,CADK,CACmB;;AAExBhF,kBAAI,CAACM,OAAL,CAAa;AACX5B,+BAAe,EAAE,KADN;AAEXjB,6BAAa,EAAE,CAFJ;AAGXO,0BAAU,EAAEmI,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBmF,QAHjB;AAIXzH,yBAAS,EAAE,CAJA,EAAb;;AAMA+E,gBAAE,CAACgD,UAAH,CAAc;AACZC,mBAAG,EAAE,wBADO,EAAd;;AAGD;AACF,WAnBD;AAoBD,SAvDD,MAuDO;AACL,cAAI5G,IAAI,CAACvC,aAAL,IAAsB,CAA1B,EAA6B;AAC3BuC,gBAAI,CAACwD,cAAL;AACAxD,gBAAI,CAACM,OAAL,CAAa;AACXzB,+BAAiB,EAAE,KADR;AAEXC,kCAAoB,EAAE,KAFX;AAGXC,4BAAc,EAAE,KAHL,EAAb;;AAKD,WAPD,MAOO;AACLrC,kBAAM,CAACoG,KAAP,CAAa,SAAb;AACD;AACF,SAxEwB,CAwEvB;;;AAGFpG,cAAM,CAACmK,UAAP,CAAkB;AAChBxB,aAAG,EAAE,QADW;AAEhBtI,cAAI,EAAEiD,IAAI,CAAC3B,WAFK,EAAlB;;AAID;AACF,KAhcM;AAicP;AACAwG,qBAAiB,EAAE,2BAAUhD,CAAV,EAAa;AAC9B,UAAIjD,SAAS,GAAGiD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiBtE,SAAjC;AACA,WAAK0B,OAAL,CAAa;AACX1B,iBAAS,EAAEiD,CAAC,CAAC6C,MAAF,CAASxB,OAAT,CAAiBtE,SADjB,EAAb;;AAGA,UAAIoB,IAAI,GAAG,IAAX;AACAtD,YAAM,CAAC6E,QAAP,CAAgBvB,IAAhB;AACA,UAAIkC,GAAG,GAAG3F,GAAG,CAAC4F,OAAJ,CAAY2E,SAAtB;AACA,UAAIC,YAAY,GAAGxK,GAAG,CAAC4F,OAAJ,CAAY6E,YAA/B;AACA,UAAIjK,IAAI,GAAG;AACTgJ,gBAAQ,EAAEnH,SADD,EAAX;;AAGA,aAAO,IAAIyD,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C7F,cAAM,CAAC8F,cAAP,CAAsBN,GAAtB,EAA2BnF,IAA3B,EAAiC,IAAjC,EAAuC,UAAU0E,GAAV,EAAe;AACpD,cAAIA,GAAG,CAACgB,UAAJ,IAAkB,GAAtB,EAA2B;AACzB,gBAAIwE,WAAW,GAAGxF,GAAG,CAAC1E,IAAJ,CAASmE,MAA3B,CADyB,CACU;;AAEnC,gBAAIgG,OAAO,GAAGD,WAAW,CAACE,aAA1B;AACA,gBAAIC,YAAY,GAAGH,WAAW,CAACI,cAA/B;AACA,gBAAIC,MAAM,GAAGL,WAAW,CAACM,QAAzB;AACAN,uBAAW,CAACO,aAAZ,GAA4BP,WAAW,CAACQ,UAAxC;AACAR,uBAAW,CAACS,KAAZ,GAAoBT,WAAW,CAACU,YAAhC,CAPyB,CAOqB;AAC9C;;AAEA3H,gBAAI,CAACM,OAAL,CAAa;AACX9C,sBAAQ,EAAEyJ,WADC;AAEXrJ,wBAAU,EAAEqJ,WAAW,CAACW,OAFb;AAGX5I,2BAAa,EAAEiI,WAAW,CAACW,OAAZ,CAAoB/G,MAApB,GAA6B,CAA7B,GAAiC,IAAjC,GAAwC,KAH5C;AAIXhD,oBAAM,EAAEoJ,WAAW,CAACY,cAJT;AAKX;AACA5I,qBAAO,EAAEgI,WAAW,CAACvE,MANV;AAOXxD,4BAAc,EAAE+H,WAAW,CAACQ,UAPjB;AAQXtI,wBAAU,EAAE8H,WAAW,CAACU,YARb,EAAb;;AAUA3H,gBAAI,CAAC8H,aAAL,CAAmBb,WAAnB,EApByB,CAoBQ;AACjC;;AAEAjH,gBAAI,CAAC+H,eAAL;AACArL,kBAAM,CAACiF,QAAP,CAAgB3B,IAAhB;AACD,WAzBD,MAyBO;AACLtD,kBAAM,CAACiF,QAAP,CAAgB3B,IAAhB;AACAtD,kBAAM,CAACoG,KAAP,CAAa,WAAb;AACD;;AAEDR,iBAAO,CAAC,QAAD,CAAP;AACD,SAhCD;AAiCA5F,cAAM,CAAC8F,cAAP,CAAsBuE,YAAtB,EAAoC,EAApC,EAAwC,IAAxC,EAA8C,UAAUtF,GAAV,EAAe;AAC3D,cAAIA,GAAG,CAACgB,UAAJ,IAAkB,GAAtB,EAA2B;AACzBzC,gBAAI,CAACM,OAAL,CAAa;AACXtC,wBAAU,EAAEyD,GAAG,CAAC1E,IAAJ,CAASmE,MAAT,CAAgBmF,QADjB,EAAb;;AAGD;AACF,SAND;AAOD,OAzCM,CAAP;AA0CD,KAxfM;AAyfP;AACAyB,iBAAa,EAAE,uBAAU/C,OAAV,EAAmB;AAChC;AACA,UAAIiD,cAAc,GAAG,EAArB;AACA,UAAIC,gBAAgB,GAAG,IAAvB;AACA,UAAIC,UAAU,GAAG,EAAjB;AACA,UAAIC,cAAc,GAAG,EAArB,CALgC,CAKP;;AAEzB,WAAK,IAAIhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACE,UAAR,CAAmBpE,MAAvC,EAA+C,EAAEsE,CAAjD,EAAoD;AAClD,YAAIiD,QAAQ,GAAGrD,OAAO,CAACE,UAAR,CAAmBE,CAAnB,CAAf;;AAEA,YAAI,CAACiD,QAAQ,CAACC,cAAd,EAA8B;AAC5BH,oBAAU,CAAC/C,CAAD,CAAV,GAAgB,EAAhB;;AAEA,eAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAAC1C,KAAT,CAAe7E,MAAnC,EAA2CyH,CAAC,EAA5C,EAAgD;AAC9CJ,sBAAU,CAAC/C,CAAD,CAAV,CAAcoD,IAAd,CAAmBH,QAAQ,CAAC1C,KAAT,CAAe4C,CAAf,EAAkBE,EAArC;AACD;AACF;AACF,OAjB+B,CAiB9B;;;AAGFN,gBAAU,GAAGxL,MAAM,CAAC+L,cAAP,CAAsBP,UAAtB,CAAb;;AAEA,UAAIA,UAAU,CAACrH,MAAX,IAAqBqH,UAAU,CAAC,CAAD,CAAV,YAAyBQ,KAAlD,EAAyD;AACvD,aAAK,IAAIvD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,UAAU,CAACrH,MAA/B,EAAuCsE,CAAC,EAAxC,EAA4C;AAC1C+C,oBAAU,CAAC/C,CAAD,CAAV,CAAcnI,IAAd,CAAmB,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACjC,mBAAOD,CAAC,GAAGC,CAAX;AACD,WAFD;AAGD;AACF,OA5B+B,CA4B9B;;;AAGF,WAAKlF,OAAL,CAAa;AACXlC,mBAAW,EAAE,KAAK0G,gBAAL,EADF,EAAb;;AAGA,UAAIzF,aAAa,GAAG,UAApB;AACA,UAAIE,kBAAkB,GAAG,UAAzB;;AAEA,WAAK,IAAI4F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACK,KAAR,CAAcvE,MAAlC,EAA0C,EAAEsE,CAA5C,EAA+C;AAC7C,YAAIwD,WAAW,GAAG5D,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBC,KAArB,CAA2B,GAA3B,CAAlB;;AAEA,YAAIsD,cAAc,GAAG7D,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBwC,YAAtC;AACIkB,2BAAmB,GAAG9D,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBuC,KAD3C;AAEA,YAAIoB,cAAc,GAAG,KAArB;;AAEA,YAAIvJ,kBAAkB,GAAGsJ,mBAAzB,EAA8C;AAC5C,cAAIE,GAAG,GAAG,EAAV;;AAEA,cAAIhE,OAAO,CAACiE,eAAR,GAA0B,CAA1B,IAA+BjE,OAAO,CAACkE,UAAvC,IAAqDlE,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBuB,SAA1E,EAAqF;AACnF;AACA,iBAAK,IAAIwC,GAAG,GAAG,CAAV,EAAaC,GAAG,GAAGR,WAAW,CAAC9H,MAApC,EAA4CqI,GAAG,GAAGC,GAAlD,EAAuDD,GAAG,EAA1D,EAA8D;AAC5DH,iBAAG,CAACR,IAAJ,CAASa,QAAQ,CAACT,WAAW,CAACO,GAAD,CAAZ,CAAjB;AACD;;AAEDlB,0BAAc,GAAGe,GAAjB;AACAd,4BAAgB,GAAG,CAAC;AAClBvC,mBAAK,EAAEsC,cADW;AAElB5C,mBAAK,EAAEL,OAAO,CAACK,KAAR,CAAcD,CAAd,CAFW,EAAD,CAAnB;;AAIA2D,0BAAc,GAAG,IAAjB;AACAvJ,8BAAkB,GAAGsJ,mBAArB;AACAxJ,yBAAa,GAAGuJ,cAAhB;AACD,WAdD,MAcO,IAAI,CAAC7D,OAAO,CAACiE,eAAT,GAA2B,CAA3B,IAAgC,CAACjE,OAAO,CAACkE,UAA7C,EAAyD;AAC9D;AACA,iBAAK,IAAIC,GAAG,GAAG,CAAV,EAAaC,GAAG,GAAGR,WAAW,CAAC9H,MAApC,EAA4CqI,GAAG,GAAGC,GAAlD,EAAuDD,GAAG,EAA1D,EAA8D;AAC5DH,iBAAG,CAACR,IAAJ,CAASa,QAAQ,CAACT,WAAW,CAACO,GAAD,CAAZ,CAAjB;AACD;;AAEDlB,0BAAc,GAAGe,GAAjB;AACAd,4BAAgB,GAAG,CAAC;AAClBvC,mBAAK,EAAEsC,cADW;AAElB5C,mBAAK,EAAEL,OAAO,CAACK,KAAR,CAAcD,CAAd,CAFW,EAAD,CAAnB;;AAIA2D,0BAAc,GAAG,IAAjB;AACAvJ,8BAAkB,GAAGsJ,mBAArB;AACAxJ,yBAAa,GAAGuJ,cAAhB;AACD;AACF;;AAEDD,mBAAW,CAAC3L,IAAZ,CAAiB,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AAC/B,iBAAOD,CAAC,GAAGC,CAAX;AACD,SAFD;;AAIAmD,mBAAW,GAAGA,WAAW,CAAClD,IAAZ,CAAiB,GAAjB,CAAd;;AAEA,aAAK,IAAI6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,UAAU,CAACrH,MAA/B,EAAuCyH,CAAC,EAAxC,EAA4C;AAC1C,cAAIe,UAAU,GAAG,EAAjB;;AAEA,cAAInB,UAAU,CAACI,CAAD,CAAV,YAAyBI,KAA7B,EAAoC;AAClCW,sBAAU,GAAGnB,UAAU,CAACI,CAAD,CAAV,CAAc7C,IAAd,CAAmB,GAAnB,CAAb;AACD,WAFD,MAEO,IAAIyC,UAAU,CAACI,CAAD,CAAV,YAAyBgB,MAA7B,EAAqC;AAC1CD,sBAAU,GAAG,EAAb;AACD,WAFM,MAEA;AACLA,sBAAU,GAAGnB,UAAU,CAACI,CAAD,CAAvB;AACD;;AAED,cAAIK,WAAW,IAAIU,UAAnB,EAA+B;AAC7B,gBAAItE,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBuB,SAAjB,IAA8B,IAAlC,EAAwC;AACtCyB,4BAAc,CAACI,IAAf,CAAoB;AAClB7C,qBAAK,EAAEwC,UAAU,CAACI,CAAD,CADC;AAElBlD,qBAAK,EAAEL,OAAO,CAACK,KAAR,CAAcD,CAAd,CAFW,EAApB;;AAID;AACF;AACF;AACF;;AAED,UAAIjG,cAAc,GAAG,KAAK1B,QAAL,CAAcgK,aAAnC;AACA,UAAIrI,UAAU,GAAG,KAAK3B,QAAL,CAAckK,KAA/B;AACA,WAAKpH,OAAL,CAAa;AACXlB,iBAAS,EAAEC,aADA;AAEXA,qBAAa,EAAEA,aAFJ;AAGXC,sBAAc,EAAEC,kBAHL;AAIXA,0BAAkB,EAAEA,kBAJT;AAKXL,sBAAc,EAAEqK,UAAU,CAACrK,cAAD,CAAV,CAA2BsK,OAA3B,CAAmC,CAAnC,CALL;AAMXrK,kBAAU,EAAEA,UAND;AAOXK,oBAAY,EAAEyI,gBAPH,EAAb;AAQI;;AAEJ,WAAKjD,YAAL,GAAoBgD,cAApB;AACA,WAAK1H,OAAL,CAAa;AACXb,qBAAa,EAAE,KAAKD,YAAL,GAAoB,IAApB,GAA2B,KAD/B,EAAb;;AAGA,WAAKiK,eAAL;AACAzB,oBAAc,GAAG,EAAjB;AACAC,sBAAgB,GAAG,IAAnB;AACA,WAAK3H,OAAL,CAAa;AACXd,oBAAY,EAAE,IADH;AAEXC,qBAAa,EAAE,KAFJ,EAAb;;AAIA,WAAKuF,YAAL,GAAoB,EAApB;;AAEA,UAAImD,cAAc,CAACtH,MAAf,IAAyB,CAA7B,EAAgC;AAC9BmH,sBAAc,GAAGG,cAAc,CAAC,CAAD,CAAd,CAAkBzC,KAAlB,YAAmCgD,KAAnC,GAA2CP,cAAc,CAAC,CAAD,CAAd,CAAkBzC,KAA7D,GAAqE,CAACyC,cAAc,CAAC,CAAD,CAAd,CAAkBzC,KAAnB,CAAtF;AACAuC,wBAAgB,GAAGE,cAAc,CAAC,CAAD,CAAd,CAAkB/C,KAArC;AACD;;AAED,UAAI+C,cAAc,CAACtH,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,aAAK,IAAIsE,CAAT,IAAcJ,OAAO,CAACE,UAAtB,EAAkC;AAChC,cAAIS,KAAK,GAAGX,OAAO,CAACE,UAAR,CAAmBE,CAAnB,EAAsBO,KAAlC;;AAEA,eAAK,IAAI4C,CAAT,IAAc5C,KAAd,EAAqB;AACnB,gBAAIgE,UAAU,GAAG,CAAjB;;AAEA,iBAAK,IAAIC,CAAT,IAAcxB,cAAd,EAA8B;AAC5B,kBAAIyB,IAAI,GAAG,IAAIC,MAAJ,CAAWnE,KAAK,CAAC4C,CAAD,CAAL,CAASE,EAApB,EAAwBsB,IAAxB,CAA6B3B,cAAc,CAACwB,CAAD,CAAd,CAAkBjE,KAA/C,CAAX;;AAEA,kBAAIkE,IAAJ,EAAU;AACRF,0BAAU;AACX;AACF;;AAED,gBAAIA,UAAU,IAAIvB,cAAc,CAACtH,MAAjC,EAAyC;AACvCmH,4BAAc,CAACO,IAAf,CAAoB7C,KAAK,CAAC4C,CAAD,CAAL,CAASE,EAA7B;AACD;AACF;AACF;AACF;;AAED,WAAKlI,OAAL,CAAa;AACXd,oBAAY,EAAEyI,gBADH,EAAb;;AAGA,WAAKjD,YAAL,GAAoBgD,cAApB;AACA,WAAK1H,OAAL,CAAa;AACXb,qBAAa,EAAE,KAAKD,YAAL,GAAoB,IAApB,GAA2B,KAD/B,EAAb;;AAGA,WAAKiK,eAAL;AACD,KAhqBM;AAiqBP;AACAA,mBAAe,EAAE,2BAAY;AAC3B,UAAIzJ,IAAI,GAAG,IAAX;AACA,UAAI+E,OAAO,GAAG/E,IAAI,CAACxC,QAAnB;;AAEA,UAAIwC,IAAI,CAACgF,YAAL,CAAkBnE,MAAlB,GAA2BkE,OAAO,CAACE,UAAR,CAAmBpE,MAAlD,EAA0D;AACxDb,YAAI,CAACZ,SAAL,GAAiBY,IAAI,CAACX,aAAtB;AACAW,YAAI,CAACV,cAAL,GAAsBU,IAAI,CAACT,kBAA3B;AACAS,YAAI,CAACM,OAAL,CAAa;AACXvC,qBAAW,EAAE,SADF;AAEXJ,mBAAS,EAAEoH,OAAO,CAACgF,UAFR;AAGX7K,wBAAc,EAAEc,IAAI,CAACxC,QAAL,CAAcgK,aAHnB;AAIXrI,oBAAU,EAAEa,IAAI,CAACxC,QAAL,CAAckK,KAJf,EAAb;;AAMA1H,YAAI,CAACgK,aAAL;AACA;AACD;;AAED,UAAIjM,WAAW,GAAG,EAAlB;AACA,UAAIqB,SAAS,GAAG,CAAhB;AACA,UAAIE,cAAc,GAAG,CAArB;AACA,UAAIJ,cAAc,GAAGc,IAAI,CAACxC,QAAL,CAAcgK,aAAnC;AACA,UAAIrI,UAAU,GAAGa,IAAI,CAACxC,QAAL,CAAckK,KAA/B;AACA1H,UAAI,CAACM,OAAL,CAAa;AACXvC,mBAAW,EAAEA,WADF;AAEXqB,iBAAS,EAAEA,SAFA;AAGXE,sBAAc,EAAEA,cAHL;AAIXJ,sBAAc,EAAEA,cAJL;AAKXC,kBAAU,EAAEA,UALD,EAAb;;;AAQA,WAAK,IAAIgG,CAAT,IAAcJ,OAAO,CAACE,UAAtB,EAAkC;AAChC,YAAIS,KAAK,GAAGX,OAAO,CAACE,UAAR,CAAmBE,CAAnB,EAAsBO,KAAlC;;AAEA,aAAK,IAAI4C,CAAT,IAAc5C,KAAd,EAAqB;AACnB,eAAK,IAAIiE,CAAT,IAAc3J,IAAI,CAACgF,YAAnB,EAAiC;AAC/B,gBAAIhF,IAAI,CAACgF,YAAL,CAAkB2E,CAAlB,KAAwBjE,KAAK,CAAC4C,CAAD,CAAL,CAASE,EAArC,EAAyC;AACvCzK,yBAAW,IAAI2H,KAAK,CAAC4C,CAAD,CAAL,CAASlF,IAAT,GAAgB,GAA/B,CADuC,CACH;AACpC;AACD;AACF;AACF;AACF;;AAED,UAAIrF,WAAW,IAAI,EAAnB,EAAuB;AACrB,aAAK,IAAIoH,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,cAAIA,KAAK,GAAGL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA7B;AACAD,eAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAR;AACAF,eAAK,CAACpI,IAAN,CAAW,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACzB,mBAAOD,CAAC,GAAGC,CAAX;AACD,WAFD;AAGAJ,eAAK,GAAGA,KAAK,CAACK,IAAN,CAAW,GAAX,CAAR;AACA,cAAIC,KAAK,GAAG1F,IAAI,CAACgF,YAAL,CAAkBS,IAAlB,CAAuB,GAAvB,CAAZ;;AAEA,cAAIC,KAAK,IAAIN,KAAb,EAAoB;AAClBpF,gBAAI,CAACrC,SAAL,GAAiBoH,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiB4E,UAAlC;AACA3K,qBAAS,GAAG2F,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBwC,YAA7B;AACArI,0BAAc,GAAGyF,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBsC,UAAlC;AACD;AACF;;AAEDzH,YAAI,CAAC3B,WAAL,GAAmB,CAAC;AAClB4L,oBAAU,EAAElF,OAAO,CAACkF,UADF;AAElBlE,kBAAQ,EAAEhB,OAAO,CAACgB,QAFA;AAGlBC,iBAAO,EAAEN,KAHS;AAIlBO,gBAAM,EAAEjG,IAAI,CAACnC,MAJK;AAKlB4J,oBAAU,EAAEnI,cALM;AAMlBqI,sBAAY,EAAEvI,SANI;AAOlB8K,sBAAY,EAAE,QAAQnM,WAPJ;AAQlBoM,iBAAO,EAAEnK,IAAI,CAACrC,SARI,EAAD,CAAnB;;AAUAI,mBAAW,GAAG,QAAQA,WAAtB;AACA,YAAImB,cAAc,GAAGI,cAArB;AACA,YAAIH,UAAU,GAAGC,SAAjB;AACAY,YAAI,CAACM,OAAL,CAAa;AACXvC,qBAAW,EAAEA,WADF;AAEXqB,mBAAS,EAAEA,SAFA;AAGXE,wBAAc,EAAEA,cAHL;AAIXJ,wBAAc,EAAEA,cAJL;AAKXC,oBAAU,EAAEA,UALD;AAMXxB,mBAAS,EAAEqC,IAAI,CAACrC,SANL,EAAb;;AAQD;;AAEDqC,UAAI,CAACgK,aAAL;AACD,KAtvBM;AAuvBP;AACAI,mBAAe,EAAE,yBAAUvI,CAAV,EAAa;AAC5B,UAAI7B,IAAI,GAAG,IAAX;AACA,UAAI+E,OAAO,GAAG,KAAKvH,QAAnB;AACA,UAAI,CAACuH,OAAL,EAAc;AACd,UAAIqD,QAAQ,GAAGvG,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBkF,QAAvC;AACA,UAAIiC,IAAI,GAAGxI,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBmH,IAAnC;;AAEA,UAAIA,IAAI,CAAChC,cAAT,EAAyB;AACvB,YAAI3C,KAAK,GAAG,GAAG4E,MAAH,CAAU,KAAK5M,aAAf,CAAZ;AACA,YAAI6M,KAAK,GAAG7E,KAAK,CAAC8E,OAAN,CAAcH,IAAI,CAAC7B,EAAnB,CAAZ;;AAEA,YAAI,CAAC,CAAD,IAAM+B,KAAV,EAAiB;AACf7E,eAAK,CAAC6C,IAAN,CAAW8B,IAAI,CAAC7B,EAAhB;AACD,SAFD,MAEO;AACL9C,eAAK,CAAC+E,MAAN,CAAaF,KAAb,EAAoB,CAApB;AACD;;AAED,aAAKjK,OAAL,CAAa;AACX5C,uBAAa,EAAEgI,KADJ,EAAb;;AAGD,OAbD,MAaO;AACL,YAAIgF,OAAO,GAAG,KAAd;;AAEA,aAAK,IAAIvF,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,cAAIL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBuB,SAAjB,IAA8B,IAAlC,EAAwC;AACtC;AACD;;AAED,cAAI3B,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBmF,OAArB,CAA6BG,MAAM,CAACN,IAAI,CAAC7B,EAAN,CAAnC,KAAiD,CAArD,EAAwD;AACtDkC,mBAAO,GAAG,IAAV;AACA;AACD;AACF;;AAED,YAAI,CAACA,OAAL,EAAc;AACZhO,gBAAM,CAACoG,KAAP,CAAa,MAAb;AACA;AACD;;AAED,YAAIsC,KAAK,GAAG,IAAZ;AACA,YAAIM,KAAK,GAAG,GAAG4E,MAAH,CAAU,KAAKtF,YAAf,CAAZ;AACA,YAAIuF,KAAK,GAAG7E,KAAK,CAAC8E,OAAN,CAAcH,IAAI,CAAC7B,EAAnB,CAAZ;;AAEA,YAAI,CAAC,CAAD,IAAM+B,KAAV,EAAiB;AACf7E,eAAK,CAAC6C,IAAN,CAAW8B,IAAI,CAAC7B,EAAhB;AACD,SAFD,MAEO;AACL9C,eAAK,CAAC+E,MAAN,CAAaF,KAAb,EAAoB,CAApB;AACD;;AAED,aAAK,IAAIpF,CAAT,IAAciD,QAAQ,CAAC1C,KAAvB,EAA8B;AAC5B,cAAI0C,QAAQ,CAAC1C,KAAT,CAAeP,CAAf,EAAkBqD,EAAlB,IAAwB6B,IAAI,CAAC7B,EAAjC,EAAqC;AACnC,gBAAI+B,KAAK,GAAG7E,KAAK,CAAC8E,OAAN,CAAcpC,QAAQ,CAAC1C,KAAT,CAAeP,CAAf,EAAkBqD,EAAhC,CAAZ;;AAEA,gBAAI,CAAC,CAAD,IAAM+B,KAAV,EAAiB;AACf7E,mBAAK,CAAC+E,MAAN,CAAaF,KAAb,EAAoB,CAApB;AACD;AACF;AACF;;AAED7E,aAAK,GAAGA,KAAK,CAACkF,MAAN,CAAa,UAAUP,IAAV,EAAgBE,KAAhB,EAAuBM,IAAvB,EAA6B;AAChD,iBAAOA,IAAI,CAACL,OAAL,CAAaH,IAAb,MAAuBE,KAA9B;AACD,SAFO,CAAR;AAGA7E,aAAK,CAAC1I,IAAN,CAAW,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACzB,iBAAOD,CAAC,GAAGC,CAAX;AACD,SAFD;;AAIA,YAAIE,KAAK,CAAC7E,MAAV,EAAkB;AAChB,cAAIwE,GAAG,GAAGK,KAAK,CAACD,IAAN,CAAW,GAAX,CAAV;;AAEA,eAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACK,KAAR,CAAcvE,MAAlC,EAA0C,EAAEsE,CAA5C,EAA+C;AAC7C,gBAAIwD,WAAW,GAAG5D,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBC,KAArB,CAA2B,GAA3B,CAAlB;;AAEAqD,uBAAW,CAAC3L,IAAZ,CAAiB,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AAC/B,qBAAOD,CAAC,GAAGC,CAAX;AACD,aAFD;;AAIAmD,uBAAW,GAAGA,WAAW,CAAClD,IAAZ,CAAiB,GAAjB,CAAd;;AAEA,gBAAIkD,WAAW,IAAItD,GAAnB,EAAwB;AACtBD,mBAAK,GAAGL,OAAO,CAACK,KAAR,CAAcD,CAAd,CAAR;AACA;AACD;AACF;AACF;;AAED,YAAIC,KAAK,IAAIA,KAAK,CAACsB,SAAnB,EAA8B;AAC5B,eAAKlH,YAAL,GAAoB4F,KAApB,EAA2B,KAAKJ,YAAL,GAAoBU,KAA/C,EAAsD,KAAKpF,OAAL,CAAa;AACjEzC,kBAAM,EAAEkH,OAAO,CAAC8C,cADiD,EAAb,CAAtD;;AAGD,SAJD,MAIO;AACL,cAAInC,KAAK,CAAC7E,MAAN,GAAekE,OAAO,CAACE,UAAR,CAAmBpE,MAAtC,EAA8C;AAC5C,iBAAKrB,YAAL,GAAoB,IAApB,EAA0B,KAAKwF,YAAL,GAAoBU,KAA9C,EAAqD,KAAKpF,OAAL,CAAa;AAChEzC,oBAAM,EAAEkH,OAAO,CAAC8C,cADgD,EAAb,CAArD;;AAGD,WAJD,MAIO;AACLnL,kBAAM,CAACoG,KAAP,CAAa,MAAb;AACD;AACF;;AAED,aAAKxC,OAAL,CAAa;AACXlC,qBAAW,EAAE,KAAK0G,gBAAL,EADF,EAAb;;AAGD;;AAED,WAAK2E,eAAL;AACD,KAj2BM;AAk2BP;AACAO,iBAAa,EAAE,yBAAY;AACzB,UAAIjF,OAAO,GAAG,KAAKvH,QAAnB;AACA,UAAI4K,QAAQ,GAAGrD,OAAO,CAACE,UAAvB;;AAEA,WAAK,IAAIE,CAAT,IAAciD,QAAd,EAAwB;AACtB,YAAI1C,KAAK,GAAG0C,QAAQ,CAACjD,CAAD,CAAR,CAAYO,KAAxB;;AAEA,aAAK,IAAI4C,CAAT,IAAc5C,KAAd,EAAqB;AACnB,cAAI2E,IAAI,GAAG3E,KAAK,CAAC4C,CAAD,CAAhB;;AAEA,cAAI,CAACvD,OAAL,EAAc;AACZsF,gBAAI,CAACS,KAAL,GAAa,SAAb;AACA;AACD;;AAED,cAAI/F,OAAO,CAACiE,eAAR,IAA2B,CAA/B,EAAkC;AAChCqB,gBAAI,CAACS,KAAL,GAAa,SAAb;AACA;AACD;;AAED,cAAIC,OAAO,GAAG,EAAd;;AAEA,cAAIV,IAAI,CAAChC,cAAT,EAAyB;AACvBgC,gBAAI,CAACS,KAAL,GAAa,KAAKpN,aAAL,CAAmB8M,OAAnB,CAA2BH,IAAI,CAAC7B,EAAhC,KAAuC,CAAC,CAAxC,GAA4C,EAA5C,GAAiD,QAA9D;AACD,WAFD,MAEO;AACL6B,gBAAI,CAACS,KAAL,GAAa,KAAK9F,YAAL,CAAkBwF,OAAlB,CAA0BH,IAAI,CAAC7B,EAA/B,KAAsC,CAAC,CAAvC,GAA2C,EAA3C,GAAgD,QAA7D;AACA,gBAAIkC,OAAO,GAAG,KAAd;;AAEA,iBAAK,IAAIvF,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,kBAAIL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBuB,SAAjB,IAA8B,IAAlC,EAAwC;AACtC,oBAAIsE,cAAc,GAAG,KAAKhG,YAAL,CAAkBS,IAAlB,CAAuB,GAAvB,CAArB;;AAEA,oBAAIV,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBmF,OAArB,CAA6BG,MAAM,CAACK,cAAD,CAAnC,KAAwD,CAAxD,IAA6D,KAAKhG,YAAL,CAAkBnE,MAAlB,GAA2B,CAA5F,EAA+F;AAC7F,sBAAIoK,cAAc,GAAGlG,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBC,KAArB,CAA2B,GAA3B,CAArB;;AAEA,uBAAK,IAAIgD,CAAT,IAAc2C,cAAd,EAA8B;AAC5B,wBAAIA,cAAc,CAAC3C,CAAD,CAAd,IAAqB,KAAKtD,YAA9B,EAA4C;AAC1C,2BAAK,IAAI2E,CAAT,IAAc5E,OAAO,CAACE,UAAtB,EAAkC;AAChC,6BAAK,IAAIiG,CAAT,IAAcnG,OAAO,CAACE,UAAR,CAAmB0E,CAAnB,EAAsBjE,KAApC,EAA2C;AACzC,8BAAIX,OAAO,CAACE,UAAR,CAAmB0E,CAAnB,EAAsBjE,KAAtB,CAA4BwF,CAA5B,EAA+B1C,EAA/B,IAAqCyC,cAAc,CAAC3C,CAAD,CAAvD,EAA4D;AAC1DvD,mCAAO,CAACE,UAAR,CAAmB0E,CAAnB,EAAsBjE,KAAtB,CAA4BwF,CAA5B,EAA+BJ,KAA/B,GAAuC,SAAvC;AACD;AACF;AACF;AACF;AACF;AACF,iBAdD,MAcO;AACL;AACD;AACF;;AAED,kBAAI/F,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAAjB,CAAqBmF,OAArB,CAA6BG,MAAM,CAACN,IAAI,CAAC7B,EAAN,CAAnC,KAAiD,CAArD,EAAwD;AACtDkC,uBAAO,GAAG,IAAV;AACA;AACD;AACF;;AAED,gBAAI,CAACA,OAAL,EAAc;AACZL,kBAAI,CAACS,KAAL,IAAc,SAAd;AACD;AACF;AACF;AACF;;AAED,WAAKxK,OAAL,CAAa;AACX9C,gBAAQ,EAAEuH,OADC,EAAb;;AAGD,KAt6BM;AAu6BP;AACAD,oBAAgB,EAAE,4BAAY;AAC5B,UAAIC,OAAO,GAAG,KAAKvH,QAAnB;AACA,UAAI2N,QAAQ,GAAG,KAAf;;AAEA,UAAIpG,OAAO,CAACa,QAAR,IAAoBb,OAAO,CAACa,QAAR,CAAiBC,MAAjB,IAA2B,CAAnD,EAAsD;AACpD,aAAKvF,OAAL,CAAa;AACXZ,oBAAU,EAAEqF,OAAO,CAACa,QAAR,CAAiBwF,QADlB,EAAb;;AAGA,eAAO,KAAP;AACD;;AAED,UAAI,CAACrG,OAAD,IAAYA,OAAO,CAAC2B,SAAR,IAAqB,CAArC,EAAwC;AACtC,aAAKpG,OAAL,CAAa;AACXZ,oBAAU,EAAE,UADD,EAAb;;AAGA,eAAO,KAAP;AACD;;AAED,UAAIqF,OAAO,CAACkE,UAAR,IAAsB,CAA1B,EAA6B;AAC3B,aAAK3I,OAAL,CAAa;AACXZ,oBAAU,EAAE,UADD,EAAb;;AAGA,eAAO,KAAP;AACD;;AAED,UAAI,KAAKsF,YAAL,CAAkBnE,MAAlB,IAA4BkE,OAAO,CAACE,UAAR,CAAmBpE,MAAnD,EAA2D;AACzD,aAAK,IAAIsE,CAAT,IAAcJ,OAAO,CAACE,UAAtB,EAAkC;AAChC,cAAI,CAACF,OAAO,CAACE,UAAR,CAAmBE,CAAnB,EAAsBkD,cAA3B,EAA2C;AACzC8C,oBAAQ,GAAG,IAAX;AACA;AACD;AACF;;AAED,YAAIA,QAAJ,EAAc;AACZ,cAAI,CAAC,KAAKnG,YAAN,IAAsB,CAAC,KAAKA,YAAL,CAAkBnE,MAA7C,EAAqD;AACnD,mBAAO,KAAP;AACD;;AAED,cAAI,CAAC,KAAKrB,YAAV,EAAwB;AACtB,mBAAO,KAAP;AACD;AACF;AACF;;AAED,WAAKc,OAAL,CAAa;AACXZ,kBAAU,EAAE,MADD,EAAb;;AAGA,aAAO,IAAP;AACD,KAx9BM;AAy9BP;AACAqI,mBAAe,EAAE,2BAAY;AAC3B,UAAI/H,IAAI,GAAG,IAAX;;AAEA,UAAIA,IAAI,CAACxC,QAAL,CAAckK,KAAd,IAAuB1H,IAAI,CAACxC,QAAL,CAAcgK,aAAzC,EAAwD;AACtD,YAAIE,KAAK,GAAG1H,IAAI,CAACxC,QAAL,CAAckK,KAAd,GAAsB1H,IAAI,CAACZ,SAAvC;AACIiM,kBAAU,GAAGrL,IAAI,CAACxC,QAAL,CAAcgK,aAAd,GAA8BxH,IAAI,CAACV,cADpD;;AAGA,YAAIoI,KAAK,IAAI2D,UAAb,EAAyB;AACvBrL,cAAI,CAACM,OAAL,CAAa;AACXnC,wBAAY,EAAE,IADH,EAAb;;AAGD,SAJD,MAIO;AACL6B,cAAI,CAACM,OAAL,CAAa;AACXnC,wBAAY,EAAE,KADH,EAAb;;AAGD;AACF,OAbD,MAaO;AACL6B,YAAI,CAACM,OAAL,CAAa;AACXnC,sBAAY,EAAE,KADH,EAAb;;AAGD;AACF,KA/+BM;AAg/BP;AACAmN,aAAS,EAAE,mBAAUzJ,CAAV,EAAa;AACtB,UAAI7B,IAAI,GAAG,IAAX;AACA,UAAI+E,OAAO,GAAG/E,IAAI,CAACxC,QAAnB;AACA,UAAImI,MAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYsE,SAAzB;;AAEA,UAAI1B,OAAO,CAACa,QAAR,IAAoBb,OAAO,CAACa,QAAR,CAAiBC,MAAjB,IAA2B,CAAnD,EAAsD;AACpDF,cAAM,GAAGpJ,GAAG,CAAC4F,OAAJ,CAAYsE,SAArB;AACD;;AAED,UAAIvB,UAAU,GAAG,EAAjB;;AAEA,WAAK,IAAIC,CAAT,IAAcJ,OAAO,CAACK,KAAtB,EAA6B;AAC3B,YAAIA,KAAK,GAAGL,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA7B;AACAD,aAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAR;AACAF,aAAK,CAACpI,IAAN,CAAW,UAAUuI,CAAV,EAAaC,CAAb,EAAgB;AACzB,iBAAOD,CAAC,GAAGC,CAAX;AACD,SAFD;AAGAJ,aAAK,GAAGA,KAAK,CAACK,IAAN,CAAW,GAAX,CAAR;AACA,YAAIC,KAAK,GAAG1F,IAAI,CAACgF,YAAL,CAAkBS,IAAlB,CAAuB,GAAvB,CAAZ;;AAEA,YAAIC,KAAK,IAAIN,KAAb,EAAoB;AAClBF,oBAAU,GAAGH,OAAO,CAACK,KAAR,CAAcD,CAAd,EAAiBE,GAA9B;AACA;AACD;AACF;;AAED,UAAIrF,IAAI,CAACgF,YAAL,CAAkBnE,MAAlB,IAA4BkE,OAAO,CAACE,UAAR,CAAmBpE,MAAnD,EAA2D;AACzD;AACA,YAAIgB,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwBqI,SAAxB,IAAqC,CAAzC,EAA4C;AAC1C,cAAI,CAACvL,IAAI,CAAC8E,gBAAL,EAAL,EAA8B,OADY,CACJ;;AAEtC,cAAI9E,IAAI,CAACnC,MAAL,IAAemC,IAAI,CAACxC,QAAL,CAAcqK,cAAjC,EAAiD;AAC/CnL,kBAAM,CAACoG,KAAP,CAAa,YAAb;AACA;AACD,WANyC,CAMxC;;;AAGF,cAAI9C,IAAI,CAACnC,MAAL,IAAe,CAAnB,EAAsB,CAAC;AACtB,WADD,MACO,IAAImC,IAAI,CAACnC,MAAL,KAAgB,CAApB,EAAuB;AAC5BmC,gBAAI,CAACM,OAAL,CAAa;AACXzC,oBAAM,EAAEmC,IAAI,CAACnC,MAAL,GAAc,CADX;AAEXI,mBAAK,EAAE,IAFI,EAAb;;AAID,WALM,MAKA;AACL+B,gBAAI,CAACM,OAAL,CAAa;AACXzC,oBAAM,EAAEmC,IAAI,CAACnC,MAAL,GAAc,CADX,EAAb;;AAGD,WAnByC,CAmBxC;;;AAGF,cAAImC,IAAI,CAACnC,MAAL,IAAe,CAAnB,EAAsB;AACpB,gBAAIiI,OAAO,GAAG;AACZC,sBAAQ,EAAEhB,OAAO,CAACgB,QADN;AAEZC,qBAAO,EAAEd,UAFG;AAGZe,oBAAM,EAAEjG,IAAI,CAACnC,MAHD,EAAd;;AAKAnB,kBAAM,CAAC8F,cAAP,CAAsBmD,MAAtB,EAA8BG,OAA9B,EAAuC,IAAvC,EAA6C,UAAUK,GAAV,EAAe;AAC1D,kBAAI,CAACA,GAAL,EAAU;;AAEV,kBAAIA,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBwF,SAAhB,IAA6B,CAAjC,EAAoC;AAClChK,sBAAM,CAACoG,KAAP,CAAaqD,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBoF,GAA7B;AACA;AACD;AACF,aAPD;AAQD;AACF,SArCD,MAqCO;AACL;AACA;AACA,cAAItG,IAAI,CAACxC,QAAL,CAAcgO,cAAd,IAAgC,CAAhC,IAAqCxL,IAAI,CAACnC,MAAL,IAAemC,IAAI,CAACxC,QAAL,CAAcgO,cAAtE,EAAsF;AACpF9O,kBAAM,CAACoG,KAAP,CAAa,QAAb;AACA;AACD,WANI,CAMH;;;AAGF9C,cAAI,CAACM,OAAL,CAAa;AACXzC,kBAAM,EAAEmC,IAAI,CAACnC,MAAL,GAAc,CADX;AAEXI,iBAAK,EAAE,KAFI,EAAb;;;AAKA,cAAI+B,IAAI,CAACnC,MAAL,GAAc,CAAlB,EAAqB;AACnB,gBAAIiI,OAAO,GAAG;AACZC,sBAAQ,EAAEhB,OAAO,CAACgB,QADN;AAEZC,qBAAO,EAAEd,UAFG;AAGZe,oBAAM,EAAEjG,IAAI,CAACnC,MAHD,EAAd;;AAKAnB,kBAAM,CAAC8F,cAAP,CAAsBmD,MAAtB,EAA8BG,OAA9B,EAAuC,IAAvC,EAA6C,UAAUK,GAAV,EAAe;AAC1D,kBAAI,CAACA,GAAL,EAAU;;AAEV,kBAAIA,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBwF,SAAhB,IAA6B,CAAjC,EAAoC;AAClChK,sBAAM,CAACoG,KAAP,CAAaqD,GAAG,CAACpJ,IAAJ,CAASmE,MAAT,CAAgBoF,GAA7B;AACAtG,oBAAI,CAACM,OAAL,CAAa;AACXzC,wBAAM,EAAEmC,IAAI,CAACnC,MAAL,GAAc,CADX,EAAb;;AAGAmC,oBAAI,CAACyJ,eAAL;AACA;AACD;AACF,aAXD;AAYD;AACF;;AAEDzJ,YAAI,CAAC3B,WAAL,CAAiBoN,GAAjB,GAAuBzL,IAAI,CAACnC,MAA5B;AACD,OA3ED,MA2EO;AACL,YAAImC,IAAI,CAACvC,aAAL,IAAsB,CAA1B,EAA6B;AAC3BuC,cAAI,CAACwD,cAAL;AACD,SAFD,MAEO;AACL9G,gBAAM,CAACoG,KAAP,CAAa,SAAb;AACD;AACF;;AAED9C,UAAI,CAACyJ,eAAL;AACD,KA/lCM;;AAimCP;AACAiC,eAlmCO,uBAkmCK7J,CAlmCL,EAkmCQ;AACb,UAAI8J,OAAO,GAAG9J,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwByI,OAAtC;;AAEA,UAAIpP,GAAG,CAACiI,eAAR,EAAyB;AACvB9H,cAAM,CAACwJ,YAAP,CAAoBrE,CAApB;AACD;;AAED8B,QAAE,CAACgD,UAAH,CAAc;AACZC,WAAG,EAAE,yDAAyD+E,OADlD,EAAd;;AAGD,KA5mCM;;AA8mCPrL,WAAO,EAAE,iBAAUsL,GAAV,EAAe;AACtB,UAAI5L,IAAI,GAAG,IAAX;AACA,UAAI6L,IAAI,GAAG,EAAX;AACA,UAAIC,GAAJ,EAAS/O,IAAT;AACAuM,YAAM,CAACuC,IAAP,CAAYD,GAAZ,EAAiBG,OAAjB,CAAyB,UAAU1G,GAAV,EAAe;AACtCwG,YAAI,GAAGxG,GAAG,CAACC,KAAJ,CAAU,GAAV,CAAP;AACAwG,WAAG,GAAGF,GAAG,CAACvG,GAAD,CAAT;AACAtI,YAAI,GAAGiD,IAAI,CAACgM,KAAZ;AACAH,YAAI,CAACE,OAAL,CAAa,UAAUE,IAAV,EAAgB1B,KAAhB,EAAuB;AAClCvK,cAAI,CAACqF,GAAD,CAAJ,GAAYuG,GAAG,CAACvG,GAAD,CAAf;AACD,SAFD;AAGD,OAPD;AAQD,KA1nCM,EAjII,E;;;;;;;;;;;;ACvJf;AAAA;AAAA;AAAA;AAA08B,CAAgB,43BAAG,EAAC,C;;;;;;;;;;;ACA99B,uC","file":"pages/category/category.js","sourcesContent":["import { render, staticRenderFns } from \"./category.vue?vue&type=template&id=2b4d5648&\"\nimport script from \"./category.vue?vue&type=script&lang=js&\"\nexport * from \"./category.vue?vue&type=script&lang=js&\"\nimport style0 from \"./category.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2b4d5648', component.options)\n    } else {\n      api.reload('2b4d5648', component.options)\n    }\n    module.hot.accept(\"./category.vue?vue&type=template&id=2b4d5648&\", function () {\n      api.rerender('2b4d5648', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/xhz/Desktop/project/mmt 10.12 - 16.00/pages/category/category.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=template&id=2b4d5648&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar app = getApp().globalData;\r\nvar common = require(\"../../utils/common.js\");\r\nvar icon_url = app.dataBase.iconURL;\r\nimport no_warehouse from \"../../components/no_warehouse/no_warehouse\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      iconURL: app.dataBase.iconURL,\r\n      sort: 0,\r\n      order: 1,\r\n      currType: 1,\r\n      page: 1,\r\n      page_size: 10,\r\n      good_list: [],\r\n      topFixed: false,\r\n      // 商详\r\n      productId: 0,\r\n      itemData: {},\r\n      showSKUstatus: 0,\r\n      optionalAttrs: {},\r\n      skuImages: '',\r\n      bannerItem: [],\r\n      buynum: 1,\r\n      // 属性选择\r\n      firstIndex: -1,\r\n      choosed_sku: '',\r\n      cartAmount: 0,\r\n      // 弹窗SKU，不能减不能加\r\n      undel: true,\r\n      unadd: false,\r\n      // SKU的VIP价格和非SVIP是否相同\r\n      isPriceEqual: false,\r\n      canPurchase: false,\r\n      confirmData: {},\r\n      isAuthorization: \"\",\r\n      types: \"\",\r\n      typeTree: \"\",\r\n      animationData: \"\",\r\n      showModalStatus: false,\r\n      buy_now: \"\",\r\n      productid: 0,\r\n      showfwModalStatus: false,\r\n      showShareModalStatus: false,\r\n      showBonusModal: false,\r\n      indicatorDots: \"\",\r\n      brandID: \"\",\r\n      skuSvipCurrent: \"\",\r\n      skuCurrent: \"\",\r\n      sku_price: \"\",\r\n      min_sku_price: \"\",\r\n      sku_svip_price: \"\",\r\n      min_sku_svip_price: \"\",\r\n      currentStock: \"\",\r\n      hasDefaultSKU: \"\",\r\n      sumbitName: \"\"\r\n    };\r\n  },\r\n\r\n  components: {\r\n    no_warehouse\r\n  },\r\n  props: {},\r\n  onLoad: function (option) {\r\n    var that = this;\r\n    that.getData(); //  定位检测\r\n\r\n    that.local(function (city) {\r\n      var data = {\r\n        city: city,\r\n        isAuthorization: true // 判断是否有定位和仓库\r\n\r\n      };\r\n\r\n      if (that.isAuthorization && city.warehouse_id != -1) {\r\n        data.showPage = true;\r\n        that.setData(data);\r\n      } else {\r\n        data.showPage = false;\r\n        that.setData(data);\r\n        return false;\r\n      }\r\n    });\r\n  },\r\n  onShow: function () {\r\n    var that = this;\r\n    var pickupId = common.getStorageSync('getpickup');\r\n    // app.aldstat.sendEvent(\"get_category\", {\r\n    //   \"提货点\": pickupId.cityName\r\n    // });\r\n\r\n    if (app.dataBase.isRefresh) {\r\n      var that = this; // 重置数据，避免下拉加载列表加载原先数据\r\n\r\n      that.setData({\r\n        sort: 0,\r\n        order: 1,\r\n        currType: 1,\r\n        page: 1,\r\n        good_list: [],\r\n        topFixed: false\r\n      });\r\n      that.getData(); //  定位检测\r\n\r\n      that.local(function (city) {\r\n        var data = {\r\n          city: city,\r\n          isAuthorization: true // 判断是否有定位和仓库\r\n\r\n        };\r\n\r\n        if (that.isAuthorization && city.warehouse_id != -1) {\r\n          data.showPage = true;\r\n          that.setData(data);\r\n        } else {\r\n          data.showPage = false;\r\n          that.setData(data);\r\n          return false;\r\n        }\r\n      });\r\n      app.dataBase.isRefresh = false;\r\n    }\r\n  },\r\n  // 上拉加载更多\r\n  onReachBottom: function () {\r\n    var that = this;\r\n\r\n    if (that.good_list && that.typeTree.total != that.good_list.length) {\r\n      this.setData({\r\n        page: that.page + 1\r\n      });\r\n      that.getbrandList();\r\n    }\r\n  },\r\n  methods: {\r\n    getData: function () {\r\n      var that = this;\r\n      that.getcategoryNav().then(function (result) {\r\n        that.getbrandList(that.currType);\r\n      });\r\n    },\r\n    // 定位检测\r\n    local: function (callback) {\r\n      var that = this;\r\n      that.setData({\r\n        isAuthorization: common.getStorageSync('authSetting')['scope.userLocation']\r\n      });\r\n      var city = common.getStorageSync('city');\r\n      var pickup = common.getStorageSync('getpickup');\r\n\r\n      if (app.firstlaunchApp && city.warehouse_id == undefined) {\r\n        // 进入app后首次打开当前页面   没仓库的情况下 先获取地理定位\r\n        if (that.isAuthorization) {\r\n          // 增加加载，防止未加载完就点击\r\n          common.showLoad(that);\r\n        }\r\n\r\n        common.getpickup(function (res) {\r\n          var city = res.cities;\r\n          callback && typeof callback === \"function\" && callback(city);\r\n          common.hideLoad(that);\r\n        });\r\n      } else {\r\n        // 有自提点的情况下，直接 取自提点 不重新请求\r\n        // 第二次进入当前页（从选择定位页面进入），直接用仓库地址请求数据\r\n        callback && typeof callback === \"function\" && callback(city);\r\n      }\r\n    },\r\n    // 打开定位回调\r\n    openSet: function (e) {\r\n      var that = this;\r\n      that.setData({\r\n        isAuthorization: e.detail.isAuthorization\r\n      });\r\n      common.setStorageSync('reLoad', true);\r\n      app.dataBase.isRefresh = true;\r\n      that.onShow();\r\n    },\r\n    // 跳转指定专题页\r\n    goWebView: function (e) {\r\n      common.goAdWebView(e);\r\n    },\r\n    // 获取分类导航\r\n    getcategoryNav: function () {\r\n      var that = this;\r\n      var uri = app.getPath.categorynav;\r\n      return new Promise(function (resolve, reject) {\r\n        common.ApiGateWayTest(uri, '', true, function (res) {\r\n          if (res.statusCode == 200) {\r\n            var res = res.data.result;\r\n            that.setData({\r\n              types: res,\r\n              currType: res[0].cat_id\r\n            });\r\n            resolve('getcategoryNavSuccess');\r\n          }\r\n        });\r\n      });\r\n    },\r\n    // 商品列表\r\n    getbrandList: function () {\r\n      var that = this;\r\n      var uri = app.getPath.categoodslist;\r\n      var data = {\r\n        cat_id: that.currType,\r\n        page: that.page,\r\n        page_size: that.page_size,\r\n        sort: that.sort,\r\n        order: that.order\r\n      };\r\n      common.showLoad(that);\r\n      common.ApiGateWayTest(uri, data, true, function (res) {\r\n        common.hideLoad(that);\r\n\r\n        if (res.data.errorCode != 0) {\r\n          var res = res.data.result;\r\n\r\n          if (res.lists.length == 0) {\r\n            common.toast('没有更多商品~');\r\n          }\r\n\r\n          that.setData({\r\n            typeTree: res,\r\n            good_list: [...that.good_list, ...res.lists]\r\n          });\r\n        } else {\r\n          that.setData({\r\n            typeTree: []\r\n          });\r\n        }\r\n      });\r\n    },\r\n    sortTypes: function (e) {\r\n      var sort = Number(e.currentTarget.dataset.sort);\r\n      var order = this.order;\r\n\r\n      if (sort == 2) {\r\n        order = order == 1 ? 2 : 1;\r\n      }\r\n\r\n      this.setData({\r\n        sort,\r\n        order,\r\n        page: 1,\r\n        good_list: []\r\n      });\r\n      this.getbrandList();\r\n    },\r\n    // 二级商品分类列表\r\n    // getgoodsCategory: function(id){\r\n    //   var that = this;\r\n    //   var uri = app.getPath.goodscategory;\r\n    //   var data = {\r\n    //     page: that.data.page,\r\n    //     page_size: that.data.page_size,\r\n    //     cat_id: id\r\n    //   }\r\n    //   common.ApiGateWayTest(uri, data, true, function (res) {\r\n    //     if (res.statusCode == 200) {\r\n    //       var res = res.data.result;\r\n    //       that.setData({\r\n    //         typeTree: res.data\r\n    //       })\r\n    //     }\r\n    //   })\r\n    // },\r\n    // 选择分类\r\n    tapType: function (e) {\r\n      var that = this;\r\n      var item = e.currentTarget.dataset.item;\r\n\r\n      if (item.cat_id) {\r\n        that.setData({\r\n          currType: item.cat_id,\r\n          good_list: [],\r\n          page: 1,\r\n          sort: 0,\r\n          order: 2\r\n        });\r\n        that.getbrandList(that.currType);\r\n      } // if(item.brand_id){\r\n      //   that.setData({\r\n      //     currType: item.brand_id\r\n      //   })\r\n      //   that.getbrandList(that.data.currType);\r\n      // }else{\r\n      //   that.setData({\r\n      //     currType: item.cat_id\r\n      //   })\r\n      //   that.getgoodsCategory(that.data.currType);\r\n      // }\r\n\r\n    },\r\n    // 滚动\r\n    scrollEvent: function (e) {\r\n      var top = e.detail.scrollTop;\r\n\r\n      if (top > 60) {\r\n        this.setData({\r\n          topFixed: true\r\n        });\r\n      } else {\r\n        this.setData({\r\n          topFixed: false\r\n        });\r\n      }\r\n    },\r\n    // SKU弹窗\r\n    setModalStatus: function (type) {\r\n      if (this.showSKUstatus == 0) {\r\n        this.showSKUstatus = 1;\r\n      } else {\r\n        this.showSKUstatus = 0;\r\n      }\r\n\r\n      var animation = wx.createAnimation({\r\n        duration: 300,\r\n        timingFunction: \"linear\",\r\n        delay: 0\r\n      });\r\n      animation.translateY(300).opacity(1).step();\r\n      this.setData({\r\n        animationData: animation.export()\r\n      });\r\n\r\n      if (this.showSKUstatus == 1) {\r\n        this.setData({\r\n          showModalStatus: true\r\n        });\r\n      }\r\n\r\n      setTimeout(function () {\r\n        animation.translateY(0).step();\r\n        this.setData({\r\n          animationData: animation\r\n        });\r\n\r\n        if (this.showSKUstatus == 0) {\r\n          this.setData({\r\n            showModalStatus: false\r\n          });\r\n        }\r\n      }.bind(this), 200);\r\n    },\r\n    // setModalStatus: function (type) {\r\n    //   if (this.data.showSKUstatus == 0) {\r\n    //     this.data.showSKUstatus = 1;\r\n    //   } else {\r\n    //     this.data.showSKUstatus = 0;\r\n    //   }\r\n    //   var animation = wx.createAnimation({\r\n    //     duration: 300,\r\n    //     timingFunction: \"linear\",\r\n    //     delay: 0\r\n    //   })\r\n    //   animation.translateY(300).opacity(1).step();\r\n    //   this.setData({\r\n    //     animationData: animation.export()\r\n    //   })\r\n    //   if (this.data.showSKUstatus == 1) {\r\n    //     this.setData({\r\n    //       showModalStatus: true\r\n    //     });\r\n    //   }\r\n    //   setTimeout(function () {\r\n    //     animation.translateY(0).step()\r\n    //     this.setData({\r\n    //       animationData: animation\r\n    //     })\r\n    //     if (this.data.showSKUstatus == 0) {\r\n    //       this.setData({\r\n    //         showModalStatus: false\r\n    //       });\r\n    //     }\r\n    //   }.bind(this), 200)\r\n    // },\r\n    //添加到购物车\r\n    addShopCart: function (e) {\r\n      // 跳转登录\r\n      var isOldUser = common.getStorageSync('isOldUser');\r\n\r\n      if (!app.checkSessionKey || isOldUser == 2) {\r\n        common.goRegister();\r\n        return false;\r\n      }\r\n\r\n      var that = this; // 判断sku是否立即购买\r\n\r\n      this.setData({\r\n        buy_now: e.target.dataset.buynow\r\n      });\r\n\r\n      if (this.productid == e.target.dataset.productid) {\r\n        addCart(e);\r\n      } else {\r\n        this.loadProductDetail(e).then(function () {\r\n          addCart(e);\r\n        });\r\n      }\r\n\r\n      function addCart(e) {\r\n        if (!that.checkCanPurchase()) return;\r\n        var product = that.itemData;\r\n        var type = e.currentTarget.dataset.type; // type == 'addcart' && \r\n\r\n        if (that.currentAttrs.length == product.properties.length) {\r\n          // 验证库存\r\n          var product_id = '';\r\n\r\n          for (var i in product.stock) {\r\n            var stock = product.stock[i].key;\r\n            stock = stock.split('_');\r\n            stock.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n            stock = stock.join('_');\r\n            var attrs = that.currentAttrs.join('_');\r\n\r\n            if (attrs == stock) {\r\n              product_id = product.stock[i].key;\r\n              break;\r\n            }\r\n          }\r\n\r\n          var invurl = app.getPath.addCart;\r\n\r\n          if (product.pre_info && product.pre_info.is_pre == 1) {\r\n            invurl = app.getPath.addCart;\r\n          }\r\n\r\n          var invdata = {\r\n            goods_id: product.goods_id,\r\n            sku_key: product_id,\r\n            amount: that.buynum\r\n          };\r\n          // app.aldstat.sendEvent(\"加入购物车\", {\r\n          //   \"商品名称\": that.itemData.report.goods_name,\r\n          //   \"用户名\": that.itemData.report.nick_name\r\n          // });\r\n          common.formIdUpdate(e);\r\n          common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n            if (!ret) return;\r\n\r\n            if (ret.data.success != 0) {\r\n              that.currentAttrs = [];\r\n              that.setData({\r\n                cartAmount: ret.data.result.cart_num,\r\n                productid: 0\r\n              });\r\n              common.toast(ret.data.msg);\r\n\r\n              if (type == 'bottomcart') {\r\n                // that.setModalStatus(e);\r\n                that.setData({\r\n                  showModalStatus: false,\r\n                  showSKUstatus: 0\r\n                });\r\n              }\r\n            } else {\r\n              common.toast(ret.data.msg);\r\n              return;\r\n            }\r\n          });\r\n        } else {\r\n          // type != 'addcart' || \r\n          if (that.showSKUstatus == 0) {\r\n            that.setModalStatus(type);\r\n            that.setData({\r\n              showfwModalStatus: false,\r\n              showShareModalStatus: false,\r\n              showBonusModal: false\r\n            });\r\n          } else {\r\n            common.toast('请选择商品款式');\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 立即购买\r\n    nowPurchase: function (e) {\r\n      var that = this; // 跳转登录\r\n\r\n      var isOldUser = common.getStorageSync('isOldUser');\r\n\r\n      if (!app.checkSessionKey || isOldUser == 2) {\r\n        common.goRegister();\r\n        return false;\r\n      } // 判断sku是否立即购买\r\n\r\n\r\n      this.setData({\r\n        buy_now: e.target.dataset.buynow\r\n      });\r\n\r\n      if (that.productid == e.target.dataset.productid) {\r\n        nowPurchaseSub(e);\r\n      } else {\r\n        that.loadProductDetail(e).then(function () {\r\n          nowPurchaseSub(e);\r\n        });\r\n      }\r\n\r\n      function nowPurchaseSub(e) {\r\n        if (!that.checkCanPurchase()) return;\r\n        var product = that.itemData; // that.setData({\r\n        //   buy_now: 1\r\n        // })\r\n\r\n        if (that.currentAttrs.length == product.properties.length) {\r\n          // 验证库存\r\n          var product_id = '';\r\n\r\n          for (var i in product.stock) {\r\n            var stock = product.stock[i].key;\r\n            stock = stock.split('_');\r\n            stock.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n            stock = stock.join('_');\r\n            var attrs = that.currentAttrs.join('_');\r\n\r\n            if (attrs == stock) {\r\n              product_id = product.stock[i].key;\r\n              break;\r\n            }\r\n          }\r\n\r\n          var invurl = app.getPath.skuEnough;\r\n\r\n          if (product.pre_info && product.pre_info.is_pre == 1) {\r\n            invurl = app.getPath.skuEnough;\r\n          }\r\n\r\n          var invdata = {\r\n            goods_id: product.goods_id,\r\n            sku_key: product_id,\r\n            amount: that.buynum\r\n          };\r\n          // app.aldstat.sendEvent(\"立即购买\", {\r\n          //   \"商品名称\": that.itemData.report.goods_name,\r\n          //   \"用户名\": that.itemData.report.nick_name\r\n          // });\r\n          common.formIdUpdate(e);\r\n          common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n            if (!ret) return;\r\n\r\n            if (ret.data.result.is_enough != 1) {\r\n              common.toast(ret.data.result.msg);\r\n              return;\r\n            } else {\r\n              that.currentAttrs = []; // showSKUstatus 0关闭  1展开  重置为关闭\r\n\r\n              that.setData({\r\n                showModalStatus: false,\r\n                showSKUstatus: 0,\r\n                cartAmount: ret.data.result.cart_num,\r\n                productid: 0\r\n              });\r\n              wx.navigateTo({\r\n                url: '/pages/confirm/confirm'\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          if (that.showSKUstatus == 0) {\r\n            that.setModalStatus();\r\n            that.setData({\r\n              showfwModalStatus: false,\r\n              showShareModalStatus: false,\r\n              showBonusModal: false\r\n            });\r\n          } else {\r\n            common.toast('请选择商品款式');\r\n          }\r\n        } // 立即购买的缓存\r\n\r\n\r\n        common.setStorage({\r\n          key: \"nowPay\",\r\n          data: that.confirmData\r\n        });\r\n      }\r\n    },\r\n    // 商品详情数据获取\r\n    loadProductDetail: function (e) {\r\n      var productid = e.target.dataset.productid;\r\n      this.setData({\r\n        productid: e.target.dataset.productid\r\n      });\r\n      var that = this;\r\n      common.showLoad(that);\r\n      var uri = app.getPath.goodsInfo;\r\n      var skuAmounturi = app.getPath.getSkuAmount;\r\n      var data = {\r\n        goods_id: productid\r\n      };\r\n      return new Promise(function (resolve, reject) {\r\n        common.ApiGateWayTest(uri, data, true, function (res) {\r\n          if (res.statusCode == 200) {\r\n            var productlist = res.data.result; // productlist.min_buy_amount = productlist.min_buy_amount ? productlist.min_buy_amount : 1;\r\n\r\n            var content = productlist.goods_content;\r\n            var introContent = productlist.detail_explain;\r\n            var islike = productlist.is_liked;\r\n            productlist.current_price = productlist.shop_price;\r\n            productlist.price = productlist.market_price; // WxParse.wxParse('content', 'html', content, that, 0);\r\n            // WxParse.wxParse('introContent', 'html', introContent, that, 0);\r\n\r\n            that.setData({\r\n              itemData: productlist,\r\n              bannerItem: productlist.gallery,\r\n              indicatorDots: productlist.gallery.length > 1 ? true : false,\r\n              buynum: productlist.min_buy_amount,\r\n              // isLike: islike,\r\n              brandID: productlist.cat_id,\r\n              skuSvipCurrent: productlist.shop_price,\r\n              skuCurrent: productlist.market_price\r\n            });\r\n            that.setDefaultSKU(productlist); // that.loadipRecommend();\r\n            // that.getGoodsRecommend();\r\n\r\n            that.isPriceEqualFun();\r\n            common.hideLoad(that);\r\n          } else {\r\n            common.hideLoad(that);\r\n            common.toast(\"获取购物车数量失败\");\r\n          }\r\n\r\n          resolve('获取商详信息');\r\n        });\r\n        common.ApiGateWayTest(skuAmounturi, '', true, function (res) {\r\n          if (res.statusCode == 200) {\r\n            that.setData({\r\n              cartAmount: res.data.result.cart_num\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    //设置默认SKU\r\n    setDefaultSKU: function (product) {\r\n      // product 请求到的数据\r\n      var defaultAttrIds = [];\r\n      var defaultAttrStock = null;\r\n      var maybeStock = [];\r\n      var effectiveStock = []; // 得到SKU组合的原始数组\r\n\r\n      for (var i = 0; i < product.properties.length; ++i) {\r\n        var property = product.properties[i];\r\n\r\n        if (!property.is_multiselect) {\r\n          maybeStock[i] = [];\r\n\r\n          for (var j = 0; j < property.attrs.length; j++) {\r\n            maybeStock[i].push(property.attrs[j].id);\r\n          }\r\n        }\r\n      } // 得到多个笛卡尔积组合\r\n\r\n\r\n      maybeStock = common.multiCartesian(maybeStock);\r\n\r\n      if (maybeStock.length && maybeStock[0] instanceof Array) {\r\n        for (var i = 0; i < maybeStock.length; i++) {\r\n          maybeStock[i].sort(function (a, b) {\r\n            return a - b;\r\n          });\r\n        }\r\n      } //验证是否可以购买\r\n\r\n\r\n      this.setData({\r\n        canPurchase: this.checkCanPurchase()\r\n      });\r\n      var min_sku_price = 9999999999;\r\n      var min_sku_svip_price = 9999999999;\r\n\r\n      for (var i = 0; i < product.stock.length; ++i) {\r\n        var _goods_attr = product.stock[i].key.split('_');\r\n\r\n        var _min_sku_price = product.stock[i].market_price,\r\n            _min_sku_svip_price = product.stock[i].price;\r\n        var hasDefaultFlag = false;\r\n\r\n        if (min_sku_svip_price > _min_sku_svip_price) {\r\n          var ids = [];\r\n\r\n          if (product.is_goods_number > 0 && product.is_on_sale && product.stock[i].is_enough) {\r\n            //商品能购买，并且该sku有库存 则更新最低价\r\n            for (var ind = 0, len = _goods_attr.length; ind < len; ind++) {\r\n              ids.push(parseInt(_goods_attr[ind]));\r\n            }\r\n\r\n            defaultAttrIds = ids;\r\n            defaultAttrStock = [{\r\n              attrs: defaultAttrIds,\r\n              stock: product.stock[i]\r\n            }];\r\n            hasDefaultFlag = true;\r\n            min_sku_svip_price = _min_sku_svip_price;\r\n            min_sku_price = _min_sku_price;\r\n          } else if (!product.is_goods_number > 0 || !product.is_on_sale) {\r\n            //商品不能购买，则一定更新最低价，否则就是9999999999\r\n            for (var ind = 0, len = _goods_attr.length; ind < len; ind++) {\r\n              ids.push(parseInt(_goods_attr[ind]));\r\n            }\r\n\r\n            defaultAttrIds = ids;\r\n            defaultAttrStock = [{\r\n              attrs: defaultAttrIds,\r\n              stock: product.stock[i]\r\n            }];\r\n            hasDefaultFlag = true;\r\n            min_sku_svip_price = _min_sku_svip_price;\r\n            min_sku_price = _min_sku_price;\r\n          }\r\n        }\r\n\r\n        _goods_attr.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n\r\n        _goods_attr = _goods_attr.join('_');\r\n\r\n        for (var j = 0; j < maybeStock.length; j++) {\r\n          var _thisStock = '';\r\n\r\n          if (maybeStock[j] instanceof Array) {\r\n            _thisStock = maybeStock[j].join('_');\r\n          } else if (maybeStock[j] instanceof Object) {\r\n            _thisStock = '';\r\n          } else {\r\n            _thisStock = maybeStock[j];\r\n          }\r\n\r\n          if (_goods_attr == _thisStock) {\r\n            if (product.stock[i].is_enough == true) {\r\n              effectiveStock.push({\r\n                attrs: maybeStock[j],\r\n                stock: product.stock[i]\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      var skuSvipCurrent = this.itemData.current_price;\r\n      var skuCurrent = this.itemData.price;\r\n      this.setData({\r\n        sku_price: min_sku_price,\r\n        min_sku_price: min_sku_price,\r\n        sku_svip_price: min_sku_svip_price,\r\n        min_sku_svip_price: min_sku_svip_price,\r\n        skuSvipCurrent: parseFloat(skuSvipCurrent).toFixed(2),\r\n        skuCurrent: skuCurrent,\r\n        currentStock: defaultAttrStock\r\n      }); //先通过设置默认sku，来设置默认显示价格，设置完之后，把默认sku去掉，不影响原来逻辑\r\n\r\n      this.currentAttrs = defaultAttrIds;\r\n      this.setData({\r\n        hasDefaultSKU: this.currentStock ? true : false\r\n      });\r\n      this.set_choosed_sku();\r\n      defaultAttrIds = [];\r\n      defaultAttrStock = null;\r\n      this.setData({\r\n        currentStock: null,\r\n        hasDefaultSKU: false\r\n      });\r\n      this.currentAttrs = [];\r\n\r\n      if (effectiveStock.length == 1) {\r\n        defaultAttrIds = effectiveStock[0].attrs instanceof Array ? effectiveStock[0].attrs : [effectiveStock[0].attrs];\r\n        defaultAttrStock = effectiveStock[0].stock;\r\n      }\r\n\r\n      if (effectiveStock.length > 1) {\r\n        for (var i in product.properties) {\r\n          var attrs = product.properties[i].attrs;\r\n\r\n          for (var j in attrs) {\r\n            var isin_count = 0;\r\n\r\n            for (var k in effectiveStock) {\r\n              var isin = new RegExp(attrs[j].id).test(effectiveStock[k].attrs);\r\n\r\n              if (isin) {\r\n                isin_count++;\r\n              }\r\n            }\r\n\r\n            if (isin_count == effectiveStock.length) {\r\n              defaultAttrIds.push(attrs[j].id);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        currentStock: defaultAttrStock\r\n      });\r\n      this.currentAttrs = defaultAttrIds;\r\n      this.setData({\r\n        hasDefaultSKU: this.currentStock ? true : false\r\n      });\r\n      this.set_choosed_sku();\r\n    },\r\n    //设置choosed_sku\r\n    set_choosed_sku: function () {\r\n      var that = this;\r\n      var product = that.itemData;\r\n\r\n      if (that.currentAttrs.length < product.properties.length) {\r\n        that.sku_price = that.min_sku_price;\r\n        that.sku_svip_price = that.min_sku_svip_price;\r\n        that.setData({\r\n          choosed_sku: '选择：商品规格',\r\n          skuImages: product.header_img,\r\n          skuSvipCurrent: that.itemData.current_price,\r\n          skuCurrent: that.itemData.price\r\n        });\r\n        that.setAttrsClass();\r\n        return;\r\n      }\r\n\r\n      var choosed_sku = '';\r\n      var sku_price = 0;\r\n      var sku_svip_price = 0;\r\n      var skuSvipCurrent = that.itemData.current_price;\r\n      var skuCurrent = that.itemData.price;\r\n      that.setData({\r\n        choosed_sku: choosed_sku,\r\n        sku_price: sku_price,\r\n        sku_svip_price: sku_svip_price,\r\n        skuSvipCurrent: skuSvipCurrent,\r\n        skuCurrent: skuCurrent\r\n      });\r\n\r\n      for (var i in product.properties) {\r\n        var attrs = product.properties[i].attrs;\r\n\r\n        for (var j in attrs) {\r\n          for (var k in that.currentAttrs) {\r\n            if (that.currentAttrs[k] == attrs[j].id) {\r\n              choosed_sku += attrs[j].item + ' '; //\t\t\t\t\tsku_price += attrs[j].attr_price;\r\n              //\t\t\t\t\tsku_svip_price += attrs[j].attr_svip_price;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (choosed_sku != '') {\r\n        for (var i in product.stock) {\r\n          var stock = product.stock[i].key;\r\n          stock = stock.split('_');\r\n          stock.sort(function (a, b) {\r\n            return a - b;\r\n          });\r\n          stock = stock.join('_');\r\n          var attrs = that.currentAttrs.join('_');\r\n\r\n          if (attrs == stock) {\r\n            that.skuImages = product.stock[i].header_img;\r\n            sku_price = product.stock[i].market_price;\r\n            sku_svip_price = product.stock[i].shop_price;\r\n          }\r\n        }\r\n\r\n        that.confirmData = [{\r\n          goods_name: product.goods_name,\r\n          goods_id: product.goods_id,\r\n          sku_key: attrs,\r\n          amount: that.buynum,\r\n          shop_price: sku_svip_price,\r\n          market_price: sku_price,\r\n          sku_key_name: \"规格:\" + choosed_sku,\r\n          sku_img: that.skuImages\r\n        }];\r\n        choosed_sku = '已选：' + choosed_sku;\r\n        var skuSvipCurrent = sku_svip_price;\r\n        var skuCurrent = sku_price;\r\n        that.setData({\r\n          choosed_sku: choosed_sku,\r\n          sku_price: sku_price,\r\n          sku_svip_price: sku_svip_price,\r\n          skuSvipCurrent: skuSvipCurrent,\r\n          skuCurrent: skuCurrent,\r\n          skuImages: that.skuImages\r\n        });\r\n      }\r\n\r\n      that.setAttrsClass();\r\n    },\r\n    //SKU选择\r\n    attrValueselest: function (e) {\r\n      var that = this;\r\n      var product = this.itemData;\r\n      if (!product) return;\r\n      var property = e.currentTarget.dataset.property;\r\n      var attr = e.currentTarget.dataset.attr;\r\n\r\n      if (attr.is_multiselect) {\r\n        var attrs = [].concat(this.optionalAttrs);\r\n        var index = attrs.indexOf(attr.id);\r\n\r\n        if (-1 == index) {\r\n          attrs.push(attr.id);\r\n        } else {\r\n          attrs.splice(index, 1);\r\n        }\r\n\r\n        this.setData({\r\n          optionalAttrs: attrs\r\n        });\r\n      } else {\r\n        var inStock = false;\r\n\r\n        for (var i in product.stock) {\r\n          if (product.stock[i].is_enough != true) {\r\n            continue;\r\n          }\r\n\r\n          if (product.stock[i].key.indexOf(String(attr.id)) >= 0) {\r\n            inStock = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!inStock) {\r\n          common.toast('库存不足');\r\n          return;\r\n        }\r\n\r\n        var stock = null;\r\n        var attrs = [].concat(this.currentAttrs);\r\n        var index = attrs.indexOf(attr.id);\r\n\r\n        if (-1 == index) {\r\n          attrs.push(attr.id);\r\n        } else {\r\n          attrs.splice(index, 1);\r\n        }\r\n\r\n        for (var i in property.attrs) {\r\n          if (property.attrs[i].id != attr.id) {\r\n            var index = attrs.indexOf(property.attrs[i].id);\r\n\r\n            if (-1 != index) {\r\n              attrs.splice(index, 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        attrs = attrs.filter(function (attr, index, self) {\r\n          return self.indexOf(attr) === index;\r\n        });\r\n        attrs.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n\r\n        if (attrs.length) {\r\n          var key = attrs.join('_');\r\n\r\n          for (var i = 0; i < product.stock.length; ++i) {\r\n            var _goods_attr = product.stock[i].key.split('_');\r\n\r\n            _goods_attr.sort(function (a, b) {\r\n              return a - b;\r\n            });\r\n\r\n            _goods_attr = _goods_attr.join('_');\r\n\r\n            if (_goods_attr == key) {\r\n              stock = product.stock[i];\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (stock && stock.is_enough) {\r\n          this.currentStock = stock, this.currentAttrs = attrs, this.setData({\r\n            buynum: product.min_buy_amount\r\n          });\r\n        } else {\r\n          if (attrs.length < product.properties.length) {\r\n            this.currentStock = null, this.currentAttrs = attrs, this.setData({\r\n              buynum: product.min_buy_amount\r\n            });\r\n          } else {\r\n            common.toast('库存不足');\r\n          }\r\n        }\r\n\r\n        this.setData({\r\n          canPurchase: this.checkCanPurchase()\r\n        });\r\n      }\r\n\r\n      this.set_choosed_sku();\r\n    },\r\n    //设置每一个attr的class\r\n    setAttrsClass: function () {\r\n      var product = this.itemData;\r\n      var property = product.properties;\r\n\r\n      for (var i in property) {\r\n        var attrs = property[i].attrs;\r\n\r\n        for (var j in attrs) {\r\n          var attr = attrs[j];\r\n\r\n          if (!product) {\r\n            attr.class = 'disable';\r\n            continue;\r\n          }\r\n\r\n          if (product.is_goods_number == 0) {\r\n            attr.class = 'disable';\r\n            continue;\r\n          }\r\n\r\n          var attrArr = [];\r\n\r\n          if (attr.is_multiselect) {\r\n            attr.class = this.optionalAttrs.indexOf(attr.id) == -1 ? '' : 'active';\r\n          } else {\r\n            attr.class = this.currentAttrs.indexOf(attr.id) == -1 ? '' : 'active';\r\n            var inStock = false;\r\n\r\n            for (var i in product.stock) {\r\n              if (product.stock[i].is_enough != true) {\r\n                var currentAyyrsJn = this.currentAttrs.join(\"_\");\r\n\r\n                if (product.stock[i].key.indexOf(String(currentAyyrsJn)) >= 0 && this.currentAttrs.length > 0) {\r\n                  var stockDisplyKey = product.stock[i].key.split(\"_\");\r\n\r\n                  for (var j in stockDisplyKey) {\r\n                    if (stockDisplyKey[j] != this.currentAttrs) {\r\n                      for (var k in product.properties) {\r\n                        for (var s in product.properties[k].attrs) {\r\n                          if (product.properties[k].attrs[s].id == stockDisplyKey[j]) {\r\n                            product.properties[k].attrs[s].class = 'disable';\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                } else {\r\n                  continue;\r\n                }\r\n              }\r\n\r\n              if (product.stock[i].key.indexOf(String(attr.id)) >= 0) {\r\n                inStock = true;\r\n                break;\r\n              }\r\n            }\r\n\r\n            if (!inStock) {\r\n              attr.class += 'disable';\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        itemData: product\r\n      });\r\n    },\r\n    //验证是否可以购买\r\n    checkCanPurchase: function () {\r\n      var product = this.itemData;\r\n      var required = false;\r\n\r\n      if (product.pre_info && product.pre_info.is_pre == 1) {\r\n        this.setData({\r\n          sumbitName: product.pre_info.pre_time\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (!product || product.is_enough == 0) {\r\n        this.setData({\r\n          sumbitName: '抱歉，商品已售罄'\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (product.is_on_sale == 0) {\r\n        this.setData({\r\n          sumbitName: '抱歉，商品已下架'\r\n        });\r\n        return false;\r\n      }\r\n\r\n      if (this.currentAttrs.length >= product.properties.length) {\r\n        for (var i in product.properties) {\r\n          if (!product.properties[i].is_multiselect) {\r\n            required = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (required) {\r\n          if (!this.currentAttrs || !this.currentAttrs.length) {\r\n            return false;\r\n          }\r\n\r\n          if (!this.currentStock) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setData({\r\n        sumbitName: '立即购买'\r\n      });\r\n      return true;\r\n    },\r\n    // SKU价格和非VIP价格是否相同\r\n    isPriceEqualFun: function () {\r\n      var that = this;\r\n\r\n      if (that.itemData.price && that.itemData.current_price) {\r\n        var price = that.itemData.price + that.sku_price,\r\n            svip_price = that.itemData.current_price + that.sku_svip_price;\r\n\r\n        if (price == svip_price) {\r\n          that.setData({\r\n            isPriceEqual: true\r\n          });\r\n        } else {\r\n          that.setData({\r\n            isPriceEqual: false\r\n          });\r\n        }\r\n      } else {\r\n        that.setData({\r\n          isPriceEqual: false\r\n        });\r\n      }\r\n    },\r\n    // 加减\r\n    changeNum: function (e) {\r\n      var that = this;\r\n      var product = that.itemData;\r\n      var invurl = app.getPath.skuEnough;\r\n\r\n      if (product.pre_info && product.pre_info.is_pre == 1) {\r\n        invurl = app.getPath.skuEnough;\r\n      }\r\n\r\n      var product_id = '';\r\n\r\n      for (var i in product.stock) {\r\n        var stock = product.stock[i].key;\r\n        stock = stock.split('_');\r\n        stock.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        stock = stock.join('_');\r\n        var attrs = that.currentAttrs.join('_');\r\n\r\n        if (attrs == stock) {\r\n          product_id = product.stock[i].key;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (that.currentAttrs.length == product.properties.length) {\r\n        // alpha-beta 0  减\r\n        if (e.currentTarget.dataset.alphaBeta == 0) {\r\n          if (!that.checkCanPurchase()) return; // Lin start\r\n\r\n          if (that.buynum <= that.itemData.min_buy_amount) {\r\n            common.toast('不能小于最小购买数量');\r\n            return;\r\n          } // Lin end\r\n\r\n\r\n          if (that.buynum <= 1) {// buynum: 1\r\n          } else if (that.buynum === 2) {\r\n            that.setData({\r\n              buynum: that.buynum - 1,\r\n              undel: true\r\n            });\r\n          } else {\r\n            that.setData({\r\n              buynum: that.buynum - 1\r\n            });\r\n          } // 验证库存\r\n\r\n\r\n          if (that.buynum != 1) {\r\n            var invdata = {\r\n              goods_id: product.goods_id,\r\n              sku_key: product_id,\r\n              amount: that.buynum\r\n            };\r\n            common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n              if (!ret) return;\r\n\r\n              if (ret.data.result.is_enough != 1) {\r\n                common.toast(ret.data.result.msg);\r\n                return;\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          // alpha-beta 1  加      max_buy_amount==0不限制数量\r\n          // Lin start\r\n          if (that.itemData.max_buy_amount != 0 && that.buynum >= that.itemData.max_buy_amount) {\r\n            common.toast('不能在多啦~');\r\n            return;\r\n          } // Lin end\r\n\r\n\r\n          that.setData({\r\n            buynum: that.buynum + 1,\r\n            undel: false\r\n          });\r\n\r\n          if (that.buynum > 1) {\r\n            var invdata = {\r\n              goods_id: product.goods_id,\r\n              sku_key: product_id,\r\n              amount: that.buynum\r\n            };\r\n            common.ApiGateWayTest(invurl, invdata, true, function (ret) {\r\n              if (!ret) return;\r\n\r\n              if (ret.data.result.is_enough != 1) {\r\n                common.toast(ret.data.result.msg);\r\n                that.setData({\r\n                  buynum: that.buynum - 1\r\n                });\r\n                that.set_choosed_sku();\r\n                return;\r\n              }\r\n            });\r\n          }\r\n        }\r\n\r\n        that.confirmData.num = that.buynum;\r\n      } else {\r\n        if (that.showSKUstatus == 0) {\r\n          that.setModalStatus();\r\n        } else {\r\n          common.toast('请选择商品款式');\r\n        }\r\n      }\r\n\r\n      that.set_choosed_sku();\r\n    },\r\n\r\n    // 跳转商品页\r\n    goToProduct(e) {\r\n      var goodsid = e.currentTarget.dataset.goodsid;\r\n\r\n      if (app.checkSessionKey) {\r\n        common.formIdUpdate(e);\r\n      }\r\n\r\n      wx.navigateTo({\r\n        url: '/pages/product/product?entryType=external&productId=' + goodsid\r\n      });\r\n    },\r\n\r\n    setData: function (obj) {\r\n      let that = this;\r\n      let keys = [];\r\n      let val, data;\r\n      Object.keys(obj).forEach(function (key) {\r\n        keys = key.split('.');\r\n        val = obj[key];\r\n        data = that.$data;\r\n        keys.forEach(function (key2, index) {\r\n          that[key] = obj[key];\r\n        });\r\n      });\r\n    }\r\n  }\r\n};\r\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}