{"version":3,"sources":["webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?cb1f","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?f4c2","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?cef8","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?ee0c","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?ea81","webpack:///C:/Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue?e744"],"names":["app","getApp","globalData","common","require","data","iconURL","dataBase","toast","commentsText","imgList","uploadImg","imgNowLength","countNum","order_id","orderReview","review","components","props","onLoad","options","undefined","order","setData","getReviewInfo","methods","that","uri","getPath","againCommentView","ApiGateWayTest","res","success","result","reviewData","i","goods_id","content","comment_id","comment","img","checkedId","goods_name","old_content","comment_rank","goods_img","review_img","add_comments","e","detail","value","currentTarget","dataset","touchSubmit","JSON","stringify","againComment","msg","setTimeout","wx","navigateBack","updataimg","length","count","Number","chooseImg","chooseImage","concat","tempFilePaths","delUploadImg","index","splice","submitImg","key","showToast","title","icon","duration","num","j","then","thisIndex","hideLoading","imgData","header","getStorageSync","Promise","resolve","reject","path","img_type","uploadFile","url","filePath","name","formData","parse","push","showLoading","mask","obj","keys","val","Object","forEach","split","$data","key2"],"mappings":"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","file":"packageA/user/add-order-review.js","sourcesContent":["import { render, staticRenderFns } from \"./add-order-review.vue?vue&type=template&id=1aa70bea&\"\nimport script from \"./add-order-review.vue?vue&type=script&lang=js&\"\nexport * from \"./add-order-review.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add-order-review.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('1aa70bea', component.options)\n    } else {\n      api.reload('1aa70bea', component.options)\n    }\n    module.hot.accept(\"./add-order-review.vue?vue&type=template&id=1aa70bea&\", function () {\n      api.rerender('1aa70bea', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/xhz/Desktop/project/mmt 10.12 - 16.00/packageA/user/add-order-review.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-order-review.vue?vue&type=template&id=1aa70bea&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-order-review.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-order-review.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst app = getApp().globalData;\nconst common = require(\"../../utils/common.js\");\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ticonURL: app.dataBase.iconURL,\n\t\t\ttoast: true,\n\t\t\tcommentsText: '',\n\t\t\timgList: [],\n\t\t\tuploadImg: [],\n\t\t\timgNowLength: 0,\n\t\t\tcountNum: 0,\n\t\t\torder_id: \"\",\n\t\t\torderReview: \"\",\n\t\t\treview: \"\"\n\t\t};\n\t},\n\n\tcomponents: {},\n\tprops: {},\n\tonLoad: function(options) {\n\t\tif (options == undefined || options.order == undefined) {\n\t\t\tcommon.toast(\"请求参数错误\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setData({\n\t\t\torder_id: options.order\n\t\t});\n\t\tthis.getReviewInfo();\n\t},\n\tmethods: {\n\t\tgetReviewInfo: function() {\n\t\t\tvar that = this;\n\t\t\tvar uri = app.getPath.againCommentView;\n\t\t\tvar data = {\n\t\t\t\torder_id: that.order_id\n\t\t\t};\n\t\t\tcommon.ApiGateWayTest(uri, data, true, function(res) {\n\t\t\t\tif (res.data.success == 1) {\n\t\t\t\t\tvar data = res.data.result;\n\t\t\t\t\tvar review = [];\n\t\t\t\t\tvar reviewData = [];\n\n\t\t\t\t\tfor (var i in data) {\n\t\t\t\t\t\t// 追加评价的数据对象\n\t\t\t\t\t\treview[i] = {\n\t\t\t\t\t\t\tgoods_id: data[i].goods_id,\n\t\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\t\tcomment_id: data[i].comment.comment_id,\n\t\t\t\t\t\t\timg: [],\n\t\t\t\t\t\t\tcheckedId: i\n\t\t\t\t\t\t}; // 上一次评价的数据对象\n\n\t\t\t\t\t\treviewData[i] = {\n\t\t\t\t\t\t\tgoods_id: data[i].goods_id,\n\t\t\t\t\t\t\tgoods_name: data[i].goods_name,\n\t\t\t\t\t\t\tcomment_id: data[i].comment.comment_id,\n\t\t\t\t\t\t\told_content: data[i].comment.content,\n\t\t\t\t\t\t\tcomment_rank: data[i].comment.comment_rank,\n\t\t\t\t\t\t\tgoods_img: data[i].img,\n\t\t\t\t\t\t\treview_img: data[i].comment.img,\n\t\t\t\t\t\t\tcheckedId: i,\n\t\t\t\t\t\t\tuploadImg: []\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\torderReview: reviewData,\n\t\t\t\t\t\treview: review\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获取追加的评论内容\n\t\tadd_comments: function(e) {\n\t\t\tvar commentsText = e.detail.value;\n\t\t\tvar checkedId = e.currentTarget.dataset.checkedId;\n\t\t\tvar data = this.orderReview;\n\n\t\t\tfor (var i in data) {\n\t\t\t\tif (checkedId == data[i].checkedId) {\n\t\t\t\t\tthis.review[i].content = commentsText;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 提交数据到后端\n\t\ttouchSubmit: function() {\n\t\t\tvar that = this;\n\t\t\tvar review = JSON.stringify(that.review);\n\t\t\tvar uri = app.getPath.againComment;\n\t\t\tvar data = {\n\t\t\t\torder_id: that.order_id,\n\t\t\t\treview: review\n\t\t\t};\n\t\t\tcommon.ApiGateWayTest(uri, data, true, function(res) {\n\t\t\t\tif (res.data.success == 1) {\n\t\t\t\t\tcommon.toast(res.data.msg);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twx.navigateBack(1);\n\t\t\t\t\t}, 1500);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//选择图片\n\t\tupdataimg: function(e) {\n\t\t\tvar that = this;\n\t\t\tvar checkedId = e.currentTarget.dataset.checkedId;\n\t\t\tvar data = that.orderReview;\n\n\t\t\tfor (var i in data) {\n\t\t\t\tif (data[i].checkedId == checkedId) {\n\t\t\t\t\tif (data[i].uploadImg.length <= 3) {\n\t\t\t\t\t\tvar count = 3 - Number(data[i].uploadImg.length);\n\t\t\t\t\t\tthat.chooseImg(i, count);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t//选择图片api\n\t\tchooseImg: function(i, count) {\n\t\t\tvar that = this;\n\t\t\twx.chooseImage({\n\t\t\t\tcount: count,\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tthat.orderReview[i].uploadImg = that.orderReview[i].uploadImg.concat(res.tempFilePaths);\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\torderReview: that.orderReview\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//删除选中的图片\n\t\tdelUploadImg: function(e) {\n\t\t\tvar index = e.currentTarget.dataset.index;\n\t\t\tvar checkedId = e.currentTarget.dataset.checkedId;\n\t\t\tvar data = this.orderReview;\n\n\t\t\tfor (var i in data) {\n\t\t\t\tif (data[i].checkedId == checkedId) {\n\t\t\t\t\tdata[i].uploadImg.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setData({\n\t\t\t\torderReview: data\n\t\t\t});\n\t\t},\n\t\t// 点击提交事件\n\t\tsubmitImg: function(e, key) {\n\t\t\tvar that = this;\n\n\t\t\tfor (var i in that.orderReview) {\n\t\t\t\tif (that.review[i].content.length > 0 && that.review[i].content.length < 5) {\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle: '评论字数不能少于5个',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar data = that.orderReview;\n\t\t\tvar index = '';\n\n\t\t\tif (!key) {\n\t\t\t\tindex = 0;\n\t\t\t} else {\n\t\t\t\tindex = key;\n\t\t\t} // 计算总的上传图片数量\n\n\n\t\t\tvar num = 0;\n\n\t\t\tfor (var i in data) {\n\t\t\t\tfor (var j = 0; j < data[i].uploadImg.length; j++) {\n\t\t\t\t\tnum++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat.countNum = num; // 处理异步回调的递归\n\n\t\t\tthat.uploadImg(index).then(function(res) {\n\t\t\t\tif (res < that.orderReview.length - 1) {\n\t\t\t\t\tvar thisIndex = res + 1;\n\t\t\t\t\tthat.submitImg('', thisIndex);\n\t\t\t\t} else if (res == that.orderReview.length - 1) {\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t\tthat.touchSubmit();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//上传图片到服务\n\t\tuploadImg: function(index) {\n\t\t\tvar that = this;\n\t\t\tvar imgData = that.orderReview[index].uploadImg;\n\t\t\tvar header = {\n\t\t\t\t'accept': 'application/json',\n\t\t\t\t'content-type': 'multipart/form-data',\n\t\t\t\t'x-application': 'cilicili',\n\t\t\t\t'x-platform': 'wx',\n\t\t\t\t'x-useragent': 'host',\n\t\t\t\t'x-ver': 'v1.0'\n\t\t\t};\n\t\t\theader['X-Authorization'] = common.getStorageSync('token');\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t// 如果当前数组没有图片直接执行回调\n\t\t\t\tif (imgData.length <= 0) {\n\t\t\t\t\tresolve(index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < imgData.length; i++) {\n\t\t\t\t\tvar img = imgData[i];\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tpath: 'comment',\n\t\t\t\t\t\timg_type: 1\n\t\t\t\t\t};\n\t\t\t\t\twx.uploadFile({\n\t\t\t\t\t\turl: app.dataBase.uploadFile,\n\t\t\t\t\t\tfilePath: img,\n\t\t\t\t\t\tname: 'file',\n\t\t\t\t\t\tformData: data,\n\t\t\t\t\t\theader: header,\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\tvar res = JSON.parse(res.data);\n\n\t\t\t\t\t\t\tif (res.success == 1) {\n\t\t\t\t\t\t\t\tthat.review[index].img.push(res.result.url); // 当前全部上传完时执行回调\n\n\t\t\t\t\t\t\t\tif (that.review[index].img.length == that.orderReview[index].uploadImg.length) {\n\t\t\t\t\t\t\t\t\tthat.setData({\n\t\t\t\t\t\t\t\t\t\treview: that.review\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tresolve(index);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}); // 计算当前上传图片的数量\n\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\timgNowLength: that.imgNowLength + 1\n\t\t\t\t\t}); // 显示当前上传的进度\n\n\t\t\t\t\twx.showLoading({\n\t\t\t\t\t\ttitle: that.imgNowLength + '/' + that.countNum,\n\t\t\t\t\t\tmask: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsetData: function(obj) {\n\t\t\tlet that = this;\n\t\t\tlet keys = [];\n\t\t\tlet val, data;\n\t\t\tObject.keys(obj).forEach(function(key) {\n\t\t\t\tkeys = key.split('.');\n\t\t\t\tval = obj[key];\n\t\t\t\tdata = that.$data;\n\t\t\t\tkeys.forEach(function(key2, index) {\n\t\t\t\t\tthat[key] = obj[key];\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n};\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-order-review.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-order-review.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}